% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sqi_compute.R
\name{compute_sqi_df}
\alias{compute_sqi_df}
\title{Compute Soil Quality Index from data frame}
\usage{
compute_sqi_df(
  df,
  id_column = NULL,
  pairwise_df = NULL,
  directions = NULL,
  var_threshold = 0.05,
  loading_threshold = 0.5,
  ...
)
}
\arguments{
\item{df}{Data frame containing soil property data with samples in rows
and properties in columns.}

\item{id_column}{Optional character string specifying the name of the ID
column to preserve in the output. If NULL, no ID column is preserved.}

\item{pairwise_df}{Optional pairwise comparison matrix (as matrix or data
frame). If NULL, equal weights are used for all indicators.}

\item{directions}{Optional named list specifying scoring functions for each
indicator. If NULL, all indicators use higher-is-better scoring.}

\item{var_threshold}{Numeric value for PCA variance threshold (default 0.05).}

\item{loading_threshold}{Numeric value for PCA loading threshold (default 0.5).}

\item{...}{Additional arguments (currently unused).}
}
\value{
An object of class "sqi_result" containing:
  \describe{
    \item{mds}{Character vector of selected MDS indicators}
    \item{weights}{Named numeric vector of AHP weights}
    \item{CR}{Consistency Ratio from AHP}
    \item{results}{Data frame with original data, scored indicators, and SQI}
    \item{pca}{PCA object from stats::prcomp}
    \item{loadings}{Matrix of variable loadings}
    \item{var_exp}{Numeric vector of variance explained by each PC}
  }
}
\description{
This is the in-memory workflow function that orchestrates the complete
SQI calculation pipeline using data frames. It performs standardization,
PCA-based MDS selection, AHP weighting, indicator scoring, and calculates
the final Soil Quality Index.
}
\details{
The function performs the following steps:
\enumerate{
  \item Preserve ID column if specified
  \item Standardize numeric columns (z-score)
  \item Perform PCA and select MDS indicators
  \item Calculate AHP weights (from pairwise matrix or equal weights)
  \item Score each MDS indicator
  \item Calculate weighted SQI as sum of (weight * score)
}
}
\examples{
# Create example data
soil_data <- data.frame(
  SampleID = paste0("S", 1:20),
  Sand = rnorm(20, 45, 10),
  Silt = rnorm(20, 30, 5),
  Clay = rnorm(20, 25, 5),
  pH = rnorm(20, 6.5, 0.5),
  OM = rnorm(20, 3, 0.5)
)

# Compute SQI
result <- compute_sqi_df(soil_data, id_column = "SampleID")

# View results
head(result$results)
print(result$mds)
print(result$weights)

}
\seealso{
\code{\link{compute_sqi}}, \code{\link{compute_sqi_properties}}
}
