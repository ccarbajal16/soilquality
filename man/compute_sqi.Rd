% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sqi_compute.R
\name{compute_sqi}
\alias{compute_sqi}
\title{Compute Soil Quality Index from CSV file}
\usage{
compute_sqi(
  input_csv,
  id_column = NULL,
  pairwise_csv = NULL,
  output_csv = NULL,
  directions = NULL,
  var_threshold = 0.05,
  loading_threshold = 0.5,
  ...
)
}
\arguments{
\item{input_csv}{Character string specifying the path to the input CSV file
containing soil property data. The file should have samples in rows and
properties in columns.}

\item{id_column}{Optional character string specifying the name of the ID
column to preserve in the output. If NULL, no ID column is preserved.}

\item{pairwise_csv}{Optional character string specifying the path to a CSV
file containing the AHP pairwise comparison matrix. If NULL, equal weights
are used for all indicators.}

\item{output_csv}{Optional character string specifying the path where the
results should be saved as a CSV file. If NULL, results are not saved.}

\item{directions}{Optional named list specifying scoring functions for each
indicator. If NULL, all indicators use higher-is-better scoring.}

\item{var_threshold}{Numeric value for PCA variance threshold (default 0.05).}

\item{loading_threshold}{Numeric value for PCA loading threshold (default 0.5).}

\item{...}{Additional arguments passed to other functions.}
}
\value{
An object of class "sqi_result" containing:
  \describe{
    \item{mds}{Character vector of selected MDS indicators}
    \item{weights}{Named numeric vector of AHP weights}
    \item{CR}{Consistency Ratio from AHP}
    \item{results}{Data frame with original data, scored indicators, and SQI}
    \item{pca}{PCA object from stats::prcomp}
    \item{loadings}{Matrix of variable loadings}
    \item{var_exp}{Numeric vector of variance explained by each PC}
  }
}
\description{
This is the main file-based workflow function that orchestrates the complete
SQI calculation pipeline. It reads soil data from a CSV file, performs
standardization, PCA-based MDS selection, AHP weighting, indicator scoring,
and calculates the final Soil Quality Index.
}
\details{
The function performs the following steps:
\enumerate{
  \item Read soil data from CSV file
  \item Standardize numeric columns (z-score)
  \item Perform PCA and select MDS indicators
  \item Calculate AHP weights (from pairwise matrix or equal weights)
  \item Score each MDS indicator
  \item Calculate weighted SQI as sum of (weight * score)
  \item Optionally save results to CSV
}
}
\examples{
\dontrun{
# Basic usage with CSV file
result <- compute_sqi(
  input_csv = "soil_data.csv",
  id_column = "SampleID"
)

# With AHP pairwise matrix
result <- compute_sqi(
  input_csv = "soil_data.csv",
  id_column = "SampleID",
  pairwise_csv = "pairwise_matrix.csv"
)

# With custom scoring directions
directions <- list(
  pH = list(type = "optimum", optimum = 7, tol = 1.5, penalty = "linear"),
  OM = list(type = "higher"),
  BD = list(type = "lower")
)
result <- compute_sqi(
  input_csv = "soil_data.csv",
  id_column = "SampleID",
  directions = directions,
  output_csv = "sqi_results.csv"
)
}

}
\seealso{
\code{\link{compute_sqi_df}}, \code{\link{compute_sqi_properties}}
}
