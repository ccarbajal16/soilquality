% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sqi_compute.R
\name{compute_sqi_properties}
\alias{compute_sqi_properties}
\title{Compute Soil Quality Index with property selection}
\usage{
compute_sqi_properties(
  data,
  properties = NULL,
  id_column = NULL,
  pairwise_matrix = NULL,
  scoring_rules = NULL,
  var_threshold = 0.05,
  loading_threshold = 0.5,
  ...
)
}
\arguments{
\item{data}{Data frame containing soil property data with samples in rows
and properties in columns.}

\item{properties}{Optional character vector of property names to include
in the analysis. If NULL, all numeric columns are used automatically.}

\item{id_column}{Optional character string specifying the name of the ID
column to preserve in the output. If NULL, no ID column is preserved.}

\item{pairwise_matrix}{Optional pairwise comparison matrix (as matrix or
data frame). If NULL, equal weights are used for all indicators.}

\item{scoring_rules}{Optional named list of scoring_rule objects created
with constructor functions (higher_better, lower_better, optimum_range,
threshold_scoring). If NULL, all indicators use higher-is-better scoring.}

\item{var_threshold}{Numeric value for PCA variance threshold (default 0.05).}

\item{loading_threshold}{Numeric value for PCA loading threshold (default 0.5).}

\item{...}{Additional arguments (currently unused).}
}
\value{
An object of class "sqi_result" containing:
  \describe{
    \item{mds}{Character vector of selected MDS indicators}
    \item{weights}{Named numeric vector of AHP weights}
    \item{CR}{Consistency Ratio from AHP}
    \item{results}{Data frame with original data, scored indicators, and SQI}
    \item{pca}{PCA object from stats::prcomp}
    \item{loadings}{Matrix of variable loadings}
    \item{var_exp}{Numeric vector of variance explained by each PC}
  }
}
\description{
This enhanced workflow function allows explicit property selection and
integrates with scoring constructor functions. It validates property
selection, subsets the data, and orchestrates the complete SQI calculation
pipeline.
}
\details{
The function performs the following steps:
\enumerate{
  \item Validate that all specified properties exist in data
  \item Subset data to selected properties plus ID column
  \item Convert scoring_rule objects to directions list
  \item Call compute_sqi_df() to perform the analysis
}

If properties is NULL, the function automatically detects and uses all
numeric columns in the data.
}
\examples{
# Create example data
soil_data <- data.frame(
  SampleID = paste0("S", 1:20),
  Sand = rnorm(20, 45, 10),
  Silt = rnorm(20, 30, 5),
  Clay = rnorm(20, 25, 5),
  pH = rnorm(20, 6.5, 0.5),
  OM = rnorm(20, 3, 0.5),
  BD = rnorm(20, 1.4, 0.1)
)

# Select specific properties
result <- compute_sqi_properties(
  data = soil_data,
  properties = c("pH", "OM", "BD"),
  id_column = "SampleID"
)

# With custom scoring rules
rules <- list(
  pH = optimum_range(optimal = 7, tolerance = 1.5),
  OM = higher_better(),
  BD = lower_better()
)
result <- compute_sqi_properties(
  data = soil_data,
  properties = c("pH", "OM", "BD"),
  id_column = "SampleID",
  scoring_rules = rules
)

# Use standard scoring rules for a property set
result <- compute_sqi_properties(
  data = soil_data,
  properties = soil_property_sets$basic,
  id_column = "SampleID",
  scoring_rules = standard_scoring_rules("basic")
)

}
\seealso{
\code{\link{compute_sqi}}, \code{\link{compute_sqi_df}},
  \code{\link{higher_better}}, \code{\link{lower_better}},
  \code{\link{optimum_range}}, \code{\link{threshold_scoring}},
  \code{\link{standard_scoring_rules}}
}
