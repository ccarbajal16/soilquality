<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Understanding and Creating AHP Matrices • soilquality</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Understanding and Creating AHP Matrices">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">soilquality</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction.html">Introduction to soilquality</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-usage.html">Advanced Usage</a></li>
    <li><a class="dropdown-item" href="../articles/ahp-matrices.html">AHP Matrices Guide</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ccarbajal16/soilquality"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Understanding and Creating AHP Matrices</h1>
                        <h4 data-toc-skip class="author">soilquality
package</h4>
            
            <h4 data-toc-skip class="date">2025-12-26</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ccarbajal16/soilquality/blob/master/vignettes/ahp-matrices.Rmd" class="external-link"><code>vignettes/ahp-matrices.Rmd</code></a></small>
      <div class="d-none name"><code>ahp-matrices.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The Analytic Hierarchy Process (AHP) is a structured technique for
organizing and analyzing complex decisions. In the context of soil
quality assessment, AHP helps assign weights to different soil
indicators based on expert judgment about their relative importance.</p>
<p>This vignette explains:</p>
<ul>
<li>The fundamentals of AHP methodology</li>
<li>How to create pairwise comparison matrices</li>
<li>How to interpret the Consistency Ratio</li>
<li>Strategies for improving inconsistent matrices</li>
<li>Practical examples for soil quality assessment</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ccarbajal16/soilquality" class="external-link">soilquality</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="why-use-ahp-for-soil-quality">Why Use AHP for Soil Quality?<a class="anchor" aria-label="anchor" href="#why-use-ahp-for-soil-quality"></a>
</h2>
<p>Different soil properties have different impacts on soil quality
depending on:</p>
<ul>
<li>
<strong>Land use</strong>: Agricultural vs. forest vs. urban
soils</li>
<li>
<strong>Management goals</strong>: Crop production vs. carbon
sequestration vs. erosion control</li>
<li>
<strong>Regional context</strong>: Tropical vs. temperate, arid
vs. humid</li>
<li>
<strong>Soil type</strong>: Sandy vs. clayey, acidic
vs. alkaline</li>
</ul>
<p>AHP provides a systematic way to incorporate expert knowledge about
these context-specific priorities into the SQI calculation.</p>
<div class="section level3">
<h3 id="equal-weights-vs--ahp-weights">Equal Weights vs. AHP Weights<a class="anchor" aria-label="anchor" href="#equal-weights-vs--ahp-weights"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">soil_ucayali</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define indicators</span></span>
<span><span class="va">indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pH"</span>, <span class="st">"OM"</span>, <span class="st">"N"</span>, <span class="st">"P"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate SQI with equal weights (default)</span></span>
<span><span class="va">result_equal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_sqi_properties.html">compute_sqi_properties</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">soil_ucayali</span>,</span>
<span>  properties <span class="op">=</span> <span class="va">indicators</span>,</span>
<span>  id_column <span class="op">=</span> <span class="st">"SampleID"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Equal weights (assigned to MDS indicators selected by PCA):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Equal weights (assigned to MDS indicators selected by PCA):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_equal</span><span class="op">$</span><span class="va">weights</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;     N    pH    OM </span></span>
<span><span class="co">#&gt; 0.333 0.333 0.333</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nMDS indicators selected:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">result_equal</span><span class="op">$</span><span class="va">mds</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; MDS indicators selected: N, pH, OM</span></span>
<span></span>
<span><span class="co"># To use AHP weights, create a pairwise matrix for the indicators</span></span>
<span><span class="co"># Note: The pairwise matrix should match the MDS indicators selected by PCA</span></span>
<span><span class="co"># For demonstration, let's calculate AHP weights manually</span></span>
<span><span class="va">pairwise</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">1</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,  <span class="co"># pH</span></span>
<span>  <span class="fl">3</span>,   <span class="fl">1</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span>,    <span class="co"># OM</span></span>
<span>  <span class="fl">5</span>,   <span class="fl">2</span>,   <span class="fl">1</span>,   <span class="fl">3</span>,    <span class="co"># N</span></span>
<span>  <span class="fl">3</span>,   <span class="fl">1</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span>     <span class="co"># P</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">4</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">pairwise</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">pairwise</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">indicators</span></span>
<span></span>
<span><span class="va">ahp_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">pairwise</span>, indicators <span class="op">=</span> <span class="va">indicators</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nAHP weights (for all indicators):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; AHP weights (for all indicators):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ahp_result</span><span class="op">$</span><span class="va">weights</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    pH    OM     N     P </span></span>
<span><span class="co">#&gt; 0.080 0.227 0.486 0.207</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nConsistency Ratio:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ahp_result</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Consistency Ratio: 0.0126</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nMean SQI with equal weights:"</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">result_equal</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">SQI</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Mean SQI with equal weights: 0.432</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="the-saaty-scale">The Saaty Scale<a class="anchor" aria-label="anchor" href="#the-saaty-scale"></a>
</h2>
<p>AHP uses the Saaty scale to express relative importance in pairwise
comparisons:</p>
<table class="table">
<colgroup>
<col width="24%">
<col width="31%">
<col width="44%">
</colgroup>
<thead><tr class="header">
<th>Value</th>
<th>Meaning</th>
<th>Explanation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Equal importance</td>
<td>Both indicators contribute equally</td>
</tr>
<tr class="even">
<td>3</td>
<td>Moderate importance</td>
<td>Experience slightly favors one indicator</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Strong importance</td>
<td>Experience strongly favors one indicator</td>
</tr>
<tr class="even">
<td>7</td>
<td>Very strong importance</td>
<td>One indicator is strongly favored</td>
</tr>
<tr class="odd">
<td>9</td>
<td>Extreme importance</td>
<td>Evidence favoring one indicator is overwhelming</td>
</tr>
<tr class="even">
<td>2, 4, 6, 8</td>
<td>Intermediate values</td>
<td>When compromise is needed</td>
</tr>
</tbody>
</table>
<p><strong>Reciprocals</strong> (1/3, 1/5, etc.) are used when the
second indicator is more important than the first.</p>
<div class="section level3">
<h3 id="example-comparing-ph-and-organic-matter">Example: Comparing pH and Organic Matter<a class="anchor" aria-label="anchor" href="#example-comparing-ph-and-organic-matter"></a>
</h3>
<p><strong>Question</strong>: “How much more important is organic matter
compared to pH for overall soil quality in tropical agricultural
soils?”</p>
<p><strong>Possible answers</strong>:</p>
<ul>
<li>
<strong>1</strong>: They are equally important</li>
<li>
<strong>3</strong>: OM is moderately more important (typical
answer)</li>
<li>
<strong>5</strong>: OM is strongly more important</li>
<li>
<strong>1/3</strong>: pH is moderately more important than OM</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="creating-pairwise-comparison-matrices">Creating Pairwise Comparison Matrices<a class="anchor" aria-label="anchor" href="#creating-pairwise-comparison-matrices"></a>
</h2>
<div class="section level3">
<h3 id="method-1-interactive-creation">Method 1: Interactive Creation<a class="anchor" aria-label="anchor" href="#method-1-interactive-creation"></a>
</h3>
<p>The easiest way to create an AHP matrix is interactively:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define your indicators</span></span>
<span><span class="va">indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pH"</span>, <span class="st">"OM"</span>, <span class="st">"N"</span>, <span class="st">"P"</span>, <span class="st">"K"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create matrix interactively</span></span>
<span><span class="co"># You'll be prompted to compare each pair</span></span>
<span><span class="va">ahp_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_ahp_matrix.html">create_ahp_matrix</a></span><span class="op">(</span><span class="va">indicators</span>, mode <span class="op">=</span> <span class="st">"interactive"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ahp_matrix</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The matrix is stored in ahp_matrix$matrix</span></span>
<span><span class="co"># Use it in SQI calculation</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_sqi_properties.html">compute_sqi_properties</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">soil_ucayali</span>,</span>
<span>  properties <span class="op">=</span> <span class="va">indicators</span>,</span>
<span>  pairwise_matrix <span class="op">=</span> <span class="va">ahp_matrix</span><span class="op">$</span><span class="va">matrix</span>,</span>
<span>  id_column <span class="op">=</span> <span class="st">"SampleID"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="method-2-manual-matrix-construction">Method 2: Manual Matrix Construction<a class="anchor" aria-label="anchor" href="#method-2-manual-matrix-construction"></a>
</h3>
<p>For reproducible analysis or when working with pre-determined expert
judgments:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define indicators</span></span>
<span><span class="va">indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pH"</span>, <span class="st">"OM"</span>, <span class="st">"N"</span>, <span class="st">"P"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the pairwise comparison matrix</span></span>
<span><span class="co"># Each cell [i,j] represents: "How much more important is indicator i than j?"</span></span>
<span><span class="va">pairwise</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="co"># pH   OM    N     P</span></span>
<span>    <span class="fl">1</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,  <span class="fl">1</span><span class="op">/</span><span class="fl">5</span>,  <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,   <span class="co"># pH row</span></span>
<span>    <span class="fl">3</span>,   <span class="fl">1</span>,    <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,  <span class="fl">1</span>,     <span class="co"># OM row</span></span>
<span>    <span class="fl">5</span>,   <span class="fl">2</span>,    <span class="fl">1</span>,    <span class="fl">3</span>,     <span class="co"># N row</span></span>
<span>    <span class="fl">3</span>,   <span class="fl">1</span>,    <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,  <span class="fl">1</span>      <span class="co"># P row</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">4</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">pairwise</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">pairwise</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">indicators</span></span>
<span></span>
<span><span class="co"># View the matrix</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pairwise</span><span class="op">)</span></span>
<span><span class="co">#&gt;    pH        OM         N         P</span></span>
<span><span class="co">#&gt; pH  1 0.3333333 0.2000000 0.3333333</span></span>
<span><span class="co">#&gt; OM  3 1.0000000 0.5000000 1.0000000</span></span>
<span><span class="co">#&gt; N   5 2.0000000 1.0000000 3.0000000</span></span>
<span><span class="co">#&gt; P   3 1.0000000 0.3333333 1.0000000</span></span>
<span></span>
<span><span class="co"># Calculate weights</span></span>
<span><span class="va">ahp_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">pairwise</span>, indicators <span class="op">=</span> <span class="va">indicators</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nIndicator weights:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Indicator weights:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ahp_result</span><span class="op">$</span><span class="va">weights</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    pH    OM     N     P </span></span>
<span><span class="co">#&gt; 0.080 0.227 0.486 0.207</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nConsistency Ratio:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ahp_result</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Consistency Ratio: 0.0126</span></span></code></pre></div>
<p><strong>Interpretation</strong>: In this example:</p>
<ul>
<li>N is 5x more important than pH</li>
<li>OM is 3x more important than pH</li>
<li>N is 2x more important than OM</li>
<li>N is 3x more important than P</li>
</ul>
</div>
<div class="section level3">
<h3 id="method-3-using-importance-ratios">Method 3: Using Importance Ratios<a class="anchor" aria-label="anchor" href="#method-3-using-importance-ratios"></a>
</h3>
<p>A simpler approach when you know relative importance:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify relative importance scores</span></span>
<span><span class="co"># Example: pH=1, OM=2, N=3, P=2, K=1.5</span></span>
<span><span class="va">indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pH"</span>, <span class="st">"OM"</span>, <span class="st">"N"</span>, <span class="st">"P"</span>, <span class="st">"K"</span><span class="op">)</span></span>
<span><span class="va">importance</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1.5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to pairwise matrix</span></span>
<span><span class="va">pairwise_from_ratios</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ratio_to_saaty.html">ratio_to_saaty</a></span><span class="op">(</span><span class="va">importance</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">pairwise_from_ratios</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">pairwise_from_ratios</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">indicators</span></span>
<span></span>
<span><span class="co"># Calculate weights</span></span>
<span><span class="va">ahp_from_ratios</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">indicators</span>, pairwise <span class="op">=</span> <span class="va">pairwise_from_ratios</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Weights from importance ratios:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Weights from importance ratios:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ahp_from_ratios</span><span class="op">$</span><span class="va">weights</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    pH    OM     N     P     K </span></span>
<span><span class="co">#&gt; 0.105 0.211 0.316 0.211 0.158</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nConsistency Ratio:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ahp_from_ratios</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Consistency Ratio: 0</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="understanding-the-consistency-ratio">Understanding the Consistency Ratio<a class="anchor" aria-label="anchor" href="#understanding-the-consistency-ratio"></a>
</h2>
<p>The Consistency Ratio (CR) measures the logical consistency of your
pairwise comparisons.</p>
<div class="section level3">
<h3 id="what-is-consistency">What is Consistency?<a class="anchor" aria-label="anchor" href="#what-is-consistency"></a>
</h3>
<p><strong>Consistent judgments</strong> follow transitive logic:</p>
<ul>
<li>If A is 3x more important than B</li>
<li>And B is 2x more important than C</li>
<li>Then A should be 6x more important than C (3 × 2 = 6)</li>
</ul>
<p><strong>Inconsistent judgments</strong> violate this logic:</p>
<ul>
<li>If A is 3x more important than B</li>
<li>And B is 2x more important than C</li>
<li>But you say A is only 2x more important than C (inconsistent!)</li>
</ul>
</div>
<div class="section level3">
<h3 id="interpreting-cr-values">Interpreting CR Values<a class="anchor" aria-label="anchor" href="#interpreting-cr-values"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>CR Value</th>
<th>Interpretation</th>
<th>Action</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>&lt; 0.10</td>
<td>Acceptable consistency</td>
<td>Use the weights</td>
</tr>
<tr class="even">
<td>0.10 - 0.20</td>
<td>Marginal consistency</td>
<td>Review and consider revising</td>
</tr>
<tr class="odd">
<td>&gt; 0.20</td>
<td>Unacceptable consistency</td>
<td>Revise judgments</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example 1: Consistent matrix (CR &lt; 0.1)</span></span>
<span><span class="va">consistent_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">1</span>,   <span class="fl">3</span>,   <span class="fl">5</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span>,   <span class="fl">2</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">3</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">indicators_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">consistent_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">consistent_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">indicators_3</span></span>
<span></span>
<span><span class="va">result_consistent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">consistent_matrix</span>, indicators <span class="op">=</span> <span class="va">indicators_3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Consistent matrix - CR:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_consistent</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Consistent matrix - CR: 0.0032</span></span>
<span></span>
<span><span class="co"># Example 2: Inconsistent matrix (CR &gt; 0.1)</span></span>
<span><span class="va">inconsistent_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">1</span>,   <span class="fl">3</span>,   <span class="fl">2</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span>,   <span class="fl">5</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">5</span>, <span class="fl">1</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">3</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">inconsistent_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">inconsistent_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">indicators_3</span></span>
<span></span>
<span><span class="va">result_inconsistent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">inconsistent_matrix</span>, indicators <span class="op">=</span> <span class="va">indicators_3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in ahp_weights(inconsistent_matrix, indicators = indicators_3):</span></span>
<span><span class="co">#&gt; Consistency Ratio (0.4037) exceeds 0.1. Consider revising judgments.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Inconsistent matrix - CR:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_inconsistent</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Inconsistent matrix - CR: 0.4037</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="improving-inconsistent-matrices">Improving Inconsistent Matrices<a class="anchor" aria-label="anchor" href="#improving-inconsistent-matrices"></a>
</h2>
<p>If your CR exceeds 0.10, here are strategies to improve
consistency:</p>
<div class="section level3">
<h3 id="strategy-1-identify-problematic-comparisons">Strategy 1: Identify Problematic Comparisons<a class="anchor" aria-label="anchor" href="#strategy-1-identify-problematic-comparisons"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create an inconsistent matrix</span></span>
<span><span class="va">indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pH"</span>, <span class="st">"OM"</span>, <span class="st">"N"</span>, <span class="st">"P"</span><span class="op">)</span></span>
<span><span class="va">problematic</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">1</span>,   <span class="fl">2</span>,   <span class="fl">4</span>,   <span class="fl">3</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span>,   <span class="fl">5</span>,   <span class="fl">2</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">5</span>, <span class="fl">1</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">3</span>,   <span class="fl">1</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">4</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">problematic</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">problematic</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">indicators</span></span>
<span></span>
<span><span class="co"># Calculate weights and CR</span></span>
<span><span class="va">result_prob</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">problematic</span>, indicators <span class="op">=</span> <span class="va">indicators</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Initial CR:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_prob</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Initial CR: 0.0379</span></span>
<span></span>
<span><span class="co"># Check for major inconsistencies</span></span>
<span><span class="co"># Compare direct vs. indirect comparisons</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Checking consistency:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Checking consistency:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Direct: pH vs N ="</span>, <span class="va">problematic</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">]</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Direct: pH vs N = 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Indirect: pH vs OM × OM vs N ="</span>, </span>
<span>    <span class="va">problematic</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">*</span> <span class="va">problematic</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">]</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Indirect: pH vs OM × OM vs N = 10</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Ratio:"</span>, <span class="va">problematic</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">/</span> <span class="op">(</span><span class="va">problematic</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">*</span> <span class="va">problematic</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">]</span><span class="op">)</span>, <span class="st">"\n\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Ratio: 0.4</span></span>
<span></span>
<span><span class="co"># This shows a major inconsistency!</span></span>
<span><span class="co"># pH vs N is 4, but pH vs OM (2) × OM vs N (5) = 10</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="strategy-2-revise-extreme-comparisons">Strategy 2: Revise Extreme Comparisons<a class="anchor" aria-label="anchor" href="#strategy-2-revise-extreme-comparisons"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Revise the problematic comparison</span></span>
<span><span class="va">improved</span> <span class="op">&lt;-</span> <span class="va">problematic</span></span>
<span><span class="va">improved</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">2</span>  <span class="co"># Change OM vs N from 5 to 2</span></span>
<span><span class="va">improved</span><span class="op">[</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>  <span class="co"># Update reciprocal</span></span>
<span></span>
<span><span class="va">result_improved</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">improved</span>, indicators <span class="op">=</span> <span class="va">indicators</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Improved CR:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_improved</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Improved CR: 0.046</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="strategy-3-use-fewer-extreme-values">Strategy 3: Use Fewer Extreme Values<a class="anchor" aria-label="anchor" href="#strategy-3-use-fewer-extreme-values"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Original: uses values 1-5</span></span>
<span><span class="va">moderate_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">1</span>,   <span class="fl">2</span>,   <span class="fl">3</span>,   <span class="fl">2</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span>,   <span class="fl">2</span>,   <span class="fl">1</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span>,   <span class="fl">2</span>,   <span class="fl">1</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">4</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">moderate_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">moderate_matrix</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">indicators</span></span>
<span></span>
<span><span class="va">result_moderate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">moderate_matrix</span>, indicators <span class="op">=</span> <span class="va">indicators</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Moderate values CR:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">result_moderate</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Moderate values CR: 0.0038</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="strategy-4-simplify-the-hierarchy">Strategy 4: Simplify the Hierarchy<a class="anchor" aria-label="anchor" href="#strategy-4-simplify-the-hierarchy"></a>
</h3>
<p>If you have many indicators (&gt;7), consider grouping them:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Instead of comparing 10 indicators directly:</span></span>
<span><span class="co"># indicators &lt;- c("pH", "OM", "N", "P", "K", "Ca", "Mg", "CEC", "BD", "EC")</span></span>
<span></span>
<span><span class="co"># Group into categories and use two-level AHP:</span></span>
<span><span class="co"># Level 1: Compare categories</span></span>
<span><span class="va">categories</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Chemical"</span>, <span class="st">"Fertility"</span>, <span class="st">"Physical"</span><span class="op">)</span></span>
<span><span class="va">category_pairwise</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">1</span>,   <span class="fl">2</span>,   <span class="fl">3</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span>,   <span class="fl">2</span>,</span>
<span>  <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">3</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Level 2: Compare indicators within each category</span></span>
<span><span class="va">chemical_indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pH"</span>, <span class="st">"EC"</span><span class="op">)</span></span>
<span><span class="va">fertility_indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OM"</span>, <span class="st">"N"</span>, <span class="st">"P"</span>, <span class="st">"K"</span><span class="op">)</span></span>
<span><span class="va">physical_indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BD"</span>, <span class="st">"Sand"</span>, <span class="st">"Clay"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Then combine weights: category_weight × indicator_weight_within_category</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="practical-examples">Practical Examples<a class="anchor" aria-label="anchor" href="#practical-examples"></a>
</h2>
<div class="section level3">
<h3 id="example-1-tropical-agricultural-soils">Example 1: Tropical Agricultural Soils<a class="anchor" aria-label="anchor" href="#example-1-tropical-agricultural-soils"></a>
</h3>
<p>Focus on nutrient availability and organic matter:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Indicators for tropical agriculture</span></span>
<span><span class="va">tropical_indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pH"</span>, <span class="st">"OM"</span>, <span class="st">"N"</span>, <span class="st">"P"</span>, <span class="st">"CEC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Expert judgment: OM and N are most critical</span></span>
<span><span class="co"># pH and CEC are moderately important</span></span>
<span><span class="co"># P is less critical (often fixed by fertilizer)</span></span>
<span><span class="va">tropical_pairwise</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="co"># pH   OM    N     P     CEC</span></span>
<span>    <span class="fl">1</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,  <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,  <span class="fl">2</span>,    <span class="fl">1</span>,     <span class="co"># pH</span></span>
<span>    <span class="fl">3</span>,   <span class="fl">1</span>,    <span class="fl">1</span>,    <span class="fl">5</span>,    <span class="fl">2</span>,     <span class="co"># OM</span></span>
<span>    <span class="fl">3</span>,   <span class="fl">1</span>,    <span class="fl">1</span>,    <span class="fl">5</span>,    <span class="fl">2</span>,     <span class="co"># N</span></span>
<span>    <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">5</span>,  <span class="fl">1</span><span class="op">/</span><span class="fl">5</span>,  <span class="fl">1</span>,    <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,   <span class="co"># P</span></span>
<span>    <span class="fl">1</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,  <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,  <span class="fl">3</span>,    <span class="fl">1</span>      <span class="co"># CEC</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">5</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">tropical_pairwise</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">tropical_pairwise</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">tropical_indicators</span></span>
<span></span>
<span><span class="va">tropical_ahp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">tropical_pairwise</span>, indicators <span class="op">=</span> <span class="va">tropical_indicators</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Tropical agriculture weights:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Tropical agriculture weights:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">tropical_ahp</span><span class="op">$</span><span class="va">weights</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    pH    OM     N     P   CEC </span></span>
<span><span class="co">#&gt; 0.124 0.328 0.328 0.061 0.158</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCR:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">tropical_ahp</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; CR: 0.0056</span></span>
<span></span>
<span><span class="co"># Calculate SQI (note: pairwise matrix would need to match MDS indicators)</span></span>
<span><span class="va">result_tropical</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_sqi_properties.html">compute_sqi_properties</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">soil_ucayali</span>,</span>
<span>  properties <span class="op">=</span> <span class="va">tropical_indicators</span>,</span>
<span>  id_column <span class="op">=</span> <span class="st">"SampleID"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nMDS indicators selected:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">result_tropical</span><span class="op">$</span><span class="va">mds</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; MDS indicators selected: N, pH, OM</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Mean SQI:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">result_tropical</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">SQI</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Mean SQI: 0.432</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-2-erosion-risk-assessment">Example 2: Erosion Risk Assessment<a class="anchor" aria-label="anchor" href="#example-2-erosion-risk-assessment"></a>
</h3>
<p>Focus on physical properties:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Indicators for erosion risk</span></span>
<span><span class="va">erosion_indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sand"</span>, <span class="st">"Clay"</span>, <span class="st">"OM"</span>, <span class="st">"BD"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Expert judgment: OM and BD are most critical for erosion</span></span>
<span><span class="co"># Texture (Sand, Clay) is moderately important</span></span>
<span><span class="va">erosion_pairwise</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="co"># Sand  Clay  OM    BD</span></span>
<span>    <span class="fl">1</span>,    <span class="fl">2</span>,    <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,  <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,   <span class="co"># Sand</span></span>
<span>    <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,  <span class="fl">1</span>,    <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,  <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,   <span class="co"># Clay</span></span>
<span>    <span class="fl">3</span>,    <span class="fl">3</span>,    <span class="fl">1</span>,    <span class="fl">1</span>,     <span class="co"># OM</span></span>
<span>    <span class="fl">2</span>,    <span class="fl">2</span>,    <span class="fl">1</span>,    <span class="fl">1</span>      <span class="co"># BD</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">4</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">erosion_pairwise</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">erosion_pairwise</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">erosion_indicators</span></span>
<span></span>
<span><span class="va">erosion_ahp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">erosion_pairwise</span>, indicators <span class="op">=</span> <span class="va">erosion_indicators</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Erosion risk weights:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Erosion risk weights:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">erosion_ahp</span><span class="op">$</span><span class="va">weights</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  Sand  Clay    OM    BD </span></span>
<span><span class="co">#&gt; 0.172 0.122 0.389 0.317</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCR:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">erosion_ahp</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; CR: 0.0301</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-3-carbon-sequestration-potential">Example 3: Carbon Sequestration Potential<a class="anchor" aria-label="anchor" href="#example-3-carbon-sequestration-potential"></a>
</h3>
<p>Focus on organic matter and related properties:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Indicators for carbon sequestration</span></span>
<span><span class="va">carbon_indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OM"</span>, <span class="st">"SOC"</span>, <span class="st">"N"</span>, <span class="st">"Clay"</span>, <span class="st">"CEC"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Expert judgment: OM and SOC are most critical</span></span>
<span><span class="co"># Clay and CEC support carbon stabilization</span></span>
<span><span class="co"># N indicates decomposition rate</span></span>
<span><span class="va">carbon_pairwise</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="co"># OM   SOC   N     Clay  CEC</span></span>
<span>    <span class="fl">1</span>,   <span class="fl">1</span>,    <span class="fl">3</span>,    <span class="fl">2</span>,    <span class="fl">2</span>,     <span class="co"># OM</span></span>
<span>    <span class="fl">1</span>,   <span class="fl">1</span>,    <span class="fl">3</span>,    <span class="fl">2</span>,    <span class="fl">2</span>,     <span class="co"># SOC</span></span>
<span>    <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>,  <span class="fl">1</span>,    <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,  <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,   <span class="co"># N</span></span>
<span>    <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,  <span class="fl">2</span>,    <span class="fl">1</span>,    <span class="fl">1</span>,     <span class="co"># Clay</span></span>
<span>    <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,  <span class="fl">2</span>,    <span class="fl">1</span>,    <span class="fl">1</span>      <span class="co"># CEC</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">5</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">carbon_pairwise</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">carbon_pairwise</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">carbon_indicators</span></span>
<span></span>
<span><span class="va">carbon_ahp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">carbon_pairwise</span>, indicators <span class="op">=</span> <span class="va">carbon_indicators</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Carbon sequestration weights:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Carbon sequestration weights:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">carbon_ahp</span><span class="op">$</span><span class="va">weights</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    OM   SOC     N  Clay   CEC </span></span>
<span><span class="co">#&gt; 0.298 0.298 0.089 0.158 0.158</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCR:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">carbon_ahp</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; CR: 0.003</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="best-practices-for-ahp-in-soil-quality">Best Practices for AHP in Soil Quality<a class="anchor" aria-label="anchor" href="#best-practices-for-ahp-in-soil-quality"></a>
</h2>
<div class="section level3">
<h3 id="involve-multiple-experts">1. Involve Multiple Experts<a class="anchor" aria-label="anchor" href="#involve-multiple-experts"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Collect judgments from multiple experts</span></span>
<span><span class="va">expert1_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_ahp_matrix.html">create_ahp_matrix</a></span><span class="op">(</span><span class="va">indicators</span>, mode <span class="op">=</span> <span class="st">"interactive"</span><span class="op">)</span></span>
<span><span class="va">expert2_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_ahp_matrix.html">create_ahp_matrix</a></span><span class="op">(</span><span class="va">indicators</span>, mode <span class="op">=</span> <span class="st">"interactive"</span><span class="op">)</span></span>
<span><span class="va">expert3_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_ahp_matrix.html">create_ahp_matrix</a></span><span class="op">(</span><span class="va">indicators</span>, mode <span class="op">=</span> <span class="st">"interactive"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Aggregate using geometric mean</span></span>
<span><span class="va">n_experts</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span><span class="va">aggregated_matrix</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">expert1_matrix</span><span class="op">$</span><span class="va">matrix</span> <span class="op">*</span> </span>
<span>                      <span class="va">expert2_matrix</span><span class="op">$</span><span class="va">matrix</span> <span class="op">*</span> </span>
<span>                      <span class="va">expert3_matrix</span><span class="op">$</span><span class="va">matrix</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">n_experts</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate final weights</span></span>
<span><span class="va">final_ahp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">aggregated_matrix</span>, indicators <span class="op">=</span> <span class="va">indicators</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="document-your-rationale">2. Document Your Rationale<a class="anchor" aria-label="anchor" href="#document-your-rationale"></a>
</h3>
<p>Always document why you assigned specific importance values:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example documentation</span></span>
<span><span class="va">rationale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"OM vs pH"</span> <span class="op">=</span> <span class="st">"OM rated 3x more important because it affects multiple </span></span>
<span><span class="st">                soil functions (nutrient supply, water retention, structure)"</span>,</span>
<span>  <span class="st">"N vs P"</span> <span class="op">=</span> <span class="st">"N rated 2x more important because it's more limiting in </span></span>
<span><span class="st">              tropical soils and harder to supplement"</span>,</span>
<span>  <span class="st">"pH vs P"</span> <span class="op">=</span> <span class="st">"Equal importance (1) because both are easily managed </span></span>
<span><span class="st">               through amendments"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Include this in your analysis report</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="perform-sensitivity-analysis">3. Perform Sensitivity Analysis<a class="anchor" aria-label="anchor" href="#perform-sensitivity-analysis"></a>
</h3>
<p>Test how results change with different weights:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare different AHP weight scenarios</span></span>
<span><span class="va">indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pH"</span>, <span class="st">"OM"</span>, <span class="st">"N"</span>, <span class="st">"P"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Scenario 1: Equal importance</span></span>
<span><span class="va">equal_weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">equal_weights</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">indicators</span></span>
<span></span>
<span><span class="co"># Scenario 2: OM-focused</span></span>
<span><span class="va">om_focused</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">1</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>  <span class="fl">5</span>,   <span class="fl">1</span>,   <span class="fl">2</span>,   <span class="fl">3</span>,</span>
<span>  <span class="fl">3</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span>,   <span class="fl">2</span>,</span>
<span>  <span class="fl">2</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">4</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">om_focused</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">om_focused</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">indicators</span></span>
<span></span>
<span><span class="va">ahp_om</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">om_focused</span>, indicators <span class="op">=</span> <span class="va">indicators</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Scenario 3: N-focused</span></span>
<span><span class="va">n_focused</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">1</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>  <span class="fl">3</span>,   <span class="fl">1</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">2</span>,</span>
<span>  <span class="fl">5</span>,   <span class="fl">2</span>,   <span class="fl">1</span>,   <span class="fl">3</span>,</span>
<span>  <span class="fl">2</span>,   <span class="fl">1</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, <span class="fl">1</span></span>
<span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">4</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">n_focused</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">n_focused</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">indicators</span></span>
<span></span>
<span><span class="va">ahp_n</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ahp_weights.html">ahp_weights</a></span><span class="op">(</span><span class="va">n_focused</span>, indicators <span class="op">=</span> <span class="va">indicators</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare weights</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Equal weights:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Equal weights:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">equal_weights</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   pH   OM    N    P </span></span>
<span><span class="co">#&gt; 0.25 0.25 0.25 0.25</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nOM-focused weights (CR ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ahp_om</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; OM-focused weights (CR = 0.0054 ):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ahp_om</span><span class="op">$</span><span class="va">weights</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    pH    OM     N     P </span></span>
<span><span class="co">#&gt; 0.088 0.483 0.272 0.157</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nN-focused weights (CR ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ahp_n</span><span class="op">$</span><span class="va">CR</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">"):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; N-focused weights (CR = 0.0054 ):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ahp_n</span><span class="op">$</span><span class="va">weights</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    pH    OM     N     P </span></span>
<span><span class="co">#&gt; 0.088 0.272 0.483 0.157</span></span>
<span></span>
<span><span class="co"># Calculate SQI with equal weights to show the approach</span></span>
<span><span class="va">result_sqi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_sqi_properties.html">compute_sqi_properties</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">soil_ucayali</span>,</span>
<span>  properties <span class="op">=</span> <span class="va">indicators</span>,</span>
<span>  id_column <span class="op">=</span> <span class="st">"SampleID"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nMean SQI with equal weights:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">result_sqi</span><span class="op">$</span><span class="va">results</span><span class="op">$</span><span class="va">SQI</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Mean SQI with equal weights: 0.432</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Note: Different weight scenarios would produce different SQI values\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Note: Different weight scenarios would produce different SQI values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"when applied to the MDS indicators selected by PCA.\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; when applied to the MDS indicators selected by PCA.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="validate-with-field-data">4. Validate with Field Data<a class="anchor" aria-label="anchor" href="#validate-with-field-data"></a>
</h3>
<p>When possible, validate AHP weights against field observations:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: Compare SQI with crop yield data</span></span>
<span><span class="co"># Assuming you have yield data</span></span>
<span><span class="va">yield_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  SampleID <span class="op">=</span> <span class="va">soil_ucayali</span><span class="op">$</span><span class="va">SampleID</span>,</span>
<span>  Yield <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">3000</span>, <span class="fl">500</span><span class="op">)</span>  <span class="co"># Example yield data</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Merge with SQI results</span></span>
<span><span class="va">merged</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">result_ahp</span><span class="op">$</span><span class="va">results</span>, <span class="va">yield_data</span>, by <span class="op">=</span> <span class="st">"SampleID"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check correlation</span></span>
<span><span class="va">cor_sqi_yield</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">merged</span><span class="op">$</span><span class="va">SQI</span>, <span class="va">merged</span><span class="op">$</span><span class="va">Yield</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Correlation between SQI and yield:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">cor_sqi_yield</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If correlation is low, reconsider your weights</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>This vignette covered:</p>
<ul>
<li>
<strong>AHP fundamentals</strong>: Using expert judgment to weight
soil indicators</li>
<li>
<strong>Saaty scale</strong>: The 1-9 scale for pairwise
comparisons</li>
<li>
<strong>Creating matrices</strong>: Interactive, manual, and
ratio-based methods</li>
<li>
<strong>Consistency Ratio</strong>: Measuring and improving logical
consistency</li>
<li>
<strong>Practical examples</strong>: Context-specific weighting for
different goals</li>
<li>
<strong>Best practices</strong>: Multiple experts, documentation,
sensitivity analysis</li>
</ul>
<p>Key takeaways:</p>
<ol style="list-style-type: decimal">
<li>Use AHP when indicator importance varies by context</li>
<li>Aim for CR &lt; 0.10 for reliable weights</li>
<li>Document your rationale for transparency</li>
<li>Test sensitivity to different weight scenarios</li>
<li>Validate results with field data when possible</li>
</ol>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li><p>Saaty, T. L. (1980). <em>The Analytic Hierarchy Process:
Planning, Priority Setting, Resource Allocation</em>.
McGraw-Hill.</p></li>
<li><p>Saaty, T. L. (2008). Decision making with the analytic hierarchy
process. <em>International Journal of Services Sciences</em>, 1(1),
83-98.</p></li>
<li><p>Rezaei-Moghaddam, K., &amp; Karami, E. (2008). A multiple
criteria evaluation of sustainable agricultural development models using
AHP. <em>Environment, Development and Sustainability</em>, 10(4),
407-426.</p></li>
<li><p>Masto, R. E., Chhonkar, P. K., Singh, D., &amp; Patra, A. K.
(2008). Alternative soil quality indices for evaluating the effect of
intensive cropping, fertilisation and manuring for 31 years in the
semi-arid soils of India. <em>Environmental Monitoring and
Assessment</em>, 136(1-3), 419-435.</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Carlos Carbajal</p>
</div>

<div class="pkgdown-footer-right">
  <p>Built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a></p>
</div>

    </footer>
</div>





  </body>
</html>
