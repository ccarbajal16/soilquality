[{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":null,"dir":"","previous_headings":"","what":"Comprehensive User Guide for the soilquality R Package","title":"Comprehensive User Guide for the soilquality R Package","text":"Version 1.0.0 Author: Carlos Carbajal Last Updated: December 2025","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"table-of-contents","dir":"","previous_headings":"","what":"Table of Contents","title":"Comprehensive User Guide for the soilquality R Package","text":"Introduction Theoretical Background Installation Dataset Description Data Preparation Principal Component Analysis Minimum Data Set Selection Analytic Hierarchy Process Indicator Weighting Scoring Functions Normalization Complete SQI Calculation Workflows Visualization Results Interpretation Advanced Applications Interactive Shiny Application Best Practices Recommendations References","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_1-introduction","dir":"","previous_headings":"","what":"1. Introduction","title":"Comprehensive User Guide for the soilquality R Package","text":"soilquality package provides comprehensive framework calculating Soil Quality Index (SQI) using scientifically validated methodologies. package implements systematic approach combining multivariate statistical analysis expert knowledge transform complex soil property data single, interpretable quality metric.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_11-key-features","dir":"","previous_headings":"1. Introduction","what":"1.1 Key Features","title":"Comprehensive User Guide for the soilquality R Package","text":"Automated Minimum Data Set (MDS) Selection: Principal Component Analysis (PCA) based dimensionality reduction Expert Knowledge Integration: Analytic Hierarchy Process (AHP) indicator weighting Flexible Scoring Systems: Multiple normalization methods different soil property behaviors Comprehensive Visualization: Publication-ready graphics results communication Interactive Interface: Shiny-based GUI non-programming users Pre-defined Property Sets: Standard configurations common soil analyses","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_12-intended-audience","dir":"","previous_headings":"1. Introduction","what":"1.2 Intended Audience","title":"Comprehensive User Guide for the soilquality R Package","text":"package designed : - Soil scientists conducting quality assessments - Environmental researchers evaluating land management impacts - Agricultural consultants advising soil health - Students learning soil quality assessment methodologies - Policy makers requiring standardized soil quality metrics","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_21-soil-quality-index-concept","dir":"","previous_headings":"2. Theoretical Background","what":"2.1 Soil Quality Index Concept","title":"Comprehensive User Guide for the soilquality R Package","text":"Soil quality defined capacity soil function within ecosystem boundaries sustain biological productivity, maintain environmental quality, promote plant animal health (Karlen et al., 1997). Soil Quality Index (SQI) provides quantitative measure capacity integrating multiple soil indicators single value. SQI calculated : SQI=∑=1nwi×Si SQI = \\sum_{=1}^{n} w_i \\times S_i : - wiw_i = weight indicator - SiS_i = normalized score indicator (range: 0-1) - nn = number indicators Minimum Data Set","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_22-minimum-data-set-mds-selection","dir":"","previous_headings":"2. Theoretical Background","what":"2.2 Minimum Data Set (MDS) Selection","title":"Comprehensive User Guide for the soilquality R Package","text":"MDS represents reduced set soil indicators captures maximum variance full dataset minimizing redundancy. package employs PCA identify principal components explain variance specified threshold, selects indicator highest loading retained component.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_23-analytic-hierarchy-process-ahp","dir":"","previous_headings":"2. Theoretical Background","what":"2.3 Analytic Hierarchy Process (AHP)","title":"Comprehensive User Guide for the soilquality R Package","text":"AHP (Saaty, 1980) structured decision-making technique derives indicator weights pairwise comparisons. method calculates weights using eigenvalue decomposition provides Consistency Ratio (CR) assess logical coherence expert judgments. CR < 0.10 indicates acceptable consistency.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_24-indicator-scoring-functions","dir":"","previous_headings":"2. Theoretical Background","what":"2.4 Indicator Scoring Functions","title":"Comprehensive User Guide for the soilquality R Package","text":"Different soil properties exhibit distinct relationships soil quality: - Higher--better: Properties like organic matter, nutrients (monotonic positive relationship) - Lower--better: Properties like bulk density, salinity (monotonic negative relationship) - Optimum range: Properties like pH optimal value (parabolic relationship) - Threshold-based: Properties custom thresholds defining quality classes","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_31-from-github-development-version","dir":"","previous_headings":"3. Installation","what":"3.1 From GitHub (Development Version)","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Install devtools if not already installed if (!requireNamespace(\"devtools\", quietly = TRUE)) {   install.packages(\"devtools\") }  # Install soilquality from GitHub devtools::install_github(\"ccarbajal16/soilquality\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_32-load-the-package","dir":"","previous_headings":"3. Installation","what":"3.2 Load the Package","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"library(soilquality)"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_33-optional-dependencies","dir":"","previous_headings":"3. Installation","what":"3.3 Optional Dependencies","title":"Comprehensive User Guide for the soilquality R Package","text":"full functionality, install suggested packages:","code":"install.packages(c(\"shiny\", \"DT\", \"knitr\", \"rmarkdown\"))"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_41-the-soil_ucayali-dataset","dir":"","previous_headings":"4. Dataset Description","what":"4.1 The soil_ucayali Dataset","title":"Comprehensive User Guide for the soilquality R Package","text":"package includes representative dataset Ucayali region Peru containing 50 soil samples 15 variables.","code":"# Load the dataset data(soil_ucayali)  # Examine structure str(soil_ucayali) 'data.frame':   50 obs. of  15 variables:  $ SampleID: chr  \"UCY001\" \"UCY002\" \"UCY003\" ...  $ Sand    : num  45.8 48.3 41.2 ...  $ Silt    : num  28.7 30.5 32.1 ...  $ Clay    : num  25.5 21.2 26.7 ...  $ BD      : num  1.32 1.45 1.28 ...  $ pH      : num  5.2 5.8 4.9 ...  $ OM      : num  2.85 2.45 3.15 ...  $ SOC     : num  1.65 1.42 1.83 ...  $ N       : num  0.145 0.125 0.168 ...  $ P       : num  7.5 10.2 6.3 ...  $ K       : num  92 115 78 ...  $ CEC     : num  11.5 13.2 10.8 ...  $ Ca      : num  4.35 5.12 3.87 ...  $ Mg      : num  1.65 2.01 1.45 ...  $ EC      : num  0.22 0.31 0.18 ..."},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_43-summary-statistics","dir":"","previous_headings":"4. Dataset Description","what":"4.3 Summary Statistics","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Descriptive statistics summary(soil_ucayali[, c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\")])"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_51-reading-soil-data-from-csv-files","dir":"","previous_headings":"5. Data Preparation","what":"5.1 Reading Soil Data from CSV Files","title":"Comprehensive User Guide for the soilquality R Package","text":"Function: read_soil_csv(path) Parameters: - path: Character string specifying CSV file path Returns: Data frame soil property data","code":"# Read soil data with automatic encoding detection soil_data <- read_soil_csv(\"path/to/soil_data.csv\")  # View first rows head(soil_data)"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_52-type-conversion","dir":"","previous_headings":"5. Data Preparation","what":"5.2 Type Conversion","title":"Comprehensive User Guide for the soilquality R Package","text":"Safely convert variables numeric type: Function: to_numeric(x) Parameters: - x: Vector type Returns: Numeric vector NA non-convertible values","code":"# Convert a column to numeric soil_data$pH <- to_numeric(soil_data$pH)  # Non-numeric values become NA with warning suppression"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_53-standardization","dir":"","previous_headings":"5. Data Preparation","what":"5.3 Standardization","title":"Comprehensive User Guide for the soilquality R Package","text":"Z-score standardization essential prior PCA: Function: standardize_numeric(df, exclude = NULL) Parameters: - df: Data frame containing soil properties - exclude: Character vector column names exclude standardization Returns: Data frame standardized numeric columns Details: - Applies z-score transformation: (x−x‾)/sx(x - \\bar{x}) / s_x - Preserves NA values - Non-numeric columns remain unchanged - Columns zero variance standardized","code":"# Standardize all numeric columns except ID soil_std <- standardize_numeric(   df = soil_ucayali,   exclude = \"SampleID\" )  # Verify standardization (mean ≈ 0, sd ≈ 1) colMeans(soil_std[, c(\"pH\", \"OM\", \"N\")], na.rm = TRUE) apply(soil_std[, c(\"pH\", \"OM\", \"N\")], 2, sd, na.rm = TRUE)"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_61-theoretical-foundation","dir":"","previous_headings":"6. Principal Component Analysis and Minimum Data Set Selection","what":"6.1 Theoretical Foundation","title":"Comprehensive User Guide for the soilquality R Package","text":"PCA transforms correlated variables uncorrelated principal components (PCs) ordered explained variance. MDS selection algorithm: Performs PCA standardized data Retains PCs explaining variance > var_threshold retained PC, selects variable maximum absolute loading > loading_threshold Returns unique set selected variables","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_62-basic-pca-mds-selection","dir":"","previous_headings":"6. Principal Component Analysis and Minimum Data Set Selection","what":"6.2 Basic PCA-MDS Selection","title":"Comprehensive User Guide for the soilquality R Package","text":"Example Output:","code":"# Example with 8 soil properties properties <- c(\"Sand\", \"Silt\", \"Clay\", \"pH\", \"OM\", \"N\", \"P\", \"K\") data_subset <- soil_ucayali[, properties]  # Standardize first data_std <- standardize_numeric(data_subset)  # Perform PCA and select MDS pca_result <- pca_select_mds(   data = data_std,   var_threshold = 0.05,      # Retain PCs explaining > 5% variance   loading_threshold = 0.5     # Select variables with |loading| > 0.5 )  # View selected indicators print(pca_result$mds) [1] \"pH\"   \"OM\"   \"Clay\" \"P\""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_63-examining-pca-results","dir":"","previous_headings":"6. Principal Component Analysis and Minimum Data Set Selection","what":"6.3 Examining PCA Results","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Variance explained by each PC print(pca_result$var_exp)  # Cumulative variance cumsum(pca_result$var_exp)  # Variable loadings for first 3 PCs print(pca_result$loadings[, 1:3])  # PCA scores (sample coordinates in PC space) pca_scores <- pca_result$pca$x head(pca_scores)"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_64-adjusting-selection-thresholds","dir":"","previous_headings":"6. Principal Component Analysis and Minimum Data Set Selection","what":"6.4 Adjusting Selection Thresholds","title":"Comprehensive User Guide for the soilquality R Package","text":"thresholds significantly impact MDS composition: Recommendation: Start defaults (var_threshold = 0.05, loading_threshold = 0.5) adjust based : - Desired MDS size - Domain knowledge - Cumulative variance explained - Practical measurement constraints","code":"# More conservative (fewer indicators) pca_strict <- pca_select_mds(   data_std,   var_threshold = 0.10,      # Higher variance threshold   loading_threshold = 0.7     # Higher loading threshold ) length(pca_strict$mds)  # More inclusive (more indicators) pca_relaxed <- pca_select_mds(   data_std,   var_threshold = 0.03,      # Lower variance threshold   loading_threshold = 0.4     # Lower loading threshold ) length(pca_relaxed$mds)"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_65-function-reference","dir":"","previous_headings":"6. Principal Component Analysis and Minimum Data Set Selection","what":"6.5 Function Reference","title":"Comprehensive User Guide for the soilquality R Package","text":"Function: pca_select_mds(data, var_threshold = 0.05, loading_threshold = 0.5) Parameters: - data: Standardized data frame numeric columns - var_threshold: Minimum proportion variance PC retention (0-1) - loading_threshold: Minimum absolute loading variable selection (0-1) Returns: List components: - mds: Character vector selected variable names - pca: Complete PCA object stats::prcomp - loadings: Rotation matrix (variable loadings) - var_exp: Numeric vector variance proportions","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_71-understanding-the-saaty-scale","dir":"","previous_headings":"7. Analytic Hierarchy Process for Indicator Weighting","what":"7.1 Understanding the Saaty Scale","title":"Comprehensive User Guide for the soilquality R Package","text":"AHP uses pairwise comparisons 1-9 scale:","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_72-creating-ahp-matrices-programmatically","dir":"","previous_headings":"7. Analytic Hierarchy Process for Indicator Weighting","what":"7.2 Creating AHP Matrices Programmatically","title":"Comprehensive User Guide for the soilquality R Package","text":"Method 1: Importance Ratios Output: Method 2: Manual Matrix Construction","code":"# Define relative importance ratios # Example: OM is 5x more important than P, which is 3x more important than K ratios <- c(OM = 5, P = 3, K = 1)  # Convert to pairwise comparison matrix pairwise <- ratio_to_saaty(ratios) print(pairwise) OM        P        K OM 1.000000 1.666667 5.000000 P  0.600000 1.000000 3.000000 K  0.200000 0.333333 1.000000 # Create 4x4 pairwise comparison matrix for pH, OM, P, CEC pairwise <- matrix(c(   1,   2,   3,   2,    # pH vs others   1/2, 1,   2,   1,    # OM vs others   1/3, 1/2, 1,   1/2,  # P vs others   1/2, 1,   2,   1     # CEC vs others ), nrow = 4, byrow = TRUE)  rownames(pairwise) <- colnames(pairwise) <- c(\"pH\", \"OM\", \"P\", \"CEC\") print(pairwise)"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_73-calculating-ahp-weights","dir":"","previous_headings":"7. Analytic Hierarchy Process for Indicator Weighting","what":"7.3 Calculating AHP Weights","title":"Comprehensive User Guide for the soilquality R Package","text":"Output: Output:","code":"# Calculate weights from pairwise matrix ahp_result <- ahp_weights(   pairwise = pairwise,   indicators = c(\"pH\", \"OM\", \"P\", \"CEC\") )  # View weights print(ahp_result$weights) pH        OM         P       CEC 0.3867925 0.2169811 0.1298113 0.2664151 # Check consistency print(ahp_result$CR) [1] 0.0234  # CR < 0.10 indicates acceptable consistency # Maximum eigenvalue print(ahp_result$lambda_max)"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_74-interactive-ahp-matrix-creation","dir":"","previous_headings":"7. Analytic Hierarchy Process for Indicator Weighting","what":"7.4 Interactive AHP Matrix Creation","title":"Comprehensive User Guide for the soilquality R Package","text":"user-guided pairwise comparisons: Interactive Session Example: function returns ahp_matrix object: Output:","code":"# Launch interactive prompts ahp_matrix <- create_ahp_matrix(   indicators = c(\"pH\", \"OM\", \"P\", \"K\"),   mode = \"interactive\" ) === AHP Pairwise Comparison ===  Saaty Scale:   1 = Equal importance   3 = Moderate importance   5 = Strong importance   7 = Very strong importance   9 = Extreme importance   2, 4, 6, 8 = Intermediate values   Use reciprocals (e.g., 1/3, 0.333) when second indicator is more important  Compare 'pH' vs 'OM' How much more important is 'pH' compared to 'OM'? 2  Compare 'pH' vs 'P' How much more important is 'pH' compared to 'P'? 3 ... print(ahp_matrix) === AHP Pairwise Comparison Matrix ===  Pairwise Comparison Matrix:      pH    OM     P     K pH  1.0  2.00  3.00  2.00 OM  0.5  1.00  2.00  1.00 P   0.3  0.50  1.00  0.50 K   0.5  1.00  2.00  1.00  Indicator Weights:   pH             : 0.3868   OM             : 0.2170   P              : 0.1298   K              : 0.2664  Consistency Information:   Lambda Max: 4.0230   Consistency Ratio (CR): 0.0256 [✓ Acceptable]"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_75-using-pre-built-matrices","dir":"","previous_headings":"7. Analytic Hierarchy Process for Indicator Weighting","what":"7.5 Using Pre-built Matrices","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Create matrix object from existing pairwise matrix ahp_matrix <- create_ahp_matrix(   indicators = c(\"pH\", \"OM\", \"P\"),   mode = \"matrix\",   pairwise = pairwise )  # Extract weights for use in SQI calculation weights <- ahp_matrix$weights"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_76-interpreting-consistency-ratio","dir":"","previous_headings":"7. Analytic Hierarchy Process for Indicator Weighting","what":"7.6 Interpreting Consistency Ratio","title":"Comprehensive User Guide for the soilquality R Package","text":"Common causes high CR: - Circular judgments (> B > C > ) - Magnitude inconsistencies (>> B, B ≈ C, ≈ C) - Random uninformed comparisons","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_81-theoretical-foundations","dir":"","previous_headings":"8. Scoring Functions and Normalization","what":"8.1 Theoretical Foundations","title":"Comprehensive User Guide for the soilquality R Package","text":"Scoring transforms raw soil property values normalized 0-1 scale 1 represents optimal quality. transformation function depends property’s relationship soil quality.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_82-higher-is-better-scoring","dir":"","previous_headings":"8. Scoring Functions and Normalization","what":"8.2 Higher-is-Better Scoring","title":"Comprehensive User Guide for the soilquality R Package","text":"properties higher values indicate better quality (e.g., organic matter, nutrients, CEC): S=x−xminxmax−xmin S = \\frac{x - x_{min}}{x_{max} - x_{min}} Function: score_higher_better(x, min_val = NULL, max_val = NULL)","code":"# Example: Organic matter scoring om_values <- soil_ucayali$OM om_scores <- score_higher_better(om_values)  # With custom min/max (for comparison across datasets) om_scores_custom <- score_higher_better(   x = om_values,   min_val = 1.0,   # Theoretical minimum   max_val = 5.0    # Theoretical maximum )  # Compare distributions par(mfrow = c(1, 2)) hist(om_values, main = \"Original OM\", xlab = \"OM (%)\") hist(om_scores, main = \"Scored OM\", xlab = \"Score\", xlim = c(0, 1))"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_83-lower-is-better-scoring","dir":"","previous_headings":"8. Scoring Functions and Normalization","what":"8.3 Lower-is-Better Scoring","title":"Comprehensive User Guide for the soilquality R Package","text":"properties lower values indicate better quality (e.g., bulk density, salinity): S=xmax−xxmax−xmin S = \\frac{x_{max} - x}{x_{max} - x_{min}} Function: score_lower_better(x, min_val = NULL, max_val = NULL)","code":"# Example: Bulk density scoring bd_values <- soil_ucayali$BD bd_scores <- score_lower_better(bd_values)  # With reference values bd_scores_custom <- score_lower_better(   x = bd_values,   min_val = 1.0,   # Optimal (low) BD   max_val = 1.8    # Poor (high) BD )  # Verify inversion plot(bd_values, bd_scores,      xlab = \"Bulk Density (g/cm³)\",      ylab = \"Score\",      main = \"Lower-is-Better Scoring\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_84-optimum-range-scoring","dir":"","previous_headings":"8. Scoring Functions and Normalization","what":"8.4 Optimum Range Scoring","title":"Comprehensive User Guide for the soilquality R Package","text":"properties optimal value (e.g., pH): Linear penalty: S=1−|x−xopt|tolerance S = 1 - \\frac{|x - x_{opt}|}{tolerance} Quadratic penalty: S=1−(|x−xopt|tolerance)2 S = 1 - \\left(\\frac{|x - x_{opt}|}{tolerance}\\right)^2 Function: score_optimum(x, optimum, tol, penalty = \"linear\")","code":"# Example: pH scoring with linear penalty ph_values <- soil_ucayali$pH ph_scores_linear <- score_optimum(   x = ph_values,   optimum = 6.5,   tol = 1.5,   penalty = \"linear\" )  # Quadratic penalty (more forgiving near optimum) ph_scores_quadratic <- score_optimum(   x = ph_values,   optimum = 6.5,   tol = 1.5,   penalty = \"quadratic\" )  # Visualize penalty functions ph_range <- seq(4, 9, by = 0.1) scores_linear <- score_optimum(ph_range, 6.5, 1.5, \"linear\") scores_quad <- score_optimum(ph_range, 6.5, 1.5, \"quadratic\")  plot(ph_range, scores_linear, type = \"l\", col = \"blue\",      xlab = \"pH\", ylab = \"Score\", main = \"Optimum Range Scoring\",      ylim = c(0, 1)) lines(ph_range, scores_quad, col = \"red\") abline(v = 6.5, lty = 2, col = \"gray\") legend(\"topright\", c(\"Linear\", \"Quadratic\", \"Optimum\"),        col = c(\"blue\", \"red\", \"gray\"), lty = c(1, 1, 2))"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_85-threshold-based-scoring","dir":"","previous_headings":"8. Scoring Functions and Normalization","what":"8.5 Threshold-Based Scoring","title":"Comprehensive User Guide for the soilquality R Package","text":"properties expert-defined thresholds: Interpretation: - P < 5 mg/kg: low (score ≤ 0.3) - P = 5-10 mg/kg: Low (score 0.3-0.6) - P = 10-15 mg/kg: Medium (score 0.6-0.9) - P = 15-25 mg/kg: Adequate (score 0.9-1.0) - P > 25 mg/kg: High (score = 1.0) Function: score_threshold(x, thresholds, scores)","code":"# Example: Phosphorus availability classes p_values <- soil_ucayali$P p_scores <- score_threshold(   x = p_values,   thresholds = c(0, 5, 10, 15, 25),   scores = c(0, 0.3, 0.6, 0.9, 1.0) )  # Visualize piecewise linear interpolation plot(p_values, p_scores,      xlab = \"Available P (mg/kg)\", ylab = \"Score\",      main = \"Threshold-Based Scoring\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_86-batch-scoring-multiple-indicators","dir":"","previous_headings":"8. Scoring Functions and Normalization","what":"8.6 Batch Scoring Multiple Indicators","title":"Comprehensive User Guide for the soilquality R Package","text":"Function: score_indicators(data, mds, directions)","code":"# Define scoring specifications for multiple indicators directions <- list(   pH = list(type = \"optimum\", optimum = 6.5, tol = 1.5, penalty = \"linear\"),   OM = list(type = \"higher\"),   BD = list(type = \"lower\"),   P = list(type = \"threshold\",            thresholds = c(0, 5, 10, 15, 25),            scores = c(0, 0.3, 0.6, 0.9, 1.0)),   K = list(type = \"higher\", min_val = 40, max_val = 180) )  # Select MDS indicators mds <- c(\"pH\", \"OM\", \"BD\", \"P\", \"K\")  # Apply scoring to all indicators scored_data <- score_indicators(   data = soil_ucayali,   mds = mds,   directions = directions )  # View scored columns head(scored_data[, c(\"pH\", \"pH_scored\", \"OM\", \"OM_scored\")])"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_91-workflow-1-file-based-processing","dir":"","previous_headings":"9. Complete SQI Calculation Workflows","what":"9.1 Workflow 1: File-Based Processing","title":"Comprehensive User Guide for the soilquality R Package","text":"CSV-based workflows file input/output: Function: compute_sqi(input_csv, id_column = NULL, pairwise_csv = NULL, output_csv = NULL, directions = NULL, var_threshold = 0.05, loading_threshold = 0.5, ...)","code":"# Calculate SQI from CSV file result <- compute_sqi(   input_csv = \"soil_samples.csv\",   id_column = \"SampleID\",   output_csv = \"sqi_results.csv\",   var_threshold = 0.05,   loading_threshold = 0.5 )  # With AHP weights from CSV result <- compute_sqi(   input_csv = \"soil_samples.csv\",   id_column = \"SampleID\",   pairwise_csv = \"ahp_matrix.csv\",  # Pre-computed pairwise matrix   output_csv = \"sqi_results.csv\" )  # With custom scoring directions directions <- list(   pH = list(type = \"optimum\", optimum = 7, tol = 1, penalty = \"linear\"),   OM = list(type = \"higher\"),   P = list(type = \"higher\") )  result <- compute_sqi(   input_csv = \"soil_samples.csv\",   id_column = \"SampleID\",   directions = directions,   output_csv = \"sqi_results.csv\" )"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_92-workflow-2-in-memory-data-frames","dir":"","previous_headings":"9. Complete SQI Calculation Workflows","what":"9.2 Workflow 2: In-Memory Data Frames","title":"Comprehensive User Guide for the soilquality R Package","text":"interactive analysis data frames: Function: compute_sqi_df(df, id_column = NULL, pairwise_df = NULL, directions = NULL, var_threshold = 0.05, loading_threshold = 0.5, ...)","code":"# Basic calculation with equal weights result <- compute_sqi_df(   df = soil_ucayali,   id_column = \"SampleID\",   var_threshold = 0.05,   loading_threshold = 0.5 )  # With AHP weights pairwise <- matrix(c(   1, 2, 3,   1/2, 1, 2,   1/3, 1/2, 1 ), nrow = 3, byrow = TRUE)  result <- compute_sqi_df(   df = soil_ucayali,   id_column = \"SampleID\",   pairwise_df = pairwise )  # Access results head(result$results)        # Data frame with scores and SQI print(result$mds)           # Selected indicators print(result$weights)       # AHP weights print(result$CR)            # Consistency ratio"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_93-workflow-3-property-based-calculation-recommended","dir":"","previous_headings":"9. Complete SQI Calculation Workflows","what":"9.3 Workflow 3: Property-Based Calculation (Recommended)","title":"Comprehensive User Guide for the soilquality R Package","text":"enhanced workflow provides explicit control property selection: Function: compute_sqi_properties(data, properties = NULL, id_column = NULL, pairwise_matrix = NULL, scoring_rules = NULL, var_threshold = 0.05, loading_threshold = 0.5, ...)","code":"# Using pre-defined property sets result <- compute_sqi_properties(   data = soil_ucayali,   properties = soil_property_sets$fertility,  # Pre-defined set   id_column = \"SampleID\" )  # Using custom property selection result <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\"),   id_column = \"SampleID\" )  # With standard scoring rules (automatic rule assignment) rules <- standard_scoring_rules(c(\"pH\", \"OM\", \"BD\", \"P\", \"K\")) result <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"pH\", \"OM\", \"BD\", \"P\", \"K\"),   id_column = \"SampleID\",   scoring_rules = rules )  # With custom scoring rules using constructor functions rules <- list(   pH = optimum_range(optimal = 6.5, tolerance = 1.5),   OM = higher_better(min_value = 1, max_value = 5),   BD = lower_better(min_value = 1.0, max_value = 1.8),   P = threshold_scoring(     thresholds = c(0, 10, 20, 30),     scores = c(0, 0.5, 1.0, 1.0)   ),   K = higher_better() )  result <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"pH\", \"OM\", \"BD\", \"P\", \"K\"),   id_column = \"SampleID\",   scoring_rules = rules )  # With AHP weights pairwise <- ratio_to_saaty(c(pH = 3, OM = 5, P = 2, K = 1)) result <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"pH\", \"OM\", \"P\", \"K\"),   id_column = \"SampleID\",   scoring_rules = standard_scoring_rules(c(\"pH\", \"OM\", \"P\", \"K\")),   pairwise_matrix = pairwise )"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_94-pre-defined-property-sets","dir":"","previous_headings":"9. Complete SQI Calculation Workflows","what":"9.4 Pre-defined Property Sets","title":"Comprehensive User Guide for the soilquality R Package","text":"package includes six pre-configured property sets: Output:","code":"# View available sets names(soil_property_sets) [1] \"basic\"         \"standard\"      \"comprehensive\" [4] \"physical\"      \"chemical\"      \"fertility\" # Basic set (minimal assessment) soil_property_sets$basic [1] \"pH\" \"OM\" \"P\"  \"K\" # Standard set (recommended for most assessments) soil_property_sets$standard [1] \"Sand\" \"Silt\" \"Clay\" \"pH\"   \"OM\"   \"N\"    \"P\"    \"K\"    \"CEC\" # Comprehensive set (detailed characterization) soil_property_sets$comprehensive [1] \"Sand\" \"Silt\" \"Clay\" \"pH\"   \"OM\"   \"N\"    \"P\"    \"K\"  [9] \"CEC\"  \"BD\"   \"EC\"   \"Ca\"   \"Mg\"   \"Na\"   \"S\" # Physical properties only soil_property_sets$physical [1] \"Sand\" \"Silt\" \"Clay\" \"BD\" # Chemical properties only soil_property_sets$chemical [1] \"pH\"  \"EC\"  \"CEC\" \"Ca\"  \"Mg\"  \"K\"   \"Na\" # Fertility-related properties soil_property_sets$fertility [1] \"OM\"  \"N\"   \"P\"   \"K\"   \"Ca\"  \"Mg\"  \"S\"   \"CEC\""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_95-standard-scoring-rules","dir":"","previous_headings":"9. Complete SQI Calculation Workflows","what":"9.5 Standard Scoring Rules","title":"Comprehensive User Guide for the soilquality R Package","text":"Automatic rule assignment based property name patterns: Output: Pattern Matching Logic:","code":"# Generate rules for a property set rules <- standard_scoring_rules(\"fertility\")  # Or for custom properties rules <- standard_scoring_rules(c(\"pH\", \"BD\", \"OM\", \"EC\"))  # Inspect individual rules print(rules$pH) Scoring Rule: optimum_range   Type: Optimum range   Optimal value: 7   Tolerance: 1   Penalty: linear"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_96-complete-example-fertility-assessment","dir":"","previous_headings":"9. Complete SQI Calculation Workflows","what":"9.6 Complete Example: Fertility Assessment","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Step-by-step fertility assessment # 1. Read soil data with automatic encoding detection soil_data <- read_soil_csv(\"data/soil_data.csv\")  # 2. Select fertility properties props <- soil_property_sets$fertility print(props)  # 3. Generate standard scoring rules rules <- standard_scoring_rules(props)  # 4. Create AHP weights based on nutrient importance # Importance order: OM > N > P > CEC > K > Ca > Mg > S ratios <- c(OM = 8, N = 7, P = 6, CEC = 5, K = 4, Ca = 3, Mg = 2, S = 1) pairwise <- ratio_to_saaty(ratios[props])  # Calculate AHP weights ahp <- ahp_weights(pairwise, props) print(ahp$weights) print(paste(\"Consistency Ratio:\", round(ahp$CR, 4)))  # 5. Compute SQI - let function determine MDS first result <- compute_sqi_properties(   data = soil_data,   properties = props,   id_column = \"SampleID\",   scoring_rules = rules,   var_threshold = 0.05,   loading_threshold = 0.5 )  # After getting MDS, create pairwise matrix for those specific indicators mds_props <- result$mds mds_ratios <- ratios[mds_props] mds_pairwise <- ratio_to_saaty(mds_ratios)  # Recompute with MDS-specific weights result_weighted <- compute_sqi_properties(   data = soil_data,   properties = props,   id_column = \"SampleID\",   scoring_rules = rules,   pairwise_matrix = mds_pairwise,   var_threshold = 0.05,   loading_threshold = 0.5 )  # 6. Examine results print(result_weighted) summary(result_weighted$results$SQI)  # 7. Identify samples by quality class result_weighted$results$Quality_Class <- cut(   result_weighted$results$SQI,   breaks = c(0, 0.25, 0.50, 0.75, 1.0),   labels = c(\"Poor\", \"Fair\", \"Good\", \"Excellent\"),   include.lowest = TRUE )  table(result_weighted$results$Quality_Class)  # 8. Export results write.csv(result_weighted$results, \"fertility_sqi_results.csv\", row.names = FALSE)"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_101-single-panel-plots","dir":"","previous_headings":"10. Visualization and Results Interpretation","what":"10.1 Single-Panel Plots","title":"Comprehensive User Guide for the soilquality R Package","text":"plot() method provides five visualization types:","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_1011-distribution-plot","dir":"","previous_headings":"10. Visualization and Results Interpretation > 10.1 Single-Panel Plots","what":"10.1.1 Distribution Plot","title":"Comprehensive User Guide for the soilquality R Package","text":"Interpretation: - Distribution shape (normal, skewed, bimodal) - Central tendency (mean line) - Range variability - Outliers distinct quality groups","code":"# Histogram of SQI values plot(result, type = \"distribution\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_1012-indicators-plot","dir":"","previous_headings":"10. Visualization and Results Interpretation > 10.1 Single-Panel Plots","what":"10.1.2 Indicators Plot","title":"Comprehensive User Guide for the soilquality R Package","text":"Interpretation: - Relative performance across indicators - Variability within indicator - Identification limiting factors - Outlier detection","code":"# Boxplots of scored indicators plot(result, type = \"indicators\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_1013-weights-plot","dir":"","previous_headings":"10. Visualization and Results Interpretation > 10.1 Single-Panel Plots","what":"10.1.3 Weights Plot","title":"Comprehensive User Guide for the soilquality R Package","text":"Interpretation: - Relative importance indicator - Dominant vs. minor contributors SQI - Consistency ratio assessment","code":"# Bar chart of AHP weights plot(result, type = \"weights\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_1014-scree-plot","dir":"","previous_headings":"10. Visualization and Results Interpretation > 10.1 Single-Panel Plots","what":"10.1.4 Scree Plot","title":"Comprehensive User Guide for the soilquality R Package","text":"Interpretation: - Number meaningful PCs - Cumulative variance explained - Dimensionality reduction effectiveness - Elbow point identification","code":"# Variance explained by principal components plot(result, type = \"scree\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_1015-pca-biplot","dir":"","previous_headings":"10. Visualization and Results Interpretation > 10.1 Single-Panel Plots","what":"10.1.5 PCA Biplot","title":"Comprehensive User Guide for the soilquality R Package","text":"Interpretation: - Sample clustering patterns - Variable relationships (correlations) - Influential variables (long arrows) - Sample-variable associations","code":"# Biplot of observations and variable loadings plot(result, type = \"biplot\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_102-multi-panel-report","dir":"","previous_headings":"10. Visualization and Results Interpretation","what":"10.2 Multi-Panel Report","title":"Comprehensive User Guide for the soilquality R Package","text":"creates publication-ready figure : 1. SQI distribution (top-left) 2. Indicator scores (top-right) 3. AHP weights (bottom-left) 4. Variance scree plot (bottom-right)","code":"# Comprehensive 4-panel visualization plot_sqi_report(result)"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_1031-spatial-distribution","dir":"","previous_headings":"10. Visualization and Results Interpretation > 10.3 Custom Visualizations","what":"10.3.1 Spatial Distribution","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# If samples have coordinates library(ggplot2)  # Add coordinates (example) result$results$Longitude <- rnorm(50, -74.5, 0.5) result$results$Latitude <- rnorm(50, -8.4, 0.5)  # Create spatial map ggplot(result$results, aes(x = Longitude, y = Latitude, color = SQI)) +   geom_point(size = 3) +   scale_color_gradient2(low = \"red\", mid = \"yellow\", high = \"darkgreen\",                         midpoint = 0.5, limits = c(0, 1)) +   labs(title = \"Spatial Distribution of Soil Quality Index\",        x = \"Longitude\", y = \"Latitude\") +   theme_minimal()"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_1032-indicator-contribution-analysis","dir":"","previous_headings":"10. Visualization and Results Interpretation > 10.3 Custom Visualizations","what":"10.3.2 Indicator Contribution Analysis","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Calculate contribution of each indicator to total SQI contributions <- result$results[, paste0(result$mds, \"_scored\")] weighted_contrib <- sweep(contributions, 2, result$weights, \"*\") colnames(weighted_contrib) <- paste0(result$mds, \"_contrib\")  # Add to results result$results <- cbind(result$results, weighted_contrib)  # Average contribution avg_contrib <- colMeans(weighted_contrib) barplot(avg_contrib,         main = \"Average Contribution to SQI\",         ylab = \"Contribution\",         las = 2,         col = \"skyblue\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_1033-quality-classification","dir":"","previous_headings":"10. Visualization and Results Interpretation > 10.3 Custom Visualizations","what":"10.3.3 Quality Classification","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Define quality classes result$results$Class <- cut(   result$results$SQI,   breaks = c(0, 0.25, 0.50, 0.75, 1.0),   labels = c(\"Poor\", \"Fair\", \"Good\", \"Excellent\"),   include.lowest = TRUE )  # Visualize class distribution library(ggplot2) ggplot(result$results, aes(x = Class, fill = Class)) +   geom_bar() +   scale_fill_manual(values = c(\"red\", \"orange\", \"lightgreen\", \"darkgreen\")) +   labs(title = \"Distribution of Soil Quality Classes\",        x = \"Quality Class\", y = \"Number of Samples\") +   theme_minimal()"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_104-statistical-summaries","dir":"","previous_headings":"10. Visualization and Results Interpretation","what":"10.4 Statistical Summaries","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Summary statistics for SQI summary(result$results$SQI)  # By quality class tapply(result$results$SQI, result$results$Class, summary)  # Correlation between SQI and original properties cor_matrix <- cor(result$results[, c(result$mds, \"SQI\")],                    use = \"complete.obs\") print(round(cor_matrix[, \"SQI\"], 3))  # Identify most influential indicator max_cor <- which.max(abs(cor_matrix[result$mds, \"SQI\"])) print(paste(\"Most correlated with SQI:\", result$mds[max_cor]))"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_111-comparing-management-systems","dir":"","previous_headings":"11. Advanced Applications","what":"11.1 Comparing Management Systems","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Add management system identifier result$results$Management <- rep(c(\"Conventional\", \"Organic\"), each = 25)  # Compare SQI by system boxplot(SQI ~ Management, data = result$results,         main = \"SQI by Management System\",         ylab = \"Soil Quality Index\",         col = c(\"lightblue\", \"lightgreen\"))  # Statistical test t.test(SQI ~ Management, data = result$results)  # Compare by indicator library(reshape2) scored_cols <- paste0(result$mds, \"_scored\") scores_long <- melt(result$results[, c(\"Management\", scored_cols)],                     id.vars = \"Management\",                     variable.name = \"Indicator\",                     value.name = \"Score\")  library(ggplot2) ggplot(scores_long, aes(x = Indicator, y = Score, fill = Management)) +   geom_boxplot() +   theme(axis.text.x = element_text(angle = 45, hjust = 1)) +   labs(title = \"Indicator Scores by Management System\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_112-temporal-changes","dir":"","previous_headings":"11. Advanced Applications","what":"11.2 Temporal Changes","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Simulate multi-year data years <- c(2020, 2021, 2022, 2023) temporal_results <- list()  for (year in years) {   # In practice, load data for each year   # Here we simulate slight changes   data_year <- soil_ucayali   data_year[, c(\"OM\", \"N\", \"P\")] <- data_year[, c(\"OM\", \"N\", \"P\")] *                                      (1 + (year - 2020) * 0.05)    result_year <- compute_sqi_properties(     data = data_year,     properties = c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\"),     id_column = \"SampleID\",     scoring_rules = standard_scoring_rules(c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\"))   )    temporal_results[[as.character(year)]] <- result_year$results$SQI }  # Create temporal data frame temporal_df <- data.frame(   Year = rep(years, each = 50),   SampleID = rep(soil_ucayali$SampleID, 4),   SQI = unlist(temporal_results) )  # Temporal trend library(ggplot2) ggplot(temporal_df, aes(x = Year, y = SQI, group = SampleID)) +   geom_line(alpha = 0.2) +   stat_summary(aes(group = 1), fun = mean, geom = \"line\",                color = \"red\", size = 1.5) +   labs(title = \"Temporal Trends in Soil Quality\",        y = \"Soil Quality Index\") +   theme_minimal()"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_113-sensitivity-analysis","dir":"","previous_headings":"11. Advanced Applications","what":"11.3 Sensitivity Analysis","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Test sensitivity to PCA thresholds var_thresholds <- c(0.03, 0.05, 0.07, 0.10) sensitivity_results <- data.frame()  for (vt in var_thresholds) {   result_test <- compute_sqi_properties(     data = soil_ucayali,     properties = c(\"Sand\", \"Silt\", \"Clay\", \"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\"),     id_column = \"SampleID\",     var_threshold = vt,     loading_threshold = 0.5   )    sensitivity_results <- rbind(sensitivity_results, data.frame(     var_threshold = vt,     n_indicators = length(result_test$mds),     mean_SQI = mean(result_test$results$SQI),     sd_SQI = sd(result_test$results$SQI),     indicators = paste(result_test$mds, collapse = \", \")   )) }  print(sensitivity_results)  # Plot sensitivity plot(sensitivity_results$var_threshold, sensitivity_results$mean_SQI,      type = \"b\", pch = 19,      xlab = \"Variance Threshold\",      ylab = \"Mean SQI\",      main = \"Sensitivity to Variance Threshold\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_114-bootstrap-confidence-intervals","dir":"","previous_headings":"11. Advanced Applications","what":"11.4 Bootstrap Confidence Intervals","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Bootstrap SQI calculation n_boot <- 1000 boot_sqi <- matrix(NA, nrow = nrow(soil_ucayali), ncol = n_boot)  for (i in 1:n_boot) {   # Resample observations   boot_indices <- sample(1:nrow(soil_ucayali), replace = TRUE)   boot_data <- soil_ucayali[boot_indices, ]    boot_result <- compute_sqi_properties(     data = boot_data,     properties = c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\"),     id_column = \"SampleID\"   )    boot_sqi[, i] <- boot_result$results$SQI[match(soil_ucayali$SampleID,                                                    boot_result$results$SampleID)] }  # Calculate 95% confidence intervals ci_lower <- apply(boot_sqi, 1, quantile, probs = 0.025, na.rm = TRUE) ci_upper <- apply(boot_sqi, 1, quantile, probs = 0.975, na.rm = TRUE)  # Original SQI original_result <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\"),   id_column = \"SampleID\" )  # Plot with confidence intervals plot(1:50, original_result$results$SQI,      ylim = c(0, 1),      pch = 19,      xlab = \"Sample\", ylab = \"SQI\",      main = \"SQI with 95% Bootstrap Confidence Intervals\") arrows(1:50, ci_lower, 1:50, ci_upper,        angle = 90, code = 3, length = 0.05, col = \"gray\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_115-machine-learning-integration","dir":"","previous_headings":"11. Advanced Applications","what":"11.5 Machine Learning Integration","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Use SQI as target variable for prediction library(randomForest)  # Prepare data ml_data <- soil_ucayali[, c(\"Sand\", \"Silt\", \"Clay\", \"pH\", \"OM\",                               \"N\", \"P\", \"K\", \"CEC\", \"BD\", \"EC\")] ml_data$SQI <- original_result$results$SQI  # Split data set.seed(123) train_idx <- sample(1:nrow(ml_data), 0.7 * nrow(ml_data)) train_data <- ml_data[train_idx, ] test_data <- ml_data[-train_idx, ]  # Train random forest rf_model <- randomForest(SQI ~ ., data = train_data, ntree = 500)  # Predict predictions <- predict(rf_model, test_data)  # Evaluate cor(predictions, test_data$SQI) plot(test_data$SQI, predictions,      xlab = \"Observed SQI\", ylab = \"Predicted SQI\",      main = \"Random Forest Prediction of SQI\") abline(0, 1, col = \"red\")  # Variable importance varImpPlot(rf_model, main = \"Importance of Soil Properties for SQI\")"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_121-launching-the-application","dir":"","previous_headings":"12. Interactive Shiny Application","what":"12.1 Launching the Application","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# Launch with default settings run_sqi_app()  # Launch on specific port run_sqi_app(port = 8080)  # Don't open browser automatically run_sqi_app(launch.browser = FALSE)"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_122-application-features","dir":"","previous_headings":"12. Interactive Shiny Application","what":"12.2 Application Features","title":"Comprehensive User Guide for the soilquality R Package","text":"Shiny app provides graphical interface : CSV file upload Data preview Column selection Auto-detect numeric columns Pre-defined property sets Custom selection Standard rules (automatic) higher-better Custom rules (advanced) Equal weights Upload AHP matrix Interactive pairwise comparisons Summary statistics Interactive data table Downloadable results Distribution plots Indicator scores Weights visualization Scree plots","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_123-typical-workflow-in-shiny-app","dir":"","previous_headings":"12. Interactive Shiny Application","what":"12.3 Typical Workflow in Shiny App","title":"Comprehensive User Guide for the soilquality R Package","text":"Click “Browse” upload CSV file Verify data preview Select ID column dropdown “Auto-detect” numeric columns “Pre-defined” standard sets “Custom” manual selection Configure scoring rules (use defaults) Set PCA thresholds (use defaults) Choose weighting method (equal AHP) Click “Calculate SQI” Review results Results tab Explore visualizations Plots tab Download results CSV","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_131-data-quality","dir":"","previous_headings":"13. Best Practices and Recommendations","what":"13.1 Data Quality","title":"Comprehensive User Guide for the soilquality R Package","text":"Pre-analysis checks: - Remove duplicates - Check outliers (use boxplot(), summary()) - Verify data types (str()) - Handle missing values appropriately - Ensure consistent units across samples","code":"# Example quality control summary(soil_data) boxplot(soil_data[, c(\"pH\", \"OM\", \"N\")])  # Check missing data colSums(is.na(soil_data))  # Remove samples with >30% missing values complete_ratio <- rowSums(!is.na(soil_data)) / ncol(soil_data) soil_clean <- soil_data[complete_ratio > 0.7, ]"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_132-property-selection","dir":"","previous_headings":"13. Best Practices and Recommendations","what":"13.2 Property Selection","title":"Comprehensive User Guide for the soilquality R Package","text":"Guidelines: - Minimum 5-8 properties robust PCA - Include properties multiple categories (physical, chemical, fertility) - Consider measurement cost vs. information gain - Ensure properties relevant study objectives - Avoid highly correlated redundant properties Example balanced selection:","code":"# Balanced property set properties <- c(   \"Clay\",    # Physical   \"BD\",      # Physical   \"pH\",      # Chemical   \"OM\",      # Chemical   \"CEC\",     # Chemical   \"N\",       # Fertility   \"P\",       # Fertility   \"K\"        # Fertility )"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_133-mds-selection-thresholds","dir":"","previous_headings":"13. Best Practices and Recommendations","what":"13.3 MDS Selection Thresholds","title":"Comprehensive User Guide for the soilquality R Package","text":"Recommendations: - var_threshold = 0.05: Standard, retains PCs explaining >5% variance - loading_threshold = 0.5: Standard, selects variables strong loadings Adjust based : - Sample size (smaller n → lower thresholds) - Number variables (variables → higher thresholds) - Explained variance (aim cumulative >70%)","code":"# Check cumulative variance before finalizing cumsum(pca_result$var_exp)"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_134-ahp-weight-assignment","dir":"","previous_headings":"13. Best Practices and Recommendations","what":"13.4 AHP Weight Assignment","title":"Comprehensive User Guide for the soilquality R Package","text":"Best practices: - Base comparisons scientific literature - Consult domain experts - Use consistent logic across comparisons - Document rationale judgments - Always check CR < 0.10 - Revise CR > 0.10 Example documentation:","code":"# Expert weights based on literature review # Rationale: OM most important for tropical soils (Lal, 2006) #            pH critical for nutrient availability (Brady & Weil, 2008) #            P limiting in weathered soils (Sanchez, 1976) ratios <- c(OM = 5, pH = 3, P = 2, K = 1)"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_135-scoring-function-selection","dir":"","previous_headings":"13. Best Practices and Recommendations","what":"13.5 Scoring Function Selection","title":"Comprehensive User Guide for the soilquality R Package","text":"Decision tree: Nutrients (N, P, K, Ca, Mg) Organic matter CEC Water holding capacity Bulk density Salinity (EC) Sodium (Na) Compaction pH (crops: 6.0-7.0) C:N ratio Base saturation Regulatory limits Crop-specific requirements Local standards","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_136-interpretation-guidelines","dir":"","previous_headings":"13. Best Practices and Recommendations","what":"13.6 Interpretation Guidelines","title":"Comprehensive User Guide for the soilquality R Package","text":"SQI Value Ranges (suggested): Context matters: - Reference regional baselines - Land use objectives - Management history - Climatic conditions","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_137-reporting-results","dir":"","previous_headings":"13. Best Practices and Recommendations","what":"13.7 Reporting Results","title":"Comprehensive User Guide for the soilquality R Package","text":"Minimum reporting requirements: Properties included PCA thresholds used MDS indicators selected Scoring functions applied Weighting method (equal AHP) AHP matrix CR (applicable) Summary statistics (mean, SD, range) SQI distribution histogram Indicator scores boxplots Sample classifications Comparison reference values Limiting factors identification Management recommendations Temporal trends (applicable) Example report template:","code":"# Generate report cat(\"=== SOIL QUALITY INDEX REPORT ===\\n\\n\")  cat(\"1. METHODS\\n\") cat(\"Properties analyzed:\", paste(result$mds, collapse = \", \"), \"\\n\") cat(\"PCA variance explained:\", round(sum(result$var_exp[1:length(result$mds)]) * 100, 1), \"%\\n\") cat(\"Weighting method:\", ifelse(result$CR == 0, \"Equal\", \"AHP\"), \"\\n\") if (result$CR > 0) {   cat(\"AHP Consistency Ratio:\", round(result$CR, 4), \"\\n\") } cat(\"\\n\")  cat(\"2. RESULTS\\n\") cat(\"Number of samples:\", nrow(result$results), \"\\n\") cat(\"Mean SQI:\", round(mean(result$results$SQI), 3), \"\\n\") cat(\"SD:\", round(sd(result$results$SQI), 3), \"\\n\") cat(\"Range:\", round(min(result$results$SQI), 3), \"-\",     round(max(result$results$SQI), 3), \"\\n\") cat(\"\\n\")  cat(\"3. QUALITY CLASSIFICATION\\n\") result$results$Class <- cut(result$results$SQI,                              breaks = c(0, 0.25, 0.5, 0.75, 1),                              labels = c(\"Poor\", \"Fair\", \"Good\", \"Excellent\")) print(table(result$results$Class))"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"id_14-references","dir":"","previous_headings":"","what":"14. References","title":"Comprehensive User Guide for the soilquality R Package","text":"Andrews, S. S., Karlen, D. L., & Mitchell, J. P. (2002). comparison soil quality indexing methods vegetable production systems Northern California. Agriculture, Ecosystems & Environment, 90(1), 25-45. Brady, N. C., & Weil, R. R. (2008). Nature Properties Soils (14th ed.). Pearson Prentice Hall. Karlen, D. L., Mausbach, M. J., Doran, J. W., Cline, R. G., Harris, R. F., & Schuman, G. E. (1997). Soil quality: concept, definition, framework evaluation. Soil Science Society America Journal, 61(1), 4-10. Lal, R. (2006). Enhancing crop yields developing countries restoration soil organic carbon pool agricultural lands. Land Degradation & Development, 17(2), 197-209. Saaty, T. L. (1980). Analytic Hierarchy Process. McGraw-Hill. Sanchez, P. . (1976). Properties Management Soils Tropics. Wiley. Shukla, M. K., Lal, R., & Ebinger, M. (2006). Determining soil quality indicators factor analysis. Soil Tillage Research, 87(2), 194-204.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"appendix-a-complete-example-script","dir":"","previous_headings":"","what":"Appendix A: Complete Example Script","title":"Comprehensive User Guide for the soilquality R Package","text":"","code":"# ============================================================================= # COMPLETE SOIL QUALITY INDEX WORKFLOW # Using soilquality package v1.0.0 # =============================================================================  # Load package and data library(soilquality) data(soil_ucayali)  # 1. DATA EXPLORATION # ------------------- head(soil_ucayali) summary(soil_ucayali[, c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\")])  # 2. PROPERTY SELECTION # --------------------- # Use standard fertility set properties <- soil_property_sets$fertility print(properties)  # 3. SCORING RULES # ---------------- # Generate standard rules rules <- standard_scoring_rules(properties)  # Customize pH rule rules$pH <- optimum_range(optimal = 6.5, tolerance = 1.5, penalty = \"linear\")  # View rules lapply(rules, print)  # 4. AHP WEIGHTS # -------------- # Define importance ratios based on nutrient function ratios <- c(OM = 7, N = 6, P = 5, CEC = 4, K = 3, Ca = 2, Mg = 2, S = 1)  # Only use properties actually in the dataset available_props <- intersect(names(ratios), names(soil_ucayali)) ratios <- ratios[available_props]  # Create pairwise matrix pairwise <- ratio_to_saaty(ratios)  # Calculate weights ahp <- ahp_weights(pairwise, names(ratios)) print(ahp$weights) print(paste(\"CR:\", round(ahp$CR, 4)))  # 5. COMPUTE SQI # -------------- result <- compute_sqi_properties(   data = soil_ucayali,   properties = names(ratios),   id_column = \"SampleID\",   scoring_rules = rules[names(ratios)],   pairwise_matrix = pairwise,   var_threshold = 0.05,   loading_threshold = 0.5 )  # 6. EXAMINE RESULTS # ------------------ print(result) summary(result$results$SQI)  # View selected MDS print(result$mds)  # View final weights print(result$weights)  # 7. CLASSIFY SAMPLES # ------------------- result$results$Quality_Class <- cut(   result$results$SQI,   breaks = c(0, 0.25, 0.50, 0.75, 1.0),   labels = c(\"Poor\", \"Fair\", \"Good\", \"Excellent\"),   include.lowest = TRUE )  table(result$results$Quality_Class)  # 8. VISUALIZATIONS # ----------------- # Distribution plot(result, type = \"distribution\")  # Indicators plot(result, type = \"indicators\")  # Weights plot(result, type = \"weights\")  # Scree plot plot(result, type = \"scree\")  # Comprehensive report plot_sqi_report(result)  # 9. EXPORT RESULTS # ----------------- write.csv(result$results, \"sqi_results.csv\", row.names = FALSE)  # 10. DETAILED ANALYSIS # --------------------- # Top 10 highest quality samples top10 <- result$results[order(-result$results$SQI), ][1:10,                         c(\"SampleID\", \"SQI\", \"Quality_Class\")] print(top10)  # Bottom 10 lowest quality samples bottom10 <- result$results[order(result$results$SQI), ][1:10,                            c(\"SampleID\", \"SQI\", \"Quality_Class\")] print(bottom10)  # Limiting factors analysis scored_cols <- paste0(result$mds, \"_scored\") limiting_factors <- apply(result$results[, scored_cols], 1, which.min) limiting_indicator <- result$mds[limiting_factors] table(limiting_indicator)  print(\"Analysis complete!\")"},{"path":"https://ccarbajal16.github.io/soilquality/USER_GUIDE.html","id":"appendix-b-function-quick-reference","dir":"","previous_headings":"","what":"Appendix B: Function Quick Reference","title":"Comprehensive User Guide for the soilquality R Package","text":"End User Guide additional support, please visit: - Package website: https://ccarbajal16.github.io/soilquality/ - GitHub repository: https://github.com/ccarbajal16/soilquality - Issue tracker: https://github.com/ccarbajal16/soilquality/issues","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Advanced Usage","text":"vignette covers advanced features soilquality package, including: Property selection strategies Custom scoring rules Creating using AHP matrices Advanced visualization options Working different data formats","code":"library(soilquality) data(soil_ucayali)"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"property-selection-strategies","dir":"Articles","previous_headings":"","what":"Property Selection Strategies","title":"Advanced Usage","text":"Choosing right soil properties crucial meaningful SQI calculation. package offers several approaches.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"strategy-1-use-pre-defined-property-sets","dir":"Articles","previous_headings":"Property Selection Strategies","what":"Strategy 1: Use Pre-defined Property Sets","title":"Advanced Usage","text":"package includes curated property sets common scenarios:","code":"# View available property sets names(soil_property_sets) #> [1] \"basic\"         \"standard\"      \"comprehensive\" \"physical\"      #> [5] \"chemical\"      \"fertility\"  # Compare different property sets result_basic <- compute_sqi_properties(   data = soil_ucayali,   properties = soil_property_sets$basic,   id_column = \"SampleID\" )  # Use only fertility properties that exist in the dataset fertility_available <- intersect(soil_property_sets$fertility,                                    names(soil_ucayali)) result_fertility <- compute_sqi_properties(   data = soil_ucayali,   properties = fertility_available,   id_column = \"SampleID\" )  # Compare mean SQI values cat(\"Basic properties - Mean SQI:\",      round(mean(result_basic$results$SQI), 3), \"\\n\") #> Basic properties - Mean SQI: 0.49 cat(\"Fertility properties - Mean SQI:\",      round(mean(result_fertility$results$SQI), 3), \"\\n\") #> Fertility properties - Mean SQI: 0.508"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"strategy-2-domain-specific-selection","dir":"Articles","previous_headings":"Property Selection Strategies","what":"Strategy 2: Domain-Specific Selection","title":"Advanced Usage","text":"Select properties based research question management goal:","code":"# For erosion risk assessment - focus on physical properties erosion_props <- c(\"Sand\", \"Silt\", \"Clay\", \"BD\", \"OM\")  result_erosion <- compute_sqi_properties(   data = soil_ucayali,   properties = erosion_props,   id_column = \"SampleID\" )  # For nutrient management - focus on fertility nutrient_props <- c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\")  result_nutrient <- compute_sqi_properties(   data = soil_ucayali,   properties = nutrient_props,   id_column = \"SampleID\" )  # Compare selected MDS cat(\"Erosion assessment MDS:\", paste(result_erosion$mds, collapse = \", \"), \"\\n\") #> Erosion assessment MDS: Sand, Clay, BD, OM cat(\"Nutrient management MDS:\", paste(result_nutrient$mds, collapse = \", \"), \"\\n\") #> Nutrient management MDS: N, K, P, pH, OM"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"strategy-3-data-driven-selection","dir":"Articles","previous_headings":"Property Selection Strategies","what":"Strategy 3: Data-Driven Selection","title":"Advanced Usage","text":"Let PCA automatically select informative properties:","code":"# Use all available numeric properties all_numeric <- names(soil_ucayali)[sapply(soil_ucayali, is.numeric)]  result_all <- compute_sqi_properties(   data = soil_ucayali,   properties = all_numeric,   id_column = \"SampleID\" )  # See which properties were selected by PCA cat(\"PCA selected:\", length(result_all$mds), \"indicators from\",      length(all_numeric), \"properties\\n\") #> PCA selected: 8 indicators from 14 properties print(result_all$mds) #> [1] \"Sand\" \"Silt\" \"Ca\"   \"SOC\"  \"OM\"   \"pH\"   \"Mg\"   \"P\""},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"strategy-4-correlation-based-pre-screening","dir":"Articles","previous_headings":"Property Selection Strategies","what":"Strategy 4: Correlation-Based Pre-screening","title":"Advanced Usage","text":"Remove highly correlated properties analysis:","code":"# Calculate correlation matrix numeric_data <- soil_ucayali[, sapply(soil_ucayali, is.numeric)] cor_matrix <- cor(numeric_data, use = \"complete.obs\")  # Find highly correlated pairs (|r| > 0.9) high_cor <- which(abs(cor_matrix) > 0.9 & cor_matrix < 1, arr.ind = TRUE)  if (nrow(high_cor) > 0) {   cat(\"Highly correlated property pairs:\\n\")   for (i in 1:nrow(high_cor)) {     if (high_cor[i, 1] < high_cor[i, 2]) {  # Avoid duplicates       cat(sprintf(\"  %s - %s: r = %.3f\\n\",                   rownames(cor_matrix)[high_cor[i, 1]],                   colnames(cor_matrix)[high_cor[i, 2]],                   cor_matrix[high_cor[i, 1], high_cor[i, 2]]))     }   } }  # Remove one from each highly correlated pair # For example, keep SOC but remove OM (they're highly correlated) reduced_props <- setdiff(all_numeric, c(\"OM\"))  result_reduced <- compute_sqi_properties(   data = soil_ucayali,   properties = reduced_props,   id_column = \"SampleID\" )"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"custom-scoring-rules","dir":"Articles","previous_headings":"","what":"Custom Scoring Rules","title":"Advanced Usage","text":"package provides flexible scoring functions match different soil property behaviors.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"higher-is-better","dir":"Articles","previous_headings":"Custom Scoring Rules","what":"Higher is Better","title":"Advanced Usage","text":"properties higher values indicate better soil quality:","code":"# Organic matter, nutrients, CEC scoring_rules <- list(   OM = higher_better(),   N = higher_better(),   P = higher_better(),   K = higher_better(),   CEC = higher_better() )  result_higher <- compute_sqi_properties(   data = soil_ucayali,   properties = names(scoring_rules),   scoring_rules = scoring_rules,   id_column = \"SampleID\" )"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"lower-is-better","dir":"Articles","previous_headings":"Custom Scoring Rules","what":"Lower is Better","title":"Advanced Usage","text":"properties lower values indicate better soil quality:","code":"# Bulk density, electrical conductivity scoring_rules_lower <- list(   BD = lower_better(),   EC = lower_better() )  result_lower <- compute_sqi_properties(   data = soil_ucayali,   properties = names(scoring_rules_lower),   scoring_rules = scoring_rules_lower,   id_column = \"SampleID\" )"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"optimum-range","dir":"Articles","previous_headings":"Custom Scoring Rules","what":"Optimum Range","title":"Advanced Usage","text":"properties ideal target value:","code":"# pH has an optimal range around neutral scoring_rules_opt <- list(   pH = optimum_range(optimal = 6.5, tolerance = 1.5),   Sand = higher_better(),   Clay = higher_better(),   OM = higher_better() )  result_opt <- compute_sqi_properties(   data = soil_ucayali,   properties = names(scoring_rules_opt),   scoring_rules = scoring_rules_opt,   id_column = \"SampleID\" )  # Compare pH scoring with different optimal values result_opt_7 <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"pH\", \"OM\", \"N\", \"P\"),   scoring_rules = list(     pH = optimum_range(optimal = 7.0, tolerance = 1.0),     OM = higher_better(),     N = higher_better(),     P = higher_better()   ),   id_column = \"SampleID\" )  cat(\"Mean SQI with pH optimum 6.5:\",      round(mean(result_opt$results$SQI), 3), \"\\n\") #> Mean SQI with pH optimum 6.5: 0.395 cat(\"Mean SQI with pH optimum 7.0:\",      round(mean(result_opt_7$results$SQI), 3), \"\\n\") #> Mean SQI with pH optimum 7.0: 0.336"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"threshold-based-scoring","dir":"Articles","previous_headings":"Custom Scoring Rules","what":"Threshold-Based Scoring","title":"Advanced Usage","text":"properties specific threshold values:","code":"# Example: P availability with agronomic thresholds # Low: <10, Medium: 10-20, High: 20-40, Very High: >40 scoring_rules_thresh <- list(   P = threshold_scoring(     thresholds = c(0, 10, 20, 40, 100),     scores = c(0, 0.4, 0.7, 1.0, 1.0)   ),   K = threshold_scoring(     thresholds = c(0, 50, 100, 200, 500),     scores = c(0, 0.4, 0.7, 1.0, 1.0)   ),   OM = higher_better(),   pH = optimum_range(optimal = 6.5, tolerance = 1.5) )  result_thresh <- compute_sqi_properties(   data = soil_ucayali,   properties = names(scoring_rules_thresh),   scoring_rules = scoring_rules_thresh,   id_column = \"SampleID\" )"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"mixed-scoring-strategies","dir":"Articles","previous_headings":"Custom Scoring Rules","what":"Mixed Scoring Strategies","title":"Advanced Usage","text":"Combine different scoring approaches comprehensive assessment:","code":"# Realistic scoring for tropical agricultural soils tropical_scoring <- list(   pH = optimum_range(optimal = 6.0, tolerance = 1.5),   OM = higher_better(),   SOC = higher_better(),   N = higher_better(),   P = threshold_scoring(     thresholds = c(0, 8, 15, 30, 100),     scores = c(0.2, 0.5, 0.8, 1.0, 1.0)   ),   K = threshold_scoring(     thresholds = c(0, 60, 120, 200, 500),     scores = c(0.2, 0.5, 0.8, 1.0, 1.0)   ),   CEC = higher_better(),   BD = lower_better(),   EC = lower_better() )  result_tropical <- compute_sqi_properties(   data = soil_ucayali,   properties = names(tropical_scoring),   scoring_rules = tropical_scoring,   id_column = \"SampleID\" )  cat(\"Tropical scoring - Mean SQI:\",      round(mean(result_tropical$results$SQI), 3), \"\\n\") #> Tropical scoring - Mean SQI: 0.493"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"creating-ahp-matrices","dir":"Articles","previous_headings":"","what":"Creating AHP Matrices","title":"Advanced Usage","text":"Analytic Hierarchy Process (AHP) allows expert-based weighting indicators.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"method-1-interactive-creation","dir":"Articles","previous_headings":"Creating AHP Matrices","what":"Method 1: Interactive Creation","title":"Advanced Usage","text":"Create pairwise comparison matrix interactively:","code":"# This will prompt you for pairwise comparisons indicators <- c(\"pH\", \"OM\", \"P\", \"K\") ahp_matrix <- create_ahp_matrix(indicators, mode = \"interactive\")  # Use the AHP matrix in SQI calculation result_ahp <- compute_sqi_properties(   data = soil_ucayali,   properties = indicators,   pairwise_matrix = ahp_matrix$matrix,   id_column = \"SampleID\" )"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"method-2-manual-matrix-creation","dir":"Articles","previous_headings":"Creating AHP Matrices","what":"Method 2: Manual Matrix Creation","title":"Advanced Usage","text":"Create pairwise comparison matrix manually:","code":"# Define indicators indicators <- c(\"pH\", \"OM\", \"N\", \"P\")  # Create pairwise comparison matrix # Rows are compared to columns # Values: 1=Equal, 3=Moderate, 5=Strong, 7=Very Strong, 9=Extreme pairwise <- matrix(c(   1,   1/3, 1/5, 1/3,  # pH compared to others   3,   1,   1/3, 1,    # OM compared to others   5,   3,   1,   3,    # N compared to others   3,   1,   1/3, 1     # P compared to others ), nrow = 4, byrow = TRUE)  colnames(pairwise) <- rownames(pairwise) <- indicators  # Calculate weights ahp_result <- ahp_weights(pairwise, indicators = indicators)  cat(\"Indicator weights:\\n\") #> Indicator weights: print(round(ahp_result$weights, 3)) #>    pH    OM     N     P  #> 0.078 0.200 0.522 0.200 cat(\"\\nConsistency Ratio:\", round(ahp_result$CR, 4), \"\\n\") #>  #> Consistency Ratio: 0.0161  # Note: To use AHP weights in SQI calculation, the pairwise matrix must match # the MDS indicators selected by PCA. For this example, we'll calculate SQI # with equal weights and show the AHP weights separately. result_manual_ahp <- compute_sqi_properties(   data = soil_ucayali,   properties = indicators,   id_column = \"SampleID\" )  cat(\"\\nMDS indicators selected by PCA:\", paste(result_manual_ahp$mds, collapse = \", \"), \"\\n\") #>  #> MDS indicators selected by PCA: N, pH, OM"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"method-3-importance-ratios","dir":"Articles","previous_headings":"Creating AHP Matrices","what":"Method 3: Importance Ratios","title":"Advanced Usage","text":"Use relative importance ratios (simpler full pairwise matrix):","code":"# Specify relative importance (e.g., N is 3x more important than pH) indicators <- c(\"pH\", \"OM\", \"N\", \"P\") importance_ratios <- c(1, 2, 3, 2)  # Relative importance  # Convert to pairwise matrix pairwise_from_ratios <- ratio_to_saaty(importance_ratios) colnames(pairwise_from_ratios) <- rownames(pairwise_from_ratios) <- indicators  # Calculate weights ahp_from_ratios <- ahp_weights(pairwise_from_ratios, indicators = indicators)  cat(\"Weights from importance ratios:\\n\") #> Weights from importance ratios: print(round(ahp_from_ratios$weights, 3)) #>    pH    OM     N     P  #> 0.125 0.250 0.375 0.250"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"customizing-plot-appearance","dir":"Articles","previous_headings":"Advanced Visualization","what":"Customizing Plot Appearance","title":"Advanced Usage","text":"","code":"# Calculate SQI for visualization examples result_viz <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\"),   id_column = \"SampleID\" )  # Distribution plot plot(result_viz, type = \"distribution\")"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"comparing-multiple-scenarios","dir":"Articles","previous_headings":"Advanced Visualization","what":"Comparing Multiple Scenarios","title":"Advanced Usage","text":"","code":"# Calculate SQI with different property sets result_physical <- compute_sqi_properties(   data = soil_ucayali,   properties = soil_property_sets$physical,   id_column = \"SampleID\" )  # Use only chemical properties that exist in the dataset chemical_available <- intersect(soil_property_sets$chemical,                                   names(soil_ucayali)) result_chemical <- compute_sqi_properties(   data = soil_ucayali,   properties = chemical_available,   id_column = \"SampleID\" )  # Compare distributions par(mfrow = c(1, 2)) hist(result_physical$results$SQI,       main = \"Physical Properties\",      xlab = \"SQI\", col = \"lightblue\", xlim = c(0, 1)) abline(v = mean(result_physical$results$SQI), col = \"red\", lwd = 2)  hist(result_chemical$results$SQI,       main = \"Chemical Properties\",      xlab = \"SQI\", col = \"lightgreen\", xlim = c(0, 1)) abline(v = mean(result_chemical$results$SQI), col = \"red\", lwd = 2) par(mfrow = c(1, 1))"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"pca-biplot","dir":"Articles","previous_headings":"Advanced Visualization","what":"PCA Biplot","title":"Advanced Usage","text":"Visualize relationships samples variables:","code":"plot(result_viz, type = \"biplot\")"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"indicator-contribution-analysis","dir":"Articles","previous_headings":"Advanced Visualization","what":"Indicator Contribution Analysis","title":"Advanced Usage","text":"Identify indicators contribute SQI variation:","code":"# Extract scored indicators and weights scored_data <- result_viz$results[, paste0(result_viz$mds, \"_scored\")] weights <- result_viz$weights  # Calculate weighted contribution of each indicator contributions <- sweep(scored_data, 2, weights, \"*\")  # Plot contributions boxplot(contributions,          main = \"Weighted Indicator Contributions to SQI\",         ylab = \"Weighted Score\",         las = 2,         col = rainbow(length(result_viz$mds)))"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"file-based-workflow","dir":"Articles","previous_headings":"Working with Different Data Formats","what":"File-Based Workflow","title":"Advanced Usage","text":"","code":"# Save data to CSV write.csv(soil_ucayali, \"soil_data.csv\", row.names = FALSE)  # Calculate SQI from file result_from_file <- compute_sqi(   input_csv = \"soil_data.csv\",   id_column = \"SampleID\",   output_csv = \"sqi_results.csv\" )  # Results are automatically saved to output_csv"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"data-frame-workflow","dir":"Articles","previous_headings":"Working with Different Data Formats","what":"Data Frame Workflow","title":"Advanced Usage","text":"","code":"# Work directly with data frames (no file I/O) result_df <- compute_sqi_df(   df = soil_ucayali,   id_column = \"SampleID\" )  # Extract results sqi_values <- result_df$results$SQI names(sqi_values) <- result_df$results$SampleID  # View top 5 samples by SQI head(sort(sqi_values, decreasing = TRUE), 5) #>    UCY043    UCY005    UCY001    UCY050    UCY045  #> 0.6927483 0.6061193 0.5852834 0.5773329 0.5691887"},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"batch-processing-multiple-datasets","dir":"Articles","previous_headings":"Working with Different Data Formats","what":"Batch Processing Multiple Datasets","title":"Advanced Usage","text":"","code":"# Process multiple sites or time points sites <- c(\"site1.csv\", \"site2.csv\", \"site3.csv\")  results_list <- lapply(sites, function(site) {   compute_sqi(     input_csv = site,     id_column = \"SampleID\",     properties = soil_property_sets$standard   ) })  # Compare mean SQI across sites mean_sqi <- sapply(results_list, function(r) mean(r$results$SQI)) names(mean_sqi) <- sites print(mean_sqi)"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"property-selection","dir":"Articles","previous_headings":"Best Practices","what":"1. Property Selection","title":"Advanced Usage","text":"Use least 5-6 properties robust PCA Include properties different categories (physical, chemical, biological) Avoid highly correlated properties (|r| > 0.9) Match properties management objectives","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"scoring-rules","dir":"Articles","previous_headings":"Best Practices","what":"2. Scoring Rules","title":"Advanced Usage","text":"Use domain knowledge select appropriate scoring functions Validate scoring rules local experts literature Consider regional differences optimal values Document scoring rationale","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"ahp-weighting","dir":"Articles","previous_headings":"Best Practices","what":"3. AHP Weighting","title":"Advanced Usage","text":"Involve multiple experts reliable weights Check Consistency Ratio (CR < 0.1) Use equal weights expert knowledge unavailable Sensitivity analysis: test results change different weights","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"interpretation","dir":"Articles","previous_headings":"Best Practices","what":"4. Interpretation","title":"Advanced Usage","text":"Consider SQI context land use management goals Compare SQI across similar soil types land uses Use visualization identify limiting factors Validate results field observations","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Advanced Usage","text":"vignette demonstrated advanced features including: Multiple property selection strategies Custom scoring rules different property behaviors Creating AHP matrices expert-based weighting Advanced visualization comparison techniques Different data workflow options information AHP methodology, see vignette(\"ahp-matrices\").","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/advanced-usage.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Advanced Usage","text":"Karlen, D. L., Mausbach, M. J., Doran, J. W., Cline, R. G., Harris, R. F., & Schuman, G. E. (1997). Soil quality: concept, definition, framework evaluation. Soil Science Society America Journal, 61(1), 4-10. Qi, Y., Darilek, J. L., Huang, B., Zhao, Y., Sun, W., & Gu, Z. (2009). Evaluating soil quality indices agricultural region Jiangsu Province, China. Geoderma, 149(3-4), 325-334.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Understanding and Creating AHP Matrices","text":"Analytic Hierarchy Process (AHP) structured technique organizing analyzing complex decisions. context soil quality assessment, AHP helps assign weights different soil indicators based expert judgment relative importance. vignette explains: fundamentals AHP methodology create pairwise comparison matrices interpret Consistency Ratio Strategies improving inconsistent matrices Practical examples soil quality assessment","code":"library(soilquality)"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"why-use-ahp-for-soil-quality","dir":"Articles","previous_headings":"","what":"Why Use AHP for Soil Quality?","title":"Understanding and Creating AHP Matrices","text":"Different soil properties different impacts soil quality depending : Land use: Agricultural vs. forest vs. urban soils Management goals: Crop production vs. carbon sequestration vs. erosion control Regional context: Tropical vs. temperate, arid vs. humid Soil type: Sandy vs. clayey, acidic vs. alkaline AHP provides systematic way incorporate expert knowledge context-specific priorities SQI calculation.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"equal-weights-vs--ahp-weights","dir":"Articles","previous_headings":"Why Use AHP for Soil Quality?","what":"Equal Weights vs. AHP Weights","title":"Understanding and Creating AHP Matrices","text":"","code":"data(soil_ucayali)  # Define indicators indicators <- c(\"pH\", \"OM\", \"N\", \"P\")  # Calculate SQI with equal weights (default) result_equal <- compute_sqi_properties(   data = soil_ucayali,   properties = indicators,   id_column = \"SampleID\" )  cat(\"Equal weights (assigned to MDS indicators selected by PCA):\\n\") #> Equal weights (assigned to MDS indicators selected by PCA): print(round(result_equal$weights, 3)) #>     N    pH    OM  #> 0.333 0.333 0.333 cat(\"\\nMDS indicators selected:\", paste(result_equal$mds, collapse = \", \"), \"\\n\") #>  #> MDS indicators selected: N, pH, OM  # To use AHP weights, create a pairwise matrix for the indicators # Note: The pairwise matrix should match the MDS indicators selected by PCA # For demonstration, let's calculate AHP weights manually pairwise <- matrix(c(   1,   1/3, 1/5, 1/3,  # pH   3,   1,   1/2, 1,    # OM   5,   2,   1,   3,    # N   3,   1,   1/3, 1     # P ), nrow = 4, byrow = TRUE) colnames(pairwise) <- rownames(pairwise) <- indicators  ahp_result <- ahp_weights(pairwise, indicators = indicators)  cat(\"\\nAHP weights (for all indicators):\\n\") #>  #> AHP weights (for all indicators): print(round(ahp_result$weights, 3)) #>    pH    OM     N     P  #> 0.080 0.227 0.486 0.207 cat(\"\\nConsistency Ratio:\", round(ahp_result$CR, 4), \"\\n\") #>  #> Consistency Ratio: 0.0126  cat(\"\\nMean SQI with equal weights:\",      round(mean(result_equal$results$SQI), 3), \"\\n\") #>  #> Mean SQI with equal weights: 0.432"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"the-saaty-scale","dir":"Articles","previous_headings":"","what":"The Saaty Scale","title":"Understanding and Creating AHP Matrices","text":"AHP uses Saaty scale express relative importance pairwise comparisons: Reciprocals (1/3, 1/5, etc.) used second indicator important first.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"example-comparing-ph-and-organic-matter","dir":"Articles","previous_headings":"The Saaty Scale","what":"Example: Comparing pH and Organic Matter","title":"Understanding and Creating AHP Matrices","text":"Question: “much important organic matter compared pH overall soil quality tropical agricultural soils?” Possible answers: 1: equally important 3: OM moderately important (typical answer) 5: OM strongly important 1/3: pH moderately important OM","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"method-1-interactive-creation","dir":"Articles","previous_headings":"Creating Pairwise Comparison Matrices","what":"Method 1: Interactive Creation","title":"Understanding and Creating AHP Matrices","text":"easiest way create AHP matrix interactively:","code":"# Define your indicators indicators <- c(\"pH\", \"OM\", \"N\", \"P\", \"K\")  # Create matrix interactively # You'll be prompted to compare each pair ahp_matrix <- create_ahp_matrix(indicators, mode = \"interactive\")  # View results print(ahp_matrix)  # The matrix is stored in ahp_matrix$matrix # Use it in SQI calculation result <- compute_sqi_properties(   data = soil_ucayali,   properties = indicators,   pairwise_matrix = ahp_matrix$matrix,   id_column = \"SampleID\" )"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"method-2-manual-matrix-construction","dir":"Articles","previous_headings":"Creating Pairwise Comparison Matrices","what":"Method 2: Manual Matrix Construction","title":"Understanding and Creating AHP Matrices","text":"reproducible analysis working pre-determined expert judgments: Interpretation: example: N 5x important pH OM 3x important pH N 2x important OM N 3x important P","code":"# Define indicators indicators <- c(\"pH\", \"OM\", \"N\", \"P\")  # Create the pairwise comparison matrix # Each cell [i,j] represents: \"How much more important is indicator i than j?\" pairwise <- matrix(c(   # pH   OM    N     P     1,   1/3,  1/5,  1/3,   # pH row     3,   1,    1/2,  1,     # OM row     5,   2,    1,    3,     # N row     3,   1,    1/3,  1      # P row ), nrow = 4, byrow = TRUE)  colnames(pairwise) <- rownames(pairwise) <- indicators  # View the matrix print(pairwise) #>    pH        OM         N         P #> pH  1 0.3333333 0.2000000 0.3333333 #> OM  3 1.0000000 0.5000000 1.0000000 #> N   5 2.0000000 1.0000000 3.0000000 #> P   3 1.0000000 0.3333333 1.0000000  # Calculate weights ahp_result <- ahp_weights(pairwise, indicators = indicators)  cat(\"\\nIndicator weights:\\n\") #>  #> Indicator weights: print(round(ahp_result$weights, 3)) #>    pH    OM     N     P  #> 0.080 0.227 0.486 0.207 cat(\"\\nConsistency Ratio:\", round(ahp_result$CR, 4), \"\\n\") #>  #> Consistency Ratio: 0.0126"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"method-3-using-importance-ratios","dir":"Articles","previous_headings":"Creating Pairwise Comparison Matrices","what":"Method 3: Using Importance Ratios","title":"Understanding and Creating AHP Matrices","text":"simpler approach know relative importance:","code":"# Specify relative importance scores # Example: pH=1, OM=2, N=3, P=2, K=1.5 indicators <- c(\"pH\", \"OM\", \"N\", \"P\", \"K\") importance <- c(1, 2, 3, 2, 1.5)  # Convert to pairwise matrix pairwise_from_ratios <- ratio_to_saaty(importance) colnames(pairwise_from_ratios) <- rownames(pairwise_from_ratios) <- indicators  # Calculate weights ahp_from_ratios <- ahp_weights(indicators, pairwise = pairwise_from_ratios)  cat(\"Weights from importance ratios:\\n\") #> Weights from importance ratios: print(round(ahp_from_ratios$weights, 3)) #>    pH    OM     N     P     K  #> 0.105 0.211 0.316 0.211 0.158 cat(\"\\nConsistency Ratio:\", round(ahp_from_ratios$CR, 4), \"\\n\") #>  #> Consistency Ratio: 0"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"understanding-the-consistency-ratio","dir":"Articles","previous_headings":"","what":"Understanding the Consistency Ratio","title":"Understanding and Creating AHP Matrices","text":"Consistency Ratio (CR) measures logical consistency pairwise comparisons.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"what-is-consistency","dir":"Articles","previous_headings":"Understanding the Consistency Ratio","what":"What is Consistency?","title":"Understanding and Creating AHP Matrices","text":"Consistent judgments follow transitive logic: 3x important B B 2x important C 6x important C (3 × 2 = 6) Inconsistent judgments violate logic: 3x important B B 2x important C say 2x important C (inconsistent!)","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"interpreting-cr-values","dir":"Articles","previous_headings":"Understanding the Consistency Ratio","what":"Interpreting CR Values","title":"Understanding and Creating AHP Matrices","text":"","code":"# Example 1: Consistent matrix (CR < 0.1) consistent_matrix <- matrix(c(   1,   3,   5,   1/3, 1,   2,   1/5, 1/2, 1 ), nrow = 3, byrow = TRUE)  indicators_3 <- c(\"A\", \"B\", \"C\") colnames(consistent_matrix) <- rownames(consistent_matrix) <- indicators_3  result_consistent <- ahp_weights(consistent_matrix, indicators = indicators_3) cat(\"Consistent matrix - CR:\", round(result_consistent$CR, 4), \"\\n\") #> Consistent matrix - CR: 0.0032  # Example 2: Inconsistent matrix (CR > 0.1) inconsistent_matrix <- matrix(c(   1,   3,   2,   1/3, 1,   5,   1/2, 1/5, 1 ), nrow = 3, byrow = TRUE)  colnames(inconsistent_matrix) <- rownames(inconsistent_matrix) <- indicators_3  result_inconsistent <- ahp_weights(inconsistent_matrix, indicators = indicators_3) #> Warning in ahp_weights(inconsistent_matrix, indicators = indicators_3): #> Consistency Ratio (0.4037) exceeds 0.1. Consider revising judgments. cat(\"Inconsistent matrix - CR:\", round(result_inconsistent$CR, 4), \"\\n\") #> Inconsistent matrix - CR: 0.4037"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"improving-inconsistent-matrices","dir":"Articles","previous_headings":"","what":"Improving Inconsistent Matrices","title":"Understanding and Creating AHP Matrices","text":"CR exceeds 0.10, strategies improve consistency:","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"strategy-1-identify-problematic-comparisons","dir":"Articles","previous_headings":"Improving Inconsistent Matrices","what":"Strategy 1: Identify Problematic Comparisons","title":"Understanding and Creating AHP Matrices","text":"","code":"# Create an inconsistent matrix indicators <- c(\"pH\", \"OM\", \"N\", \"P\") problematic <- matrix(c(   1,   2,   4,   3,   1/2, 1,   5,   2,   1/4, 1/5, 1,   1/3,   1/3, 1/2, 3,   1 ), nrow = 4, byrow = TRUE)  colnames(problematic) <- rownames(problematic) <- indicators  # Calculate weights and CR result_prob <- ahp_weights(problematic, indicators = indicators) cat(\"Initial CR:\", round(result_prob$CR, 4), \"\\n\\n\") #> Initial CR: 0.0379  # Check for major inconsistencies # Compare direct vs. indirect comparisons cat(\"Checking consistency:\\n\") #> Checking consistency: cat(\"Direct: pH vs N =\", problematic[1, 3], \"\\n\") #> Direct: pH vs N = 4 cat(\"Indirect: pH vs OM × OM vs N =\",      problematic[1, 2] * problematic[2, 3], \"\\n\") #> Indirect: pH vs OM × OM vs N = 10 cat(\"Ratio:\", problematic[1, 3] / (problematic[1, 2] * problematic[2, 3]), \"\\n\\n\") #> Ratio: 0.4  # This shows a major inconsistency! # pH vs N is 4, but pH vs OM (2) × OM vs N (5) = 10"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"strategy-2-revise-extreme-comparisons","dir":"Articles","previous_headings":"Improving Inconsistent Matrices","what":"Strategy 2: Revise Extreme Comparisons","title":"Understanding and Creating AHP Matrices","text":"","code":"# Revise the problematic comparison improved <- problematic improved[2, 3] <- 2  # Change OM vs N from 5 to 2 improved[3, 2] <- 1/2  # Update reciprocal  result_improved <- ahp_weights(improved, indicators = indicators) cat(\"Improved CR:\", round(result_improved$CR, 4), \"\\n\") #> Improved CR: 0.046"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"strategy-3-use-fewer-extreme-values","dir":"Articles","previous_headings":"Improving Inconsistent Matrices","what":"Strategy 3: Use Fewer Extreme Values","title":"Understanding and Creating AHP Matrices","text":"","code":"# Original: uses values 1-5 moderate_matrix <- matrix(c(   1,   2,   3,   2,   1/2, 1,   2,   1,   1/3, 1/2, 1,   1/2,   1/2, 1,   2,   1 ), nrow = 4, byrow = TRUE)  colnames(moderate_matrix) <- rownames(moderate_matrix) <- indicators  result_moderate <- ahp_weights(moderate_matrix, indicators = indicators) cat(\"Moderate values CR:\", round(result_moderate$CR, 4), \"\\n\") #> Moderate values CR: 0.0038"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"strategy-4-simplify-the-hierarchy","dir":"Articles","previous_headings":"Improving Inconsistent Matrices","what":"Strategy 4: Simplify the Hierarchy","title":"Understanding and Creating AHP Matrices","text":"many indicators (>7), consider grouping :","code":"# Instead of comparing 10 indicators directly: # indicators <- c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"Ca\", \"Mg\", \"CEC\", \"BD\", \"EC\")  # Group into categories and use two-level AHP: # Level 1: Compare categories categories <- c(\"Chemical\", \"Fertility\", \"Physical\") category_pairwise <- matrix(c(   1,   2,   3,   1/2, 1,   2,   1/3, 1/2, 1 ), nrow = 3, byrow = TRUE)  # Level 2: Compare indicators within each category chemical_indicators <- c(\"pH\", \"EC\") fertility_indicators <- c(\"OM\", \"N\", \"P\", \"K\") physical_indicators <- c(\"BD\", \"Sand\", \"Clay\")  # Then combine weights: category_weight × indicator_weight_within_category"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"example-1-tropical-agricultural-soils","dir":"Articles","previous_headings":"Practical Examples","what":"Example 1: Tropical Agricultural Soils","title":"Understanding and Creating AHP Matrices","text":"Focus nutrient availability organic matter:","code":"# Indicators for tropical agriculture tropical_indicators <- c(\"pH\", \"OM\", \"N\", \"P\", \"CEC\")  # Expert judgment: OM and N are most critical # pH and CEC are moderately important # P is less critical (often fixed by fertilizer) tropical_pairwise <- matrix(c(   # pH   OM    N     P     CEC     1,   1/3,  1/3,  2,    1,     # pH     3,   1,    1,    5,    2,     # OM     3,   1,    1,    5,    2,     # N     1/2, 1/5,  1/5,  1,    1/3,   # P     1,   1/2,  1/2,  3,    1      # CEC ), nrow = 5, byrow = TRUE)  colnames(tropical_pairwise) <- rownames(tropical_pairwise) <- tropical_indicators  tropical_ahp <- ahp_weights(tropical_pairwise, indicators = tropical_indicators)  cat(\"Tropical agriculture weights:\\n\") #> Tropical agriculture weights: print(round(tropical_ahp$weights, 3)) #>    pH    OM     N     P   CEC  #> 0.124 0.328 0.328 0.061 0.158 cat(\"\\nCR:\", round(tropical_ahp$CR, 4), \"\\n\") #>  #> CR: 0.0056  # Calculate SQI (note: pairwise matrix would need to match MDS indicators) result_tropical <- compute_sqi_properties(   data = soil_ucayali,   properties = tropical_indicators,   id_column = \"SampleID\" )  cat(\"\\nMDS indicators selected:\", paste(result_tropical$mds, collapse = \", \"), \"\\n\") #>  #> MDS indicators selected: N, pH, OM cat(\"Mean SQI:\", round(mean(result_tropical$results$SQI), 3), \"\\n\") #> Mean SQI: 0.432"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"example-2-erosion-risk-assessment","dir":"Articles","previous_headings":"Practical Examples","what":"Example 2: Erosion Risk Assessment","title":"Understanding and Creating AHP Matrices","text":"Focus physical properties:","code":"# Indicators for erosion risk erosion_indicators <- c(\"Sand\", \"Clay\", \"OM\", \"BD\")  # Expert judgment: OM and BD are most critical for erosion # Texture (Sand, Clay) is moderately important erosion_pairwise <- matrix(c(   # Sand  Clay  OM    BD     1,    2,    1/3,  1/2,   # Sand     1/2,  1,    1/3,  1/2,   # Clay     3,    3,    1,    1,     # OM     2,    2,    1,    1      # BD ), nrow = 4, byrow = TRUE)  colnames(erosion_pairwise) <- rownames(erosion_pairwise) <- erosion_indicators  erosion_ahp <- ahp_weights(erosion_pairwise, indicators = erosion_indicators)  cat(\"Erosion risk weights:\\n\") #> Erosion risk weights: print(round(erosion_ahp$weights, 3)) #>  Sand  Clay    OM    BD  #> 0.172 0.122 0.389 0.317 cat(\"\\nCR:\", round(erosion_ahp$CR, 4), \"\\n\") #>  #> CR: 0.0301"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"example-3-carbon-sequestration-potential","dir":"Articles","previous_headings":"Practical Examples","what":"Example 3: Carbon Sequestration Potential","title":"Understanding and Creating AHP Matrices","text":"Focus organic matter related properties:","code":"# Indicators for carbon sequestration carbon_indicators <- c(\"OM\", \"SOC\", \"N\", \"Clay\", \"CEC\")  # Expert judgment: OM and SOC are most critical # Clay and CEC support carbon stabilization # N indicates decomposition rate carbon_pairwise <- matrix(c(   # OM   SOC   N     Clay  CEC     1,   1,    3,    2,    2,     # OM     1,   1,    3,    2,    2,     # SOC     1/3, 1/3,  1,    1/2,  1/2,   # N     1/2, 1/2,  2,    1,    1,     # Clay     1/2, 1/2,  2,    1,    1      # CEC ), nrow = 5, byrow = TRUE)  colnames(carbon_pairwise) <- rownames(carbon_pairwise) <- carbon_indicators  carbon_ahp <- ahp_weights(carbon_pairwise, indicators = carbon_indicators)  cat(\"Carbon sequestration weights:\\n\") #> Carbon sequestration weights: print(round(carbon_ahp$weights, 3)) #>    OM   SOC     N  Clay   CEC  #> 0.298 0.298 0.089 0.158 0.158 cat(\"\\nCR:\", round(carbon_ahp$CR, 4), \"\\n\") #>  #> CR: 0.003"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"involve-multiple-experts","dir":"Articles","previous_headings":"Best Practices for AHP in Soil Quality","what":"1. Involve Multiple Experts","title":"Understanding and Creating AHP Matrices","text":"","code":"# Collect judgments from multiple experts expert1_matrix <- create_ahp_matrix(indicators, mode = \"interactive\") expert2_matrix <- create_ahp_matrix(indicators, mode = \"interactive\") expert3_matrix <- create_ahp_matrix(indicators, mode = \"interactive\")  # Aggregate using geometric mean n_experts <- 3 aggregated_matrix <- (expert1_matrix$matrix *                        expert2_matrix$matrix *                        expert3_matrix$matrix)^(1/n_experts)  # Calculate final weights final_ahp <- ahp_weights(aggregated_matrix, indicators = indicators)"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"document-your-rationale","dir":"Articles","previous_headings":"Best Practices for AHP in Soil Quality","what":"2. Document Your Rationale","title":"Understanding and Creating AHP Matrices","text":"Always document assigned specific importance values:","code":"# Example documentation rationale <- list(   \"OM vs pH\" = \"OM rated 3x more important because it affects multiple                  soil functions (nutrient supply, water retention, structure)\",   \"N vs P\" = \"N rated 2x more important because it's more limiting in                tropical soils and harder to supplement\",   \"pH vs P\" = \"Equal importance (1) because both are easily managed                 through amendments\" )  # Include this in your analysis report"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"perform-sensitivity-analysis","dir":"Articles","previous_headings":"Best Practices for AHP in Soil Quality","what":"3. Perform Sensitivity Analysis","title":"Understanding and Creating AHP Matrices","text":"Test results change different weights:","code":"# Compare different AHP weight scenarios indicators <- c(\"pH\", \"OM\", \"N\", \"P\")  # Scenario 1: Equal importance equal_weights <- rep(1/4, 4) names(equal_weights) <- indicators  # Scenario 2: OM-focused om_focused <- matrix(c(   1,   1/5, 1/3, 1/2,   5,   1,   2,   3,   3,   1/2, 1,   2,   2,   1/3, 1/2, 1 ), nrow = 4, byrow = TRUE) colnames(om_focused) <- rownames(om_focused) <- indicators  ahp_om <- ahp_weights(om_focused, indicators = indicators)  # Scenario 3: N-focused n_focused <- matrix(c(   1,   1/3, 1/5, 1/2,   3,   1,   1/2, 2,   5,   2,   1,   3,   2,   1/2, 1/3, 1 ), nrow = 4, byrow = TRUE) colnames(n_focused) <- rownames(n_focused) <- indicators  ahp_n <- ahp_weights(n_focused, indicators = indicators)  # Compare weights cat(\"Equal weights:\\n\") #> Equal weights: print(round(equal_weights, 3)) #>   pH   OM    N    P  #> 0.25 0.25 0.25 0.25  cat(\"\\nOM-focused weights (CR =\", round(ahp_om$CR, 4), \"):\\n\") #>  #> OM-focused weights (CR = 0.0054 ): print(round(ahp_om$weights, 3)) #>    pH    OM     N     P  #> 0.088 0.483 0.272 0.157  cat(\"\\nN-focused weights (CR =\", round(ahp_n$CR, 4), \"):\\n\") #>  #> N-focused weights (CR = 0.0054 ): print(round(ahp_n$weights, 3)) #>    pH    OM     N     P  #> 0.088 0.272 0.483 0.157  # Calculate SQI with equal weights to show the approach result_sqi <- compute_sqi_properties(   data = soil_ucayali,   properties = indicators,   id_column = \"SampleID\" )  cat(\"\\nMean SQI with equal weights:\", round(mean(result_sqi$results$SQI), 3), \"\\n\") #>  #> Mean SQI with equal weights: 0.432 cat(\"Note: Different weight scenarios would produce different SQI values\\n\") #> Note: Different weight scenarios would produce different SQI values cat(\"when applied to the MDS indicators selected by PCA.\\n\") #> when applied to the MDS indicators selected by PCA."},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"validate-with-field-data","dir":"Articles","previous_headings":"Best Practices for AHP in Soil Quality","what":"4. Validate with Field Data","title":"Understanding and Creating AHP Matrices","text":"possible, validate AHP weights field observations:","code":"# Example: Compare SQI with crop yield data # Assuming you have yield data yield_data <- data.frame(   SampleID = soil_ucayali$SampleID,   Yield = rnorm(50, 3000, 500)  # Example yield data )  # Merge with SQI results merged <- merge(result_ahp$results, yield_data, by = \"SampleID\")  # Check correlation cor_sqi_yield <- cor(merged$SQI, merged$Yield) cat(\"Correlation between SQI and yield:\", round(cor_sqi_yield, 3), \"\\n\")  # If correlation is low, reconsider your weights"},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Understanding and Creating AHP Matrices","text":"vignette covered: AHP fundamentals: Using expert judgment weight soil indicators Saaty scale: 1-9 scale pairwise comparisons Creating matrices: Interactive, manual, ratio-based methods Consistency Ratio: Measuring improving logical consistency Practical examples: Context-specific weighting different goals Best practices: Multiple experts, documentation, sensitivity analysis Key takeaways: Use AHP indicator importance varies context Aim CR < 0.10 reliable weights Document rationale transparency Test sensitivity different weight scenarios Validate results field data possible","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/ahp-matrices.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Understanding and Creating AHP Matrices","text":"Saaty, T. L. (1980). Analytic Hierarchy Process: Planning, Priority Setting, Resource Allocation. McGraw-Hill. Saaty, T. L. (2008). Decision making analytic hierarchy process. International Journal Services Sciences, 1(1), 83-98. Rezaei-Moghaddam, K., & Karami, E. (2008). multiple criteria evaluation sustainable agricultural development models using AHP. Environment, Development Sustainability, 10(4), 407-426. Masto, R. E., Chhonkar, P. K., Singh, D., & Patra, . K. (2008). Alternative soil quality indices evaluating effect intensive cropping, fertilisation manuring 31 years semi-arid soils India. Environmental Monitoring Assessment, 136(1-3), 419-435.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Introduction to soilquality","text":"soilquality package provides tools calculating Soil Quality Index (SQI) using scientifically rigorous approach combines: Principal Component Analysis (PCA) selecting Minimum Data Set (MDS) soil indicators Analytic Hierarchy Process (AHP) expert-based weighting indicators Flexible scoring functions normalizing soil properties 0-1 scale Visualization tools interpreting communicating results package designed soil scientists, researchers, environmental consultants need assess soil quality systematic reproducible way.","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"from-github","dir":"Articles","previous_headings":"Installation","what":"From GitHub","title":"Introduction to soilquality","text":"can install development version soilquality GitHub:","code":"# Install devtools if you haven't already install.packages(\"devtools\")  # Install soilquality from GitHub devtools::install_github(\"username/soilquality\")"},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"from-cran","dir":"Articles","previous_headings":"Installation","what":"From CRAN","title":"Introduction to soilquality","text":"released CRAN, can install package :","code":"install.packages(\"soilquality\")"},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"basic-workflow","dir":"Articles","previous_headings":"","what":"Basic Workflow","title":"Introduction to soilquality","text":"typical workflow calculating SQI involves steps: Load prepare soil data Select soil properties analysis Define scoring rules property Calculate indicator weights (optional: use AHP) Compute SQI Visualize interpret results Let’s walk complete example using included soil_ucayali dataset.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"load-the-package-and-data","dir":"Articles","previous_headings":"Basic Workflow","what":"Load the Package and Data","title":"Introduction to soilquality","text":"soil_ucayali dataset contains 50 soil samples Ucayali region Peru, 14 soil properties including physical, chemical, fertility indicators.","code":"library(soilquality)  # Load the example dataset data(soil_ucayali)  # View the first few rows head(soil_ucayali) #>   SampleID Sand Silt Clay   BD  pH   OM  SOC     N    P   K  CEC   Ca   Mg   EC #> 1   UCY001 42.4 35.4 22.2 1.47 7.0 2.46 1.24 0.201  7.8 131 10.2 5.51 2.44 0.06 #> 2   UCY002 42.7 30.2 27.1 1.47 6.2 2.29 1.22 0.050  4.5 121  9.0 3.56 1.78 0.26 #> 3   UCY003 54.6 25.4 20.0 1.40 5.0 2.49 1.13 0.129  6.1 106 15.1 5.83 1.78 0.31 #> 4   UCY004 41.9 37.4 20.7 1.20 5.6 2.88 1.07 0.156  7.9 113 14.3 4.80 0.89 0.10 #> 5   UCY005 50.1 30.3 19.6 1.33 4.9 4.24 1.38 0.105 10.0 118  7.5 6.48 2.27 0.30 #> 6   UCY006 49.5 31.8 18.7 1.31 4.8 2.72 1.77 0.167  3.0  40 11.7 2.75 1.67 0.17"},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"quick-start-basic-sqi-calculation","dir":"Articles","previous_headings":"Basic Workflow","what":"Quick Start: Basic SQI Calculation","title":"Introduction to soilquality","text":"simplest way calculate SQI using compute_sqi_properties() default settings: function automatically: Standardizes selected properties Performs PCA select Minimum Data Set (MDS) Applies standard scoring rules appropriate property Calculates equal weights indicators (uses AHP provided) Computes final SQI sample","code":"# Calculate SQI using standard fertility properties result <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\"),   id_column = \"SampleID\" )  # View the result print(result) #> $mds #> [1] \"N\"  \"K\"  \"P\"  \"pH\" \"OM\" #>  #> $weights #>   N   K   P  pH  OM  #> 0.2 0.2 0.2 0.2 0.2  #>  #> $CR #> [1] 0 #>  #> $results #>    SampleID  pH   OM     N    P   K  CEC   N_scored  K_scored   P_scored #> 1    UCY001 7.0 2.46 0.201  7.8 131 10.2 0.65938865 0.8750000 0.43939394 #> 2    UCY002 6.2 2.29 0.050  4.5 121  9.0 0.00000000 0.7788462 0.18939394 #> 3    UCY003 5.0 2.49 0.129  6.1 106 15.1 0.34497817 0.6346154 0.31060606 #> 4    UCY004 5.6 2.88 0.156  7.9 113 14.3 0.46288210 0.7019231 0.44696970 #> 5    UCY005 4.9 4.24 0.105 10.0 118  7.5 0.24017467 0.7500000 0.60606061 #> 6    UCY006 4.8 2.72 0.167  3.0  40 11.7 0.51091703 0.0000000 0.07575758 #> 7    UCY007 4.6 3.77 0.171  7.0 123  9.3 0.52838428 0.7980769 0.37878788 #> 8    UCY008 4.7 3.37 0.148 10.3  83  5.8 0.42794760 0.4134615 0.62878788 #> 9    UCY009 6.5 2.70 0.050  6.4 101 12.5 0.00000000 0.5865385 0.33333333 #> 10   UCY010 5.2 1.42 0.279  8.7  88 11.8 1.00000000 0.4615385 0.50757576 #> 11   UCY011 5.3 2.33 0.140  9.5 117 11.7 0.39301310 0.7403846 0.56818182 #> 12   UCY012 5.4 2.36 0.183  8.8  86 12.6 0.58078603 0.4423077 0.51515152 #> 13   UCY013 6.2 2.84 0.164 10.0 108 14.6 0.49781659 0.6538462 0.60606061 #> 14   UCY014 4.8 3.97 0.201  7.6  85 12.6 0.65938865 0.4326923 0.42424242 #> 15   UCY015 4.4 4.86 0.191  6.8  68 10.2 0.61572052 0.2692308 0.36363636 #> 16   UCY016 6.5 4.19 0.140  2.0 125  9.8 0.39301310 0.8173077 0.00000000 #> 17   UCY017 4.8 2.68 0.169  7.7 114 11.6 0.51965066 0.7115385 0.43181818 #> 18   UCY018 4.6 1.22 0.103  9.3 138 12.9 0.23144105 0.9423077 0.55303030 #> 19   UCY019 4.2 2.45 0.193  9.6  97  8.9 0.62445415 0.5480769 0.57575758 #> 20   UCY020 4.2 2.88 0.127  6.3 123 11.4 0.33624454 0.7980769 0.32575758 #> 21   UCY021 4.7 3.56 0.271 13.3 144 14.9 0.96506550 1.0000000 0.85606061 #> 22   UCY022 5.7 3.67 0.067  8.9  88 11.7 0.07423581 0.4615385 0.52272727 #> 23   UCY023 6.1 3.42 0.127  8.4  62  9.9 0.33624454 0.2115385 0.48484848 #> 24   UCY024 5.8 1.54 0.191 11.8  89 11.2 0.61572052 0.4711538 0.74242424 #> 25   UCY025 4.9 3.56 0.176  5.8  90 15.3 0.55021834 0.4807692 0.28787879 #> 26   UCY026 5.2 2.40 0.121  6.6  99 13.7 0.31004367 0.5673077 0.34848485 #> 27   UCY027 4.6 2.96 0.100 15.2 138 15.7 0.21834061 0.9423077 1.00000000 #> 28   UCY028 4.6 2.87 0.157  8.0  87 12.4 0.46724891 0.4519231 0.45454545 #> 29   UCY029 5.9 3.19 0.149 12.9 104 13.2 0.43231441 0.6153846 0.82575758 #> 30   UCY030 4.4 2.82 0.060  3.7  89 10.3 0.04366812 0.4711538 0.12878788 #> 31   UCY031 6.8 1.30 0.152  7.4  96 13.8 0.44541485 0.5384615 0.40909091 #> 32   UCY032 5.1 3.46 0.160  9.1 103 10.5 0.48034934 0.6057692 0.53787879 #> 33   UCY033 5.4 3.15 0.159  8.9 128  7.7 0.47598253 0.8461538 0.52272727 #> 34   UCY034 4.6 2.56 0.097  5.0  98 12.4 0.20524017 0.5576923 0.22727273 #> 35   UCY035 4.7 2.91 0.174  8.1 113 17.8 0.54148472 0.7019231 0.46212121 #> 36   UCY036 4.1 2.92 0.219  4.8 114 14.4 0.73799127 0.7115385 0.21212121 #> 37   UCY037 5.1 3.00 0.173 10.1 118 15.5 0.53711790 0.7500000 0.61363636 #> 38   UCY038 5.5 4.28 0.093 11.3  81 13.1 0.18777293 0.3942308 0.70454545 #> 39   UCY039 5.5 2.60 0.128  2.0 136 10.2 0.34061135 0.9230769 0.00000000 #> 40   UCY040 4.6 2.95 0.167 11.7  85 11.4 0.51091703 0.4326923 0.73484848 #> 41   UCY041 4.6 3.85 0.118  4.3  92 11.2 0.29694323 0.5000000 0.17424242 #> 42   UCY042 4.8 3.75 0.050  9.4 130 10.6 0.00000000 0.8653846 0.56060606 #> 43   UCY043 6.4 3.83 0.194 10.0 127 14.1 0.62882096 0.8365385 0.60606061 #> 44   UCY044 4.3 2.28 0.109  7.4  68  8.4 0.25764192 0.2692308 0.40909091 #> 45   UCY045 5.1 4.60 0.121  6.1  73 14.6 0.31004367 0.3173077 0.31060606 #> 46   UCY046 6.7 2.86 0.225  8.5  61 14.6 0.76419214 0.2019231 0.49242424 #> 47   UCY047 5.1 4.48 0.111  9.3 100  8.4 0.26637555 0.5769231 0.55303030 #> 48   UCY048 4.1 1.58 0.192 10.6  99 13.9 0.62008734 0.5673077 0.65151515 #> 49   UCY049 4.7 2.82 0.087  2.0 104 19.3 0.16157205 0.6153846 0.00000000 #> 50   UCY050 5.6 3.92 0.132  3.1 109 10.3 0.35807860 0.6634615 0.08333333 #>     pH_scored  OM_scored       SQI #> 1  1.00000000 0.34065934 0.6628884 #> 2  0.72413793 0.29395604 0.3972668 #> 3  0.31034483 0.34890110 0.3898891 #> 4  0.51724138 0.45604396 0.5170120 #> 5  0.27586207 0.82967033 0.5403535 #> 6  0.24137931 0.41208791 0.2480284 #> 7  0.17241379 0.70054945 0.5156425 #> 8  0.20689655 0.59065934 0.4535506 #> 9  0.82758621 0.40659341 0.4308103 #> 10 0.37931034 0.05494505 0.4806739 #> 11 0.41379310 0.30494505 0.4840635 #> 12 0.44827586 0.31318681 0.4599416 #> 13 0.72413793 0.44505495 0.5853832 #> 14 0.24137931 0.75549451 0.5026394 #> 15 0.10344828 1.00000000 0.4704072 #> 16 0.82758621 0.81593407 0.5707682 #> 17 0.24137931 0.40109890 0.4610971 #> 18 0.17241379 0.00000000 0.3798386 #> 19 0.03448276 0.33791209 0.4241367 #> 20 0.03448276 0.45604396 0.3901212 #> 21 0.20689655 0.64285714 0.7341760 #> 22 0.55172414 0.67307692 0.4566605 #> 23 0.68965517 0.60439560 0.4653365 #> 24 0.58620690 0.08791209 0.5006835 #> 25 0.27586207 0.64285714 0.4475171 #> 26 0.37931034 0.32417582 0.3858645 #> 27 0.17241379 0.47802198 0.5622168 #> 28 0.17241379 0.45329670 0.3998856 #> 29 0.62068966 0.54120879 0.6070710 #> 30 0.10344828 0.43956044 0.2373237 #> 31 0.93103448 0.02197802 0.4691960 #> 32 0.34482759 0.61538462 0.5168419 #> 33 0.44827586 0.53021978 0.5646719 #> 34 0.17241379 0.36813187 0.3061502 #> 35 0.20689655 0.46428571 0.4753423 #> 36 0.00000000 0.46703297 0.4257368 #> 37 0.34482759 0.48901099 0.5469186 #> 38 0.48275862 0.84065934 0.5219934 #> 39 0.48275862 0.37912088 0.4251136 #> 40 0.17241379 0.47527473 0.4652293 #> 41 0.17241379 0.72252747 0.3732254 #> 42 0.24137931 0.69505495 0.4724850 #> 43 0.79310345 0.71703297 0.7163113 #> 44 0.06896552 0.29120879 0.2592276 #> 45 0.34482759 0.92857143 0.4422713 #> 46 0.89655172 0.45054945 0.5611281 #> 47 0.34482759 0.89560440 0.5273522 #> 48 0.00000000 0.09890110 0.3875623 #> 49 0.20689655 0.43956044 0.2846827 #> 50 0.51724138 0.74175824 0.4727746 #>  #> $pca #> Standard deviations (1, .., p=6): #> [1] 1.2017266 1.0469160 1.0156199 0.9785231 0.9083996 0.8035165 #>  #> Rotation (n x k) = (6 x 6): #>             PC1        PC2        PC3        PC4         PC5         PC6 #> pH  -0.04895981 -0.5700395  0.1154650 -0.7904182  0.18441227 -0.02359874 #> OM   0.44217933  0.2758787 -0.4027009 -0.1167926  0.73550006  0.10770122 #> N   -0.54756497  0.4423174  0.0590335 -0.2826793  0.05604688  0.64652461 #> P   -0.48824240  0.2012391 -0.5880626 -0.1952384 -0.05022056 -0.57850192 #> K   -0.23046074 -0.5905356 -0.5414652  0.3629924  0.06094813  0.41169512 #> CEC -0.45908625 -0.1186244  0.4266295  0.3343793  0.64471214 -0.25630475 #>  #> $loadings #>             PC1        PC2        PC3        PC4         PC5         PC6 #> pH  -0.04895981 -0.5700395  0.1154650 -0.7904182  0.18441227 -0.02359874 #> OM   0.44217933  0.2758787 -0.4027009 -0.1167926  0.73550006  0.10770122 #> N   -0.54756497  0.4423174  0.0590335 -0.2826793  0.05604688  0.64652461 #> P   -0.48824240  0.2012391 -0.5880626 -0.1952384 -0.05022056 -0.57850192 #> K   -0.23046074 -0.5905356 -0.5414652  0.3629924  0.06094813  0.41169512 #> CEC -0.45908625 -0.1186244  0.4266295  0.3343793  0.64471214 -0.25630475 #>  #> $var_exp #> [1] 0.2406911 0.1826722 0.1719140 0.1595846 0.1375316 0.1076065 #>  #> attr(,\"class\") #> [1] \"sqi_result\""},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"understanding-the-results","dir":"Articles","previous_headings":"Basic Workflow","what":"Understanding the Results","title":"Introduction to soilquality","text":"result object contains several components: Key components: mds: soil properties selected Minimum Data Set PCA weights: importance weight assigned MDS indicator CR: Consistency Ratio AHP (< 0.1 reliable weights) results: data frame original data, scored indicators, final SQI","code":"# Selected MDS indicators result$mds #> [1] \"N\"  \"K\"  \"P\"  \"pH\" \"OM\"  # Indicator weights result$weights #>   N   K   P  pH  OM  #> 0.2 0.2 0.2 0.2 0.2  # Consistency Ratio (for AHP) result$CR #> [1] 0  # View SQI values for first few samples head(result$results[, c(\"SampleID\", \"SQI\")]) #>   SampleID       SQI #> 1   UCY001 0.6628884 #> 2   UCY002 0.3972668 #> 3   UCY003 0.3898891 #> 4   UCY004 0.5170120 #> 5   UCY005 0.5403535 #> 6   UCY006 0.2480284"},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"interpreting-sqi-values","dir":"Articles","previous_headings":"Basic Workflow","what":"Interpreting SQI Values","title":"Introduction to soilquality","text":"SQI values range 0 1, : 0.8 - 1.0: Excellent soil quality 0.6 - 0.8: Good soil quality 0.4 - 0.6: Moderate soil quality 0.2 - 0.4: Poor soil quality 0.0 - 0.2: poor soil quality","code":"# Summary statistics of SQI summary(result$results$SQI) #>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.  #>  0.2373  0.4059  0.4673  0.4675  0.5207  0.7342  # Count samples by quality class sqi_values <- result$results$SQI quality_class <- cut(sqi_values,                       breaks = c(0, 0.2, 0.4, 0.6, 0.8, 1.0),                      labels = c(\"Very Poor\", \"Poor\", \"Moderate\",                                  \"Good\", \"Excellent\")) table(quality_class) #> quality_class #> Very Poor      Poor  Moderate      Good Excellent  #>         0        13        33         4         0"},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"visualization","dir":"Articles","previous_headings":"","what":"Visualization","title":"Introduction to soilquality","text":"package provides several visualization options help interpret results.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"sqi-distribution","dir":"Articles","previous_headings":"Visualization","what":"SQI Distribution","title":"Introduction to soilquality","text":"View distribution SQI values across samples:  histogram shows SQI values distributed, vertical line indicating mean SQI.","code":"plot(result, type = \"distribution\")"},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"indicator-scores","dir":"Articles","previous_headings":"Visualization","what":"Indicator Scores","title":"Introduction to soilquality","text":"Compare scores different indicators:  Boxplots show distribution scores MDS indicator, helping identify properties limiting soil quality.","code":"plot(result, type = \"indicators\")"},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"indicator-weights","dir":"Articles","previous_headings":"Visualization","what":"Indicator Weights","title":"Introduction to soilquality","text":"View relative importance indicator:  bar chart shows weight assigned indicator. Consistency Ratio (CR) displayed top.","code":"plot(result, type = \"weights\")"},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"pca-scree-plot","dir":"Articles","previous_headings":"Visualization","what":"PCA Scree Plot","title":"Introduction to soilquality","text":"Examine variance explained principal components:  plot helps understand much variance captured selected principal components.","code":"plot(result, type = \"scree\")"},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"comprehensive-report","dir":"Articles","previous_headings":"Visualization","what":"Comprehensive Report","title":"Introduction to soilquality","text":"Generate plots multi-panel layout:","code":"plot_sqi_report(result)"},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"using-pre-defined-property-sets","dir":"Articles","previous_headings":"","what":"Using Pre-defined Property Sets","title":"Introduction to soilquality","text":"package includes several pre-defined property sets common analyses: Available property sets: basic: Essential properties (pH, OM, P, K) standard: Common soil test properties comprehensive: Extended property list physical: Physical properties chemical: Chemical properties fertility: Fertility-related properties","code":"# Available property sets names(soil_property_sets) #> [1] \"basic\"         \"standard\"      \"comprehensive\" \"physical\"      #> [5] \"chemical\"      \"fertility\"  # View the standard property set soil_property_sets$standard #> [1] \"Sand\" \"Silt\" \"Clay\" \"pH\"   \"OM\"   \"N\"    \"P\"    \"K\"    \"CEC\"  # Use a pre-defined property set result_standard <- compute_sqi_properties(   data = soil_ucayali,   properties = soil_property_sets$standard,   id_column = \"SampleID\" )"},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"custom-property-selection","dir":"Articles","previous_headings":"","what":"Custom Property Selection","title":"Introduction to soilquality","text":"can also specify custom set properties:","code":"# Focus on physical properties physical_props <- c(\"Sand\", \"Silt\", \"Clay\", \"BD\")  result_physical <- compute_sqi_properties(   data = soil_ucayali,   properties = physical_props,   id_column = \"SampleID\" )  # View selected MDS result_physical$mds #> [1] \"Sand\" \"Clay\" \"BD\""},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Introduction to soilquality","text":"introduction covered basic workflow calculating SQI. learn : Advanced Usage: See vignette(\"advanced-usage\") custom scoring rules, property selection strategies, advanced visualization options AHP Matrices: See vignette(\"ahp-matrices\") creating expert-based indicator weights using Analytic Hierarchy Process Function Reference: Use help(package = \"soilquality\") browse available functions","code":""},{"path":"https://ccarbajal16.github.io/soilquality/articles/introduction.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Introduction to soilquality","text":"Andrews, S. S., Karlen, D. L., & Cambardella, C. . (2004). soil management assessment framework: quantitative soil quality evaluation method. Soil Science Society America Journal, 68(6), 1945-1962. Saaty, T. L. (1980). Analytic Hierarchy Process. McGraw-Hill. Shukla, M. K., Lal, R., & Ebinger, M. (2006). Determining soil quality indicators factor analysis. Soil Tillage Research, 87(2), 194-204.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Carlos Carbajal. Author, maintainer.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Carlos Carbajal (2025). soilquality: Soil Quality Index Calculation PCA AHP. R package version 1.0.0, https://github.com/ccarbajal16/soilquality.","code":"@Manual{,   title = {soilquality: Soil Quality Index Calculation with PCA and AHP},   author = {{Carlos Carbajal}},   year = {2025},   note = {R package version 1.0.0},   url = {https://github.com/ccarbajal16/soilquality}, }"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"soilquality: Soil Quality Index Calculation","text":"soilquality R package provides comprehensive tools calculating Soil Quality Index (SQI) using scientifically validated methods. package implements Principal Component Analysis (PCA) Minimum Data Set (MDS) selection Analytic Hierarchy Process (AHP) expert-based weighting, transforming complex soil property data standardized quality metrics.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"key-features","dir":"","previous_headings":"","what":"Key Features","title":"soilquality: Soil Quality Index Calculation","text":"Automated MDS Selection: PCA-based dimensionality reduction identify key soil indicators Expert Weighting System: AHP methodology consistency ratio validation Higher--better (e.g., organic matter, nutrients) Lower--better (e.g., bulk density, electrical conductivity) Optimal range (e.g., pH) Custom threshold-based scoring Pre-defined Property Sets: Standard collections common soil analyses (basic, standard, comprehensive, physical, chemical, fertility) Standard Scoring Rules: Automatic rule assignment based property patterns Comprehensive Visualization: Multiple plot types results interpretation Interactive Shiny Application: GUI non-programmers Complete Documentation: Vignettes, examples, function references","code":""},{"path":[]},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"using-pak-recommended","dir":"","previous_headings":"Installation > From GitHub (Development Version)","what":"Using pak (Recommended)","title":"soilquality: Soil Quality Index Calculation","text":"","code":"# Install pak if needed if (!requireNamespace(\"pak\", quietly = TRUE)) {   install.packages(\"pak\") }  # Install soilquality pak::pak(\"ccarbajal16/soilquality\")"},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"using-devtools","dir":"","previous_headings":"Installation > From GitHub (Development Version)","what":"Using devtools","title":"soilquality: Soil Quality Index Calculation","text":"","code":"# Install devtools if needed if (!requireNamespace(\"devtools\", quietly = TRUE)) {   install.packages(\"devtools\") }  # Install soilquality devtools::install_github(\"ccarbajal16/soilquality\")"},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"from-cran-stable-release","dir":"","previous_headings":"Installation","what":"From CRAN (Stable Release)","title":"soilquality: Soil Quality Index Calculation","text":"","code":"# Coming soon install.packages(\"soilquality\")"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"basic-workflow","dir":"","previous_headings":"Quick Start","what":"Basic Workflow","title":"soilquality: Soil Quality Index Calculation","text":"","code":"library(soilquality)  # Load example data data(soil_ucayali)  # Compute SQI with automatic property detection result <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"Sand\", \"Silt\", \"Clay\", \"pH\", \"OM\", \"P\", \"K\") )  # View results summary print(result)  # Visualize SQI distribution plot(result, type = \"distribution\")  # Create comprehensive report plot_sqi_report(result)"},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"using-pre-defined-property-sets","dir":"","previous_headings":"Quick Start","what":"Using Pre-defined Property Sets","title":"soilquality: Soil Quality Index Calculation","text":"","code":"# Use standard property set result <- compute_sqi_properties(   data = soil_ucayali,   properties = soil_property_sets$standard )"},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"custom-scoring-rules","dir":"","previous_headings":"Quick Start","what":"Custom Scoring Rules","title":"soilquality: Soil Quality Index Calculation","text":"","code":"# Define custom scoring for specific properties custom_rules <- list(   pH = optimum_range(optimal = 6.5, tolerance = 1),   OM = higher_better(),   BD = lower_better(),   P = threshold_scoring(     thresholds = c(0, 10, 20, 50),     scores = c(0, 0.5, 0.8, 1.0)   ) )  result <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"pH\", \"OM\", \"BD\", \"P\"),   scoring_rules = custom_rules )"},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"interactive-ahp-matrix-creation","dir":"","previous_headings":"Quick Start","what":"Interactive AHP Matrix Creation","title":"soilquality: Soil Quality Index Calculation","text":"","code":"# Create AHP matrix interactively indicators <- c(\"pH\", \"OM\", \"P\", \"K\") ahp_matrix <- create_ahp_matrix(indicators, mode = \"interactive\")  # Use computed AHP weights in SQI calculation result <- compute_sqi_properties(   data = soil_ucayali,   properties = ahp_matrix$indicators,   pairwise_matrix = ahp_matrix$weights )"},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"launch-interactive-application","dir":"","previous_headings":"Quick Start","what":"Launch Interactive Application","title":"soilquality: Soil Quality Index Calculation","text":"","code":"# Start Shiny app for GUI-based analysis run_sqi_app()"},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"data-handling","dir":"","previous_headings":"Main Functions","what":"Data Handling","title":"soilquality: Soil Quality Index Calculation","text":"read_soil_csv() - Import soil data CSV files standardize_numeric() - Z-score standardization numeric columns to_numeric() - Safe type conversion","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"pca-and-mds-selection","dir":"","previous_headings":"Main Functions","what":"PCA and MDS Selection","title":"soilquality: Soil Quality Index Calculation","text":"pca_select_mds() - PCA-based minimum data set selection","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"ahp-weighting","dir":"","previous_headings":"Main Functions","what":"AHP Weighting","title":"soilquality: Soil Quality Index Calculation","text":"ahp_weights() - Calculate weights pairwise comparison matrix create_ahp_matrix() - Interactive programmatic matrix creation ratio_to_saaty() - Convert importance ratios Saaty scale","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"scoring-functions","dir":"","previous_headings":"Main Functions","what":"Scoring Functions","title":"soilquality: Soil Quality Index Calculation","text":"score_higher_better() - Normalize properties higher better score_lower_better() - Normalize properties lower better score_optimum() - Normalize properties optimal range score_threshold() - Custom piecewise scoring score_indicators() - Apply scoring multiple indicators","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"scoring-constructors","dir":"","previous_headings":"Main Functions","what":"Scoring Constructors","title":"soilquality: Soil Quality Index Calculation","text":"higher_better() - Constructor higher--better rules lower_better() - Constructor lower--better rules optimum_range() - Constructor optimal range rules threshold_scoring() - Constructor threshold-based rules","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"property-sets-and-standard-rules","dir":"","previous_headings":"Main Functions","what":"Property Sets and Standard Rules","title":"soilquality: Soil Quality Index Calculation","text":"soil_property_sets - Pre-defined property collections standard_scoring_rules() - Automatic rule assignment","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"sqi-computation","dir":"","previous_headings":"Main Functions","what":"SQI Computation","title":"soilquality: Soil Quality Index Calculation","text":"compute_sqi() - File-based workflow compute_sqi_df() - -memory workflow compute_sqi_properties() - Enhanced workflow property selection","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"visualization","dir":"","previous_headings":"Main Functions","what":"Visualization","title":"soilquality: Soil Quality Index Calculation","text":"plot.sqi_result() - S3 plot method multiple types plot_sqi_report() - Multi-panel visualization report","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"interactive-tools","dir":"","previous_headings":"Main Functions","what":"Interactive Tools","title":"soilquality: Soil Quality Index Calculation","text":"run_sqi_app() - Launch Shiny application","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"soilquality: Soil Quality Index Calculation","text":"Comprehensive documentation available : Vignettes: Introduction soilquality - Basic workflow concepts Advanced Usage - Custom scoring property selection AHP Matrices Guide - Creating interpreting pairwise comparisons Function Reference: Access help function ?function_name Package Website: https://ccarbajal16.github.io/soilquality","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"soilquality: Soil Quality Index Calculation","text":"use package research, please cite : use: Carbajal, Carlos (2025). soilquality: Soil Quality Index Calculation PCA AHP. R package version 1.0.0. https://github.com/ccarbajal16/soilquality","code":"citation(\"soilquality\")"},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"soilquality: Soil Quality Index Calculation","text":"Contributions welcome! Please feel free submit Pull Request open Issue : Bug reports Feature requests Documentation improvements Code contributions","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"issues-and-support","dir":"","previous_headings":"","what":"Issues and Support","title":"soilquality: Soil Quality Index Calculation","text":"Please report issues : https://github.com/ccarbajal16/soilquality/issues questions discussions, use GitHub Discussions page.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"soilquality: Soil Quality Index Calculation","text":"package licensed MIT License. See LICENSE file details.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/index.html","id":"acknowledgments","dir":"","previous_headings":"","what":"Acknowledgments","title":"soilquality: Soil Quality Index Calculation","text":"package implements methodologies soil quality assessment literature, including PCA-based MDS selection AHP weighting approaches widely used soil science research.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/ahp_weights.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate AHP weights from pairwise comparison matrix — ahp_weights","title":"Calculate AHP weights from pairwise comparison matrix — ahp_weights","text":"function calculates indicator weights using Analytic Hierarchy Process (AHP) method based pairwise comparison matrix. computes weights using eigenvalue decomposition calculates Consistency Ratio (CR) assess logical consistency judgments.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/ahp_weights.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate AHP weights from pairwise comparison matrix — ahp_weights","text":"","code":"ahp_weights(pairwise, indicators = NULL)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/ahp_weights.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate AHP weights from pairwise comparison matrix — ahp_weights","text":"pairwise square numeric matrix pairwise comparisons element [,j] represents relative importance indicator compared indicator j. matrix must reciprocal ([,j] = 1/[j,]) diagonal values equal 1. indicators Optional character vector indicator names. NULL, uses row names pairwise matrix generates default names.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/ahp_weights.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate AHP weights from pairwise comparison matrix — ahp_weights","text":"list following components: weights Named numeric vector normalized weights summing 1 CR Consistency Ratio, measure logical consistency (< 0.1) lambda_max Maximum eigenvalue pairwise matrix","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/ahp_weights.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate AHP weights from pairwise comparison matrix — ahp_weights","text":"AHP method uses eigenvalue decomposition derive weights pairwise comparisons. Consistency Ratio (CR) calculated : $$CR = CI / RI$$ CI (Consistency Index) = (lambda_max - n) / (n - 1) RI Random Consistency Index depends matrix size. CR value less 0.1 indicates acceptable consistency. Values exceeding 0.1 suggest pairwise judgments may inconsistent revised.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/ahp_weights.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate AHP weights from pairwise comparison matrix — ahp_weights","text":"","code":"# Create a 3x3 pairwise comparison matrix pairwise <- matrix(c(   1,   3,   5,   1/3, 1,   2,   1/5, 1/2, 1 ), nrow = 3, byrow = TRUE)  # Calculate weights result <- ahp_weights(pairwise, indicators = c(\"pH\", \"OM\", \"P\")) print(result$weights) #>        pH        OM         P  #> 0.6483290 0.2296508 0.1220202  print(result$CR) #> [1] 0.003184998"},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Soil Quality Index from CSV file — compute_sqi","title":"Compute Soil Quality Index from CSV file — compute_sqi","text":"main file-based workflow function orchestrates complete SQI calculation pipeline. reads soil data CSV file, performs standardization, PCA-based MDS selection, AHP weighting, indicator scoring, calculates final Soil Quality Index.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Soil Quality Index from CSV file — compute_sqi","text":"","code":"compute_sqi(   input_csv,   id_column = NULL,   pairwise_csv = NULL,   output_csv = NULL,   directions = NULL,   var_threshold = 0.05,   loading_threshold = 0.5,   ... )"},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Soil Quality Index from CSV file — compute_sqi","text":"input_csv Character string specifying path input CSV file containing soil property data. file samples rows properties columns. id_column Optional character string specifying name ID column preserve output. NULL, ID column preserved. pairwise_csv Optional character string specifying path CSV file containing AHP pairwise comparison matrix. NULL, equal weights used indicators. output_csv Optional character string specifying path results saved CSV file. NULL, results saved. directions Optional named list specifying scoring functions indicator. NULL, indicators use higher--better scoring. var_threshold Numeric value PCA variance threshold (default 0.05). loading_threshold Numeric value PCA loading threshold (default 0.5). ... Additional arguments passed functions.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Soil Quality Index from CSV file — compute_sqi","text":"object class \"sqi_result\" containing: mds Character vector selected MDS indicators weights Named numeric vector AHP weights CR Consistency Ratio AHP results Data frame original data, scored indicators, SQI pca PCA object stats::prcomp loadings Matrix variable loadings var_exp Numeric vector variance explained PC","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Soil Quality Index from CSV file — compute_sqi","text":"function performs following steps: Read soil data CSV file Standardize numeric columns (z-score) Perform PCA select MDS indicators Calculate AHP weights (pairwise matrix equal weights) Score MDS indicator Calculate weighted SQI sum (weight * score) Optionally save results CSV","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Soil Quality Index from CSV file — compute_sqi","text":"","code":"if (FALSE) { # \\dontrun{ # Basic usage with CSV file result <- compute_sqi(   input_csv = \"soil_data.csv\",   id_column = \"SampleID\" )  # With AHP pairwise matrix result <- compute_sqi(   input_csv = \"soil_data.csv\",   id_column = \"SampleID\",   pairwise_csv = \"pairwise_matrix.csv\" )  # With custom scoring directions directions <- list(   pH = list(type = \"optimum\", optimum = 7, tol = 1.5, penalty = \"linear\"),   OM = list(type = \"higher\"),   BD = list(type = \"lower\") ) result <- compute_sqi(   input_csv = \"soil_data.csv\",   id_column = \"SampleID\",   directions = directions,   output_csv = \"sqi_results.csv\" ) } # }"},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Soil Quality Index from data frame — compute_sqi_df","title":"Compute Soil Quality Index from data frame — compute_sqi_df","text":"-memory workflow function orchestrates complete SQI calculation pipeline using data frames. performs standardization, PCA-based MDS selection, AHP weighting, indicator scoring, calculates final Soil Quality Index.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Soil Quality Index from data frame — compute_sqi_df","text":"","code":"compute_sqi_df(   df,   id_column = NULL,   pairwise_df = NULL,   directions = NULL,   var_threshold = 0.05,   loading_threshold = 0.5,   ... )"},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Soil Quality Index from data frame — compute_sqi_df","text":"df Data frame containing soil property data samples rows properties columns. id_column Optional character string specifying name ID column preserve output. NULL, ID column preserved. pairwise_df Optional pairwise comparison matrix (matrix data frame). NULL, equal weights used indicators. directions Optional named list specifying scoring functions indicator. NULL, indicators use higher--better scoring. var_threshold Numeric value PCA variance threshold (default 0.05). loading_threshold Numeric value PCA loading threshold (default 0.5). ... Additional arguments (currently unused).","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Soil Quality Index from data frame — compute_sqi_df","text":"object class \"sqi_result\" containing: mds Character vector selected MDS indicators weights Named numeric vector AHP weights CR Consistency Ratio AHP results Data frame original data, scored indicators, SQI pca PCA object stats::prcomp loadings Matrix variable loadings var_exp Numeric vector variance explained PC","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_df.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Soil Quality Index from data frame — compute_sqi_df","text":"function performs following steps: Preserve ID column specified Standardize numeric columns (z-score) Perform PCA select MDS indicators Calculate AHP weights (pairwise matrix equal weights) Score MDS indicator Calculate weighted SQI sum (weight * score)","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_df.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Soil Quality Index from data frame — compute_sqi_df","text":"","code":"# Create example data soil_data <- data.frame(   SampleID = paste0(\"S\", 1:20),   Sand = rnorm(20, 45, 10),   Silt = rnorm(20, 30, 5),   Clay = rnorm(20, 25, 5),   pH = rnorm(20, 6.5, 0.5),   OM = rnorm(20, 3, 0.5) )  # Compute SQI result <- compute_sqi_df(soil_data, id_column = \"SampleID\")  # View results head(result$results) #>   SampleID     Sand     Silt     Clay       pH       OM OM_scored Sand_scored #> 1       S1 44.94429 33.68888 23.74258 6.377052 3.278112 0.7394162  0.47286736 #> 2       S2 51.21553 39.44252 27.22399 5.911218 2.725871 0.4816739  0.63252067 #> 3       S3 56.48412 29.51277 38.77709 6.012075 3.555267 0.8687703  0.76664847 #> 4       S4 26.78182 25.32076 25.23266 7.032529 1.693833 0.0000000  0.01048713 #> 5       S5 42.52675 29.92025 27.88855 6.565835 2.922153 0.5732827  0.41132159 #> 6       S6 42.55800 25.86606 25.59097 6.744314 3.216945 0.7108681  0.41211733 #>   pH_scored Silt_scored       SQI #> 1 0.4011139   0.6970645 0.5776155 #> 2 0.1440168   1.0000000 0.5645528 #> 3 0.1996802   0.4771879 0.5780717 #> 4 0.7628767   0.2564740 0.2574594 #> 5 0.5053050   0.4986419 0.4971378 #> 6 0.6038090   0.2851842 0.5029947 print(result$mds) #> [1] \"OM\"   \"Sand\" \"pH\"   \"Silt\" print(result$weights) #>   OM Sand   pH Silt  #> 0.25 0.25 0.25 0.25"},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_properties.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Soil Quality Index with property selection — compute_sqi_properties","title":"Compute Soil Quality Index with property selection — compute_sqi_properties","text":"enhanced workflow function allows explicit property selection integrates scoring constructor functions. validates property selection, subsets data, orchestrates complete SQI calculation pipeline.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_properties.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Soil Quality Index with property selection — compute_sqi_properties","text":"","code":"compute_sqi_properties(   data,   properties = NULL,   id_column = NULL,   pairwise_matrix = NULL,   scoring_rules = NULL,   var_threshold = 0.05,   loading_threshold = 0.5,   ... )"},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_properties.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Soil Quality Index with property selection — compute_sqi_properties","text":"data Data frame containing soil property data samples rows properties columns. properties Optional character vector property names include analysis. NULL, numeric columns used automatically. id_column Optional character string specifying name ID column preserve output. NULL, ID column preserved. pairwise_matrix Optional pairwise comparison matrix (matrix data frame). NULL, equal weights used indicators. scoring_rules Optional named list scoring_rule objects created constructor functions (higher_better, lower_better, optimum_range, threshold_scoring). NULL, indicators use higher--better scoring. var_threshold Numeric value PCA variance threshold (default 0.05). loading_threshold Numeric value PCA loading threshold (default 0.5). ... Additional arguments (currently unused).","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_properties.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Soil Quality Index with property selection — compute_sqi_properties","text":"object class \"sqi_result\" containing: mds Character vector selected MDS indicators weights Named numeric vector AHP weights CR Consistency Ratio AHP results Data frame original data, scored indicators, SQI pca PCA object stats::prcomp loadings Matrix variable loadings var_exp Numeric vector variance explained PC","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_properties.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Soil Quality Index with property selection — compute_sqi_properties","text":"function performs following steps: Validate specified properties exist data Subset data selected properties plus ID column Convert scoring_rule objects directions list Call compute_sqi_df() perform analysis properties NULL, function automatically detects uses numeric columns data.","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/compute_sqi_properties.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Soil Quality Index with property selection — compute_sqi_properties","text":"","code":"# Create example data soil_data <- data.frame(   SampleID = paste0(\"S\", 1:20),   Sand = rnorm(20, 45, 10),   Silt = rnorm(20, 30, 5),   Clay = rnorm(20, 25, 5),   pH = rnorm(20, 6.5, 0.5),   OM = rnorm(20, 3, 0.5),   BD = rnorm(20, 1.4, 0.1) )  # Select specific properties result <- compute_sqi_properties(   data = soil_data,   properties = c(\"pH\", \"OM\", \"BD\"),   id_column = \"SampleID\" )  # With custom scoring rules rules <- list(   pH = optimum_range(optimal = 7, tolerance = 1.5),   OM = higher_better(),   BD = lower_better() ) result <- compute_sqi_properties(   data = soil_data,   properties = c(\"pH\", \"OM\", \"BD\"),   id_column = \"SampleID\",   scoring_rules = rules )  # Use standard scoring rules for available properties result <- compute_sqi_properties(   data = soil_data,   properties = c(\"pH\", \"OM\"),   id_column = \"SampleID\",   scoring_rules = standard_scoring_rules(c(\"pH\", \"OM\")) )"},{"path":"https://ccarbajal16.github.io/soilquality/reference/create_ahp_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Create AHP pairwise comparison matrix interactively — create_ahp_matrix","title":"Create AHP pairwise comparison matrix interactively — create_ahp_matrix","text":"function creates AHP pairwise comparison matrix interactive prompts provided matrix. interactive mode, guides user pairwise comparisons indicators, validates inputs, calculates weights, returns structured ahp_matrix object.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/create_ahp_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create AHP pairwise comparison matrix interactively — create_ahp_matrix","text":"","code":"create_ahp_matrix(indicators, mode = \"interactive\", pairwise = NULL)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/create_ahp_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create AHP pairwise comparison matrix interactively — create_ahp_matrix","text":"indicators Character vector indicator names compared. mode Character string specifying mode: \"interactive\" guided prompts (default) \"matrix\" provide pre-built matrix. pairwise Optional pre-built pairwise comparison matrix (used mode = \"matrix\"). Must square matrix dimensions matching number indicators.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/create_ahp_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create AHP pairwise comparison matrix interactively — create_ahp_matrix","text":"object class \"ahp_matrix\" containing: indicators Character vector indicator names matrix Numeric matrix pairwise comparisons weights Named numeric vector normalized weights CR Consistency Ratio lambda_max Maximum eigenvalue","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/create_ahp_matrix.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create AHP pairwise comparison matrix interactively — create_ahp_matrix","text":"interactive mode, function displays Saaty scale prompts pairwise comparisons indicator pairs. Saaty scale : 1 = Equal importance 3 = Moderate importance first second 5 = Strong importance first second 7 = strong importance first second 9 = Extreme importance first second 2, 4, 6, 8 = Intermediate values 1/3, 1/5, 1/7, 1/9 = Reciprocal values (second important) Users can enter values decimals (e.g., 0.333) fractions (e.g., \"1/3\"). function validates inputs within valid range (1/9 9). collecting comparisons, function calculates weights using eigenvalue decomposition computes Consistency Ratio (CR). CR > 0.1, warning displayed indicating inconsistent judgments.","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/create_ahp_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create AHP pairwise comparison matrix interactively — create_ahp_matrix","text":"","code":"if (FALSE) { # \\dontrun{ # Interactive mode - prompts user for comparisons ahp_result <- create_ahp_matrix(c(\"pH\", \"OM\", \"P\")) print(ahp_result) } # }  # Matrix mode - provide pre-built matrix pairwise <- matrix(c(   1,   3,   5,   1/3, 1,   2,   1/5, 1/2, 1 ), nrow = 3, byrow = TRUE) ahp_result <- create_ahp_matrix(   indicators = c(\"pH\", \"OM\", \"P\"),   mode = \"matrix\",   pairwise = pairwise ) print(ahp_result) #>  #> === AHP Pairwise Comparison Matrix === #>  #> Pairwise Comparison Matrix: #>       pH  OM P #> pH 1.000 3.0 5 #> OM 0.333 1.0 2 #> P  0.200 0.5 1 #>  #> Indicator Weights: #>   pH             : 0.6483 #>   OM             : 0.2297 #>   P              : 0.1220 #>  #> Consistency Information: #>   Lambda Max: 3.0037 #>   Consistency Ratio (CR): 0.0032 [✓ Acceptable] #>"},{"path":"https://ccarbajal16.github.io/soilquality/reference/higher_better.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a higher-is-better scoring rule — higher_better","title":"Create a higher-is-better scoring rule — higher_better","text":"Creates scoring rule object indicators higher values indicate better soil quality. rule normalize values using min-max normalization: (x - min) / (max - min).","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/higher_better.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a higher-is-better scoring rule — higher_better","text":"","code":"higher_better(min_value = NULL, max_value = NULL)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/higher_better.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a higher-is-better scoring rule — higher_better","text":"min_value Optional minimum value normalization. NULL, minimum calculated data. max_value Optional maximum value normalization. NULL, maximum calculated data.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/higher_better.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a higher-is-better scoring rule — higher_better","text":"scoring_rule object class c(\"scoring_rule\", \"higher_better\")","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/higher_better.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a higher-is-better scoring rule — higher_better","text":"","code":"# Create a rule for organic matter (higher is better) om_rule <- higher_better()  # With custom min/max values om_rule <- higher_better(min_value = 0, max_value = 5)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/lower_better.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a lower-is-better scoring rule — lower_better","title":"Create a lower-is-better scoring rule — lower_better","text":"Creates scoring rule object indicators lower values indicate better soil quality. rule normalize values using inverted min-max normalization: (max - x) / (max - min).","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/lower_better.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a lower-is-better scoring rule — lower_better","text":"","code":"lower_better(min_value = NULL, max_value = NULL)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/lower_better.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a lower-is-better scoring rule — lower_better","text":"min_value Optional minimum value normalization. NULL, minimum calculated data. max_value Optional maximum value normalization. NULL, maximum calculated data.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/lower_better.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a lower-is-better scoring rule — lower_better","text":"scoring_rule object class c(\"scoring_rule\", \"lower_better\")","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/lower_better.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a lower-is-better scoring rule — lower_better","text":"","code":"# Create a rule for bulk density (lower is better) bd_rule <- lower_better()  # With custom min/max values bd_rule <- lower_better(min_value = 1.0, max_value = 1.8)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/optimum_range.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an optimum range scoring rule — optimum_range","title":"Create an optimum range scoring rule — optimum_range","text":"Creates scoring rule object indicators values near optimum best. rule normalize values based distance optimum, scores decreasing linearly quadratically values move away optimum.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/optimum_range.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an optimum range scoring rule — optimum_range","text":"","code":"optimum_range(optimal, tolerance = 1, penalty = \"linear\")"},{"path":"https://ccarbajal16.github.io/soilquality/reference/optimum_range.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an optimum range scoring rule — optimum_range","text":"optimal optimal value indicator tolerance distance optimal score reaches 0. Must positive number. penalty Type penalty function: \"linear\" (default) \"quadratic\". Linear penalty decreases score proportionally distance, quadratic penalty forgiving near optimum.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/optimum_range.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an optimum range scoring rule — optimum_range","text":"scoring_rule object class c(\"scoring_rule\", \"optimum_range\")","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/optimum_range.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create an optimum range scoring rule — optimum_range","text":"","code":"# Create a rule for pH (optimum around 7) ph_rule <- optimum_range(optimal = 7, tolerance = 1.5)  # With quadratic penalty for more gradual decrease ph_rule <- optimum_range(optimal = 7, tolerance = 1.5,                          penalty = \"quadratic\")"},{"path":"https://ccarbajal16.github.io/soilquality/reference/pca_select_mds.html","id":null,"dir":"Reference","previous_headings":"","what":"Select Minimum Data Set (MDS) Using PCA — pca_select_mds","title":"Select Minimum Data Set (MDS) Using PCA — pca_select_mds","text":"Performs Principal Component Analysis (PCA) soil property data selects minimum data set (MDS) indicators based variance loading thresholds. function implements PCA-based MDS selection methodology commonly used soil quality assessment.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/pca_select_mds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Select Minimum Data Set (MDS) Using PCA — pca_select_mds","text":"","code":"pca_select_mds(data, var_threshold = 0.05, loading_threshold = 0.5)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/pca_select_mds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Select Minimum Data Set (MDS) Using PCA — pca_select_mds","text":"data data frame containing standardized soil property measurements. columns numeric. recommended standardize data using standardize_numeric applying PCA. var_threshold Numeric value specifying minimum proportion variance principal component must explain retained. Components variance threshold excluded MDS selection. Default 0.05 (5%). loading_threshold Numeric value specifying minimum absolute loading value variable considered selection within principal component. Variables absolute loadings threshold selected. Default 0.5.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/pca_select_mds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Select Minimum Data Set (MDS) Using PCA — pca_select_mds","text":"list following components: mds Character vector selected variable names representing       minimum data set. pca PCA object returned stats::prcomp, containing       full PCA results including rotation matrix, scores,       components. loadings Numeric matrix variable loadings (rotation matrix)       principal components. var_exp Numeric vector containing proportion variance       explained principal component.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/pca_select_mds.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Select Minimum Data Set (MDS) Using PCA — pca_select_mds","text":"MDS selection algorithm follows steps: Perform PCA using stats::prcomp scaling disabled     (data pre-standardized). Calculate proportion variance explained PC. Identify PCs explain variance greater var_threshold. retained PC, identify variable maximum     absolute loading exceeds loading_threshold. Return unique set selected variables MDS. variables meet selection criteria, empty character vector returned MDS component.","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/pca_select_mds.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Select Minimum Data Set (MDS) Using PCA — pca_select_mds","text":"","code":"# Create example soil data soil_data <- data.frame(   Sand = c(45, 50, 42, 48, 52, 38, 44, 49),   Silt = c(30, 28, 35, 32, 25, 40, 33, 29),   Clay = c(25, 22, 23, 20, 23, 22, 23, 22),   pH = c(6.5, 7.0, 6.8, 7.2, 6.9, 6.7, 7.1, 6.6),   OM = c(3.2, 2.8, 3.5, 3.0, 2.9, 3.3, 3.1, 3.4) )  # Standardize the data first soil_std <- standardize_numeric(soil_data)  # Select MDS using PCA result <- pca_select_mds(soil_std)  # View selected indicators print(result$mds) #> [1] \"Sand\" \"Clay\"  # View variance explained print(result$var_exp) #> [1] 5.364949e-01 3.191878e-01 1.052890e-01 3.902825e-02 2.001949e-33  # Use custom thresholds result2 <- pca_select_mds(soil_std,                           var_threshold = 0.10,                           loading_threshold = 0.6)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot.sqi_result.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot SQI Results — plot.sqi_result","title":"Plot SQI Results — plot.sqi_result","text":"S3 plot method sqi_result objects. Provides multiple visualization types explore communicate Soil Quality Index results analysis components.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot.sqi_result.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot SQI Results — plot.sqi_result","text":"","code":"# S3 method for class 'sqi_result' plot(   x,   type = c(\"distribution\", \"indicators\", \"weights\", \"scree\", \"biplot\"),   ... )"},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot.sqi_result.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot SQI Results — plot.sqi_result","text":"x object class \"sqi_result\" returned compute_sqi, compute_sqi_df, compute_sqi_properties. type Character string specifying plot type. Options : \"distribution\" Histogram SQI values mean line \"indicators\" Boxplots indicator scores \"weights\" Bar chart AHP weights CR annotation \"scree\" Variance explained PCs cumulative line \"biplot\" PCA biplot observations variables ... Additional graphical parameters passed plotting functions.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot.sqi_result.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot SQI Results — plot.sqi_result","text":"NULL (invisibly). function called side effect   creating plot.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot.sqi_result.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot SQI Results — plot.sqi_result","text":"function creates different visualizations based type parameter: Distribution Plot: Shows distribution SQI values across samples using histogram. vertical line indicates mean SQI. Indicators Plot: Displays boxplots scored indicator, allowing comparison score distributions across different soil properties. Weights Plot: Shows AHP weights assigned indicator bar chart. Consistency Ratio (CR) annotated plot. Scree Plot: Displays proportion variance explained principal component, individual (bars) cumulative (line) variance shown. Biplot: Creates PCA biplot showing observations (points) variable loadings (arrows), useful understanding relationships samples soil properties.","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot.sqi_result.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot SQI Results — plot.sqi_result","text":"","code":"# Create example data soil_data <- data.frame(   SampleID = paste0(\"S\", 1:20),   Sand = rnorm(20, 45, 10),   Silt = rnorm(20, 30, 5),   Clay = rnorm(20, 25, 5),   pH = rnorm(20, 6.5, 0.5),   OM = rnorm(20, 3, 0.5) )  # Compute SQI result <- compute_sqi_df(soil_data, id_column = \"SampleID\")  # Distribution plot plot(result, type = \"distribution\")   # Indicators plot plot(result, type = \"indicators\")   # Weights plot plot(result, type = \"weights\")   # Scree plot plot(result, type = \"scree\")   # Biplot plot(result, type = \"biplot\")"},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot_sqi_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Multi-Panel SQI Report — plot_sqi_report","title":"Create Multi-Panel SQI Report — plot_sqi_report","text":"Creates comprehensive 2x2 multi-panel visualization showing multiple aspects SQI analysis results. function provides quick overview analysis displaying distribution, indicators, weights, scree plots together.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot_sqi_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Multi-Panel SQI Report — plot_sqi_report","text":"","code":"plot_sqi_report(sqi_result, ...)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot_sqi_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Multi-Panel SQI Report — plot_sqi_report","text":"sqi_result object class \"sqi_result\" returned compute_sqi, compute_sqi_df, compute_sqi_properties. ... Additional graphical parameters passed individual plot functions.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot_sqi_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Multi-Panel SQI Report — plot_sqi_report","text":"NULL (invisibly). function called side effect   creating multi-panel plot.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot_sqi_report.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create Multi-Panel SQI Report — plot_sqi_report","text":"function creates 2x2 grid layout containing: Top-left: SQI distribution histogram Top-right: Indicator scores boxplots Bottom-left: AHP weights bar chart Bottom-right: PCA scree plot graphics parameters automatically saved restored plotting, function affect subsequent plots.","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/plot_sqi_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Multi-Panel SQI Report — plot_sqi_report","text":"","code":"# Create example data soil_data <- data.frame(   SampleID = paste0(\"S\", 1:20),   Sand = rnorm(20, 45, 10),   Silt = rnorm(20, 30, 5),   Clay = rnorm(20, 25, 5),   pH = rnorm(20, 6.5, 0.5),   OM = rnorm(20, 3, 0.5) )  # Compute SQI result <- compute_sqi_df(soil_data, id_column = \"SampleID\")  # Create comprehensive report plot_sqi_report(result)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/print.ahp_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Print method for ahp_matrix objects — print.ahp_matrix","title":"Print method for ahp_matrix objects — print.ahp_matrix","text":"Displays formatted summary AHP pairwise comparison matrix including matrix , calculated weights, consistency information.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/print.ahp_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print method for ahp_matrix objects — print.ahp_matrix","text":"","code":"# S3 method for class 'ahp_matrix' print(x, ...)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/print.ahp_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print method for ahp_matrix objects — print.ahp_matrix","text":"x object class \"ahp_matrix\" created create_ahp_matrix. ... Additional arguments passed print methods (currently unused).","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/print.ahp_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print method for ahp_matrix objects — print.ahp_matrix","text":"Invisibly returns input object.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/print.ahp_matrix.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Print method for ahp_matrix objects — print.ahp_matrix","text":"print method displays: pairwise comparison matrix indicator names Normalized weights indicator Consistency Ratio (CR) status indicator Maximum eigenvalue (lambda_max) consistency status shows checkmark (✓) CR <= 0.1 (acceptable consistency) X (✗) CR > 0.1 (inconsistent judgments).","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/print.ahp_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Print method for ahp_matrix objects — print.ahp_matrix","text":"","code":"# Create an AHP matrix pairwise <- matrix(c(   1,   3,   5,   1/3, 1,   2,   1/5, 1/2, 1 ), nrow = 3, byrow = TRUE) ahp_result <- create_ahp_matrix(   indicators = c(\"pH\", \"OM\", \"P\"),   mode = \"matrix\",   pairwise = pairwise )  # Print the result print(ahp_result) #>  #> === AHP Pairwise Comparison Matrix === #>  #> Pairwise Comparison Matrix: #>       pH  OM P #> pH 1.000 3.0 5 #> OM 0.333 1.0 2 #> P  0.200 0.5 1 #>  #> Indicator Weights: #>   pH             : 0.6483 #>   OM             : 0.2297 #>   P              : 0.1220 #>  #> Consistency Information: #>   Lambda Max: 3.0037 #>   Consistency Ratio (CR): 0.0032 [✓ Acceptable] #>"},{"path":"https://ccarbajal16.github.io/soilquality/reference/print.scoring_rule.html","id":null,"dir":"Reference","previous_headings":"","what":"Print method for scoring_rule objects — print.scoring_rule","title":"Print method for scoring_rule objects — print.scoring_rule","text":"Print method scoring_rule objects","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/print.scoring_rule.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print method for scoring_rule objects — print.scoring_rule","text":"","code":"# S3 method for class 'scoring_rule' print(x, ...)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/print.scoring_rule.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print method for scoring_rule objects — print.scoring_rule","text":"x scoring_rule object ... Additional arguments (used)","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/print.scoring_rule.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print method for scoring_rule objects — print.scoring_rule","text":"Invisibly returns input object","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/ratio_to_saaty.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert importance ratios to Saaty pairwise comparison matrix — ratio_to_saaty","title":"Convert importance ratios to Saaty pairwise comparison matrix — ratio_to_saaty","text":"helper function converts vector importance ratios pairwise comparison matrix following Saaty scale (1-9). ratios represent relative importance indicator compared baseline.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/ratio_to_saaty.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert importance ratios to Saaty pairwise comparison matrix — ratio_to_saaty","text":"","code":"ratio_to_saaty(ratios)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/ratio_to_saaty.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert importance ratios to Saaty pairwise comparison matrix — ratio_to_saaty","text":"ratios Numeric vector importance ratios. value represents many times important indicator compared baseline. Values positive numbers.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/ratio_to_saaty.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert importance ratios to Saaty pairwise comparison matrix — ratio_to_saaty","text":"square numeric matrix pairwise comparisons element [,j]   represents relative importance indicator compared indicator j.   matrix reciprocal diagonal values equal 1.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/ratio_to_saaty.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert importance ratios to Saaty pairwise comparison matrix — ratio_to_saaty","text":"function constructs pairwise comparison matrix importance ratios calculating ratio pair indicators. indicators ratios r_i r_j, pairwise comparison r_i / r_j. Saaty scale typically uses values 1/9 9, : 1 = Equal importance 3 = Moderate importance 5 = Strong importance 7 = strong importance 9 = Extreme importance 2, 4, 6, 8 = Intermediate values","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/ratio_to_saaty.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert importance ratios to Saaty pairwise comparison matrix — ratio_to_saaty","text":"","code":"# Three indicators with importance ratios 5:3:1 ratios <- c(5, 3, 1) pairwise <- ratio_to_saaty(ratios) print(pairwise) #>      [,1]      [,2] [,3] #> [1,]  1.0 1.6666667    5 #> [2,]  0.6 1.0000000    3 #> [3,]  0.2 0.3333333    1  # Calculate weights from the matrix result <- ahp_weights(pairwise, indicators = c(\"pH\", \"OM\", \"P\"))"},{"path":"https://ccarbajal16.github.io/soilquality/reference/read_soil_csv.html","id":null,"dir":"Reference","previous_headings":"","what":"Read Soil Data from CSV File — read_soil_csv","title":"Read Soil Data from CSV File — read_soil_csv","text":"Reads soil property data CSV file automatic encoding handling. function designed handle various CSV formats commonly used soil science research.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/read_soil_csv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read Soil Data from CSV File — read_soil_csv","text":"","code":"read_soil_csv(path)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/read_soil_csv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read Soil Data from CSV File — read_soil_csv","text":"path Character string specifying path CSV file. file contain soil property measurements samples rows properties columns.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/read_soil_csv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read Soil Data from CSV File — read_soil_csv","text":"data frame containing soil data CSV file.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/read_soil_csv.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read Soil Data from CSV File — read_soil_csv","text":"","code":"if (FALSE) { # \\dontrun{ # Read soil data from a CSV file soil_data <- read_soil_csv(\"path/to/soil_data.csv\")  # View the structure str(soil_data) } # }"},{"path":"https://ccarbajal16.github.io/soilquality/reference/run_sqi_app.html","id":null,"dir":"Reference","previous_headings":"","what":"Launch Interactive Soil Quality Index Calculator — run_sqi_app","title":"Launch Interactive Soil Quality Index Calculator — run_sqi_app","text":"Launches Shiny web application provides interactive graphical interface computing Soil Quality Index (SQI). app allows users upload data, select properties, configure scoring rules, visualize results without writing code.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/run_sqi_app.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Launch Interactive Soil Quality Index Calculator — run_sqi_app","text":"","code":"run_sqi_app(launch.browser = TRUE, ...)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/run_sqi_app.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Launch Interactive Soil Quality Index Calculator — run_sqi_app","text":"launch.browser Logical value indicating whether launch app system's default web browser. TRUE (default), app opens browser window. FALSE, app URL printed console can opened manually. ... Additional arguments passed shiny::runApp(), port specify custom port number, host specify host IP address.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/run_sqi_app.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Launch Interactive Soil Quality Index Calculator — run_sqi_app","text":"function return value. runs Shiny   application user stops (typically closing browser   window pressing Ctrl+C R console).","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/run_sqi_app.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Launch Interactive Soil Quality Index Calculator — run_sqi_app","text":"Shiny application provides following features: File upload soil data CSV files Property selection (auto-detect, pre-defined sets, custom) Scoring rule configuration (standard rules higher-better) AHP weight specification (equal weights upload matrix) Interactive results display summary statistics Multiple visualization types (distribution, indicators, weights,     scree plot) Download results CSV file app located package's inst/shiny/ directory automatically installed package. app directory found, error raised indicating improper installation. stop app, close browser window press Ctrl+C (Esc) R console, click stop button RStudio.","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/run_sqi_app.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Launch Interactive Soil Quality Index Calculator — run_sqi_app","text":"","code":"if (FALSE) { # \\dontrun{ # Launch the app in default browser run_sqi_app()  # Launch without opening browser (print URL only) run_sqi_app(launch.browser = FALSE)  # Launch on a specific port run_sqi_app(port = 8080) } # }"},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_higher_better.html","id":null,"dir":"Reference","previous_headings":"","what":"Score indicator with higher-is-better normalization — score_higher_better","title":"Score indicator with higher-is-better normalization — score_higher_better","text":"Normalizes values [0,1] range higher values indicate better quality. Uses min-max normalization: (x - min) / (max - min).","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_higher_better.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Score indicator with higher-is-better normalization — score_higher_better","text":"","code":"score_higher_better(x, min_val = NULL, max_val = NULL)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_higher_better.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Score indicator with higher-is-better normalization — score_higher_better","text":"x Numeric vector indicator values min_val Minimum value normalization. NULL, uses min(x, na.rm = TRUE) max_val Maximum value normalization. NULL, uses max(x, na.rm = TRUE)","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_higher_better.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Score indicator with higher-is-better normalization — score_higher_better","text":"Numeric vector scores [0,1] range","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_higher_better.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Score indicator with higher-is-better normalization — score_higher_better","text":"","code":"# Higher organic matter is better om_values <- c(1.5, 2.0, 2.5, 3.0, 3.5) score_higher_better(om_values) #> [1] 0.00 0.25 0.50 0.75 1.00  # With custom min/max score_higher_better(om_values, min_val = 1, max_val = 4) #> [1] 0.1666667 0.3333333 0.5000000 0.6666667 0.8333333"},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_indicators.html","id":null,"dir":"Reference","previous_headings":"","what":"Score multiple indicators using specified scoring functions — score_indicators","title":"Score multiple indicators using specified scoring functions — score_indicators","text":"Applies appropriate scoring functions MDS indicator variable based directions specification.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_indicators.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Score multiple indicators using specified scoring functions — score_indicators","text":"","code":"score_indicators(data, mds, directions)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_indicators.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Score multiple indicators using specified scoring functions — score_indicators","text":"data Data frame containing indicator values mds Character vector MDS indicator names score directions Named list specifying scoring function indicator. element list 'type' parameters: - type = \"higher\": uses score_higher_better() - type = \"lower\": uses score_lower_better() - type = \"optimum\": uses score_optimum() (requires optimum, tol, penalty) - type = \"threshold\": uses score_threshold() (requires thresholds, scores)","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_indicators.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Score multiple indicators using specified scoring functions — score_indicators","text":"Data frame original columns plus scored columns (suffixed \"_scored\")","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_indicators.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Score multiple indicators using specified scoring functions — score_indicators","text":"","code":"if (FALSE) { # \\dontrun{ data <- data.frame(   ID = 1:5,   OM = c(1.5, 2.0, 2.5, 3.0, 3.5),   pH = c(5.5, 6.0, 6.5, 7.0, 7.5),   BD = c(1.2, 1.3, 1.4, 1.5, 1.6) )  directions <- list(   OM = list(type = \"higher\"),   pH = list(type = \"optimum\", optimum = 7, tol = 1.5, penalty = \"linear\"),   BD = list(type = \"lower\") )  scored_data <- score_indicators(data, c(\"OM\", \"pH\", \"BD\"), directions) } # }"},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_lower_better.html","id":null,"dir":"Reference","previous_headings":"","what":"Score indicator with lower-is-better normalization — score_lower_better","title":"Score indicator with lower-is-better normalization — score_lower_better","text":"Normalizes values [0,1] range lower values indicate better quality. Uses inverted min-max normalization: (max - x) / (max - min).","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_lower_better.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Score indicator with lower-is-better normalization — score_lower_better","text":"","code":"score_lower_better(x, min_val = NULL, max_val = NULL)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_lower_better.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Score indicator with lower-is-better normalization — score_lower_better","text":"x Numeric vector indicator values min_val Minimum value normalization. NULL, uses min(x, na.rm = TRUE) max_val Maximum value normalization. NULL, uses max(x, na.rm = TRUE)","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_lower_better.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Score indicator with lower-is-better normalization — score_lower_better","text":"Numeric vector scores [0,1] range","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_lower_better.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Score indicator with lower-is-better normalization — score_lower_better","text":"","code":"# Lower bulk density is better bd_values <- c(1.2, 1.3, 1.4, 1.5, 1.6) score_lower_better(bd_values) #> [1] 1.00 0.75 0.50 0.25 0.00  # With custom min/max score_lower_better(bd_values, min_val = 1.0, max_val = 1.8) #> [1] 0.750 0.625 0.500 0.375 0.250"},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_optimum.html","id":null,"dir":"Reference","previous_headings":"","what":"Score indicator with optimum range — score_optimum","title":"Score indicator with optimum range — score_optimum","text":"Normalizes values [0,1] range values near optimum best. Uses linear quadratic penalty based distance optimum.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_optimum.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Score indicator with optimum range — score_optimum","text":"","code":"score_optimum(x, optimum, tol, penalty = \"linear\")"},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_optimum.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Score indicator with optimum range — score_optimum","text":"x Numeric vector indicator values optimum Optimal value indicator tol Tolerance around optimum (distance score reaches 0) penalty Type penalty function: \"linear\" \"quadratic\"","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_optimum.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Score indicator with optimum range — score_optimum","text":"Numeric vector scores [0,1] range","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_optimum.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Score indicator with optimum range — score_optimum","text":"","code":"# pH optimum around 7 ph_values <- c(5.5, 6.0, 6.5, 7.0, 7.5, 8.0, 8.5) score_optimum(ph_values, optimum = 7, tol = 1.5) #> [1] 0.0000000 0.3333333 0.6666667 1.0000000 0.6666667 0.3333333 0.0000000  # With quadratic penalty score_optimum(ph_values, optimum = 7, tol = 1.5, penalty = \"quadratic\") #> [1] 0.0000000 0.5555556 0.8888889 1.0000000 0.8888889 0.5555556 0.0000000"},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_threshold.html","id":null,"dir":"Reference","previous_headings":"","what":"Score indicator with threshold-based piecewise interpolation — score_threshold","title":"Score indicator with threshold-based piecewise interpolation — score_threshold","text":"Normalizes values [0,1] range using piecewise linear interpolation specified threshold-score pairs.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_threshold.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Score indicator with threshold-based piecewise interpolation — score_threshold","text":"","code":"score_threshold(x, thresholds, scores)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_threshold.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Score indicator with threshold-based piecewise interpolation — score_threshold","text":"x Numeric vector indicator values thresholds Numeric vector threshold values (must sorted) scores Numeric vector scores corresponding thresholds","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_threshold.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Score indicator with threshold-based piecewise interpolation — score_threshold","text":"Numeric vector scores [0,1] range","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/score_threshold.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Score indicator with threshold-based piecewise interpolation — score_threshold","text":"","code":"# Custom threshold scoring for phosphorus p_values <- c(5, 10, 15, 20, 25, 30, 35) thresholds <- c(0, 10, 20, 30) scores <- c(0, 0.5, 1.0, 1.0) score_threshold(p_values, thresholds, scores) #> [1] 0.25 0.50 0.75 1.00 1.00 1.00 1.00"},{"path":"https://ccarbajal16.github.io/soilquality/reference/soil_property_sets.html","id":null,"dir":"Reference","previous_headings":"","what":"Pre-defined soil property sets — soil_property_sets","title":"Pre-defined soil property sets — soil_property_sets","text":"list containing pre-defined sets soil properties commonly used soil quality assessments. sets can used standard_scoring_rules function quickly configure analyses different scenarios.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/soil_property_sets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pre-defined soil property sets — soil_property_sets","text":"","code":"soil_property_sets"},{"path":"https://ccarbajal16.github.io/soilquality/reference/soil_property_sets.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Pre-defined soil property sets — soil_property_sets","text":"named list following property sets: basic minimal set 4 fundamental soil properties: pH,     organic matter (OM), phosphorus (P), potassium (K). Suitable     quick assessments limited data. standard comprehensive set 9 commonly measured properties:     Sand, Silt, Clay, pH, OM, nitrogen (N), P, K, cation exchange     capacity (CEC). Recommended soil quality assessments. comprehensive extensive set 15 properties including     standard properties plus bulk density (BD), electrical conductivity     (EC), calcium (Ca), magnesium (Mg), sodium (Na), sulfur (S).     Suitable detailed soil characterization. physical Physical properties : Sand, Silt, Clay, BD.     Focuses soil structure texture characteristics. chemical Chemical properties : pH, EC, CEC, Ca, Mg, K, Na.     Focuses soil chemistry nutrient availability. fertility Fertility-related properties: OM, N, P, K, Ca, Mg, S,     CEC. Focuses nutrient supply retention capacity.","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/soil_property_sets.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Pre-defined soil property sets — soil_property_sets","text":"","code":"# View available property sets names(soil_property_sets) #> [1] \"basic\"         \"standard\"      \"comprehensive\" \"physical\"      #> [5] \"chemical\"      \"fertility\"      # View properties in the basic set soil_property_sets$basic #> [1] \"pH\" \"OM\" \"P\"  \"K\"   # View properties in the standard set soil_property_sets$standard #> [1] \"Sand\" \"Silt\" \"Clay\" \"pH\"   \"OM\"   \"N\"    \"P\"    \"K\"    \"CEC\"   # Use with standard_scoring_rules() rules <- standard_scoring_rules(soil_property_sets$basic)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/soil_ucayali.html","id":null,"dir":"Reference","previous_headings":"","what":"Example Soil Data from Ucayali, Peru — soil_ucayali","title":"Example Soil Data from Ucayali, Peru — soil_ucayali","text":"dataset containing soil physical, chemical, fertility properties 50 soil samples collected Ucayali region Peru. dataset provided example demonstrating soil quality index (SQI) calculation workflow.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/soil_ucayali.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example Soil Data from Ucayali, Peru — soil_ucayali","text":"","code":"soil_ucayali"},{"path":"https://ccarbajal16.github.io/soilquality/reference/soil_ucayali.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example Soil Data from Ucayali, Peru — soil_ucayali","text":"data frame 50 rows 15 columns: SampleID Character. Unique identifier soil sample (UCY001-UCY050) Sand Numeric. Sand content percentage soil texture (0-100) Silt Numeric. Silt content percentage soil texture (0-100) Clay Numeric. Clay content percentage soil texture (0-100) BD Numeric. Bulk density g/cm³ pH Numeric. Soil pH measured water (1:1) OM Numeric. Organic matter content percentage SOC Numeric. Soil organic carbon content percentage N Numeric. Total nitrogen content percentage P Numeric. Available phosphorus mg/kg (Olsen method) K Numeric. Exchangeable potassium mg/kg CEC Numeric. Cation exchange capacity cmol/kg Ca Numeric. Exchangeable calcium cmol/kg Mg Numeric. Exchangeable magnesium cmol/kg EC Numeric. Electrical conductivity dS/m","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/soil_ucayali.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Example Soil Data from Ucayali, Peru — soil_ucayali","text":"Simulated data based typical soil properties Ucayali   region Peru.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/soil_ucayali.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Example Soil Data from Ucayali, Peru — soil_ucayali","text":"dataset represents typical soil properties found tropical agricultural soils Ucayali region. Values simulated based realistic ranges region. soils generally acidic (pH 4-7.5), moderate organic matter content variable nutrient levels. dataset can used : Demonstrate complete SQI calculation workflow Test different property selection strategies Explore various scoring rules weighting methods Generate example visualizations","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/soil_ucayali.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Example Soil Data from Ucayali, Peru — soil_ucayali","text":"","code":"# Load the dataset data(soil_ucayali)  # View structure str(soil_ucayali) #> 'data.frame':\t50 obs. of  15 variables: #>  $ SampleID: chr  \"UCY001\" \"UCY002\" \"UCY003\" \"UCY004\" ... #>  $ Sand    : num  42.4 42.7 54.6 41.9 50.1 49.5 57.6 38.3 40.8 38.6 ... #>  $ Silt    : num  35.4 30.2 25.4 37.4 30.3 31.8 20.1 44.6 34.4 30.8 ... #>  $ Clay    : num  22.2 27.1 20 20.7 19.6 18.7 22.3 17.1 24.8 30.6 ... #>  $ BD      : num  1.47 1.47 1.4 1.2 1.33 1.31 1.43 1.29 1.5 1.29 ... #>  $ pH      : num  7 6.2 5 5.6 4.9 4.8 4.6 4.7 6.5 5.2 ... #>  $ OM      : num  2.46 2.29 2.49 2.88 4.24 2.72 3.77 3.37 2.7 1.42 ... #>  $ SOC     : num  1.24 1.22 1.13 1.07 1.38 1.77 0.59 1.71 2.22 2.62 ... #>  $ N       : num  0.201 0.05 0.129 0.156 0.105 0.167 0.171 0.148 0.05 0.279 ... #>  $ P       : num  7.8 4.5 6.1 7.9 10 3 7 10.3 6.4 8.7 ... #>  $ K       : num  131 121 106 113 118 40 123 83 101 88 ... #>  $ CEC     : num  10.2 9 15.1 14.3 7.5 11.7 9.3 5.8 12.5 11.8 ... #>  $ Ca      : num  5.51 3.56 5.83 4.8 6.48 2.75 4.44 3.87 4.26 3.74 ... #>  $ Mg      : num  2.44 1.78 1.78 0.89 2.27 1.67 1.41 0.95 1.62 1.29 ... #>  $ EC      : num  0.06 0.26 0.31 0.1 0.3 0.17 0.35 0.3 0.33 0.26 ...  # Summary statistics summary(soil_ucayali) #>    SampleID              Sand            Silt            Clay       #>  Length:50          Min.   :29.60   Min.   :15.90   Min.   :11.30   #>  Class :character   1st Qu.:39.25   1st Qu.:25.52   1st Qu.:18.90   #>  Mode  :character   Median :43.45   Median :30.65   Median :23.35   #>                     Mean   :45.21   Mean   :31.45   Mean   :23.34   #>                     3rd Qu.:50.55   3rd Qu.:36.17   3rd Qu.:27.68   #>                     Max.   :64.30   Max.   :46.30   Max.   :38.00   #>        BD              pH              OM             SOC        #>  Min.   :1.150   Min.   :4.100   Min.   :1.220   Min.   :0.570   #>  1st Qu.:1.280   1st Qu.:4.600   1st Qu.:2.507   1st Qu.:1.240   #>  Median :1.335   Median :5.050   Median :2.895   Median :1.585   #>  Mean   :1.355   Mean   :5.192   Mean   :3.024   Mean   :1.601   #>  3rd Qu.:1.430   3rd Qu.:5.600   3rd Qu.:3.643   3rd Qu.:1.972   #>  Max.   :1.800   Max.   :7.000   Max.   :4.860   Max.   :2.620   #>        N                P                K              CEC        #>  Min.   :0.0500   Min.   : 2.000   Min.   : 40.0   Min.   : 5.80   #>  1st Qu.:0.1128   1st Qu.: 6.150   1st Qu.: 88.0   1st Qu.:10.22   #>  Median :0.1505   Median : 8.050   Median :102.0   Median :11.75   #>  Mean   :0.1469   Mean   : 7.860   Mean   :102.2   Mean   :12.08   #>  3rd Qu.:0.1755   3rd Qu.: 9.575   3rd Qu.:118.0   3rd Qu.:14.05   #>  Max.   :0.2790   Max.   :15.200   Max.   :144.0   Max.   :19.30   #>        Ca              Mg              EC         #>  Min.   :1.130   Min.   :0.240   Min.   :0.0500   #>  1st Qu.:3.560   1st Qu.:1.292   1st Qu.:0.1700   #>  Median :4.410   Median :1.700   Median :0.2400   #>  Mean   :4.366   Mean   :1.701   Mean   :0.2374   #>  3rd Qu.:5.178   3rd Qu.:2.180   3rd Qu.:0.3000   #>  Max.   :6.730   Max.   :3.050   Max.   :0.5000    # Basic SQI calculation with standard properties if (FALSE) { # \\dontrun{ result <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\"),   id_column = \"SampleID\" ) print(result) } # }"},{"path":"https://ccarbajal16.github.io/soilquality/reference/soilquality-package.html","id":null,"dir":"Reference","previous_headings":"","what":"soilquality: Soil Quality Index Calculation with PCA and AHP — soilquality-package","title":"soilquality: Soil Quality Index Calculation with PCA and AHP — soilquality-package","text":"Provides tools calculating Soil Quality Index (SQI) using Principal Component Analysis (PCA) Minimum Data Set (MDS) selection Analytic Hierarchy Process (AHP) expert-based weighting. package transforms soil property data standardized quality metrics comprehensive visualization interactive tools. soilquality package provides comprehensive toolkit calculating Soil Quality Index (SQI) using scientifically validated methods. combines Principal Component Analysis (PCA) selecting Minimum Data Set (MDS) indicators Analytic Hierarchy Process (AHP) expert-based weighting.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/soilquality-package.html","id":"main-features","dir":"Reference","previous_headings":"","what":"Main Features","title":"soilquality: Soil Quality Index Calculation with PCA and AHP — soilquality-package","text":"Data Handling: Import standardize soil property data MDS Selection: Use PCA identify key soil indicators Expert Weighting: Apply AHP indicator importance Flexible Scoring: Multiple scoring functions different property types Visualization: Comprehensive plotting functions results Interactive Tools: Shiny application non-programmers","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/soilquality-package.html","id":"key-functions","dir":"Reference","previous_headings":"","what":"Key Functions","title":"soilquality: Soil Quality Index Calculation with PCA and AHP — soilquality-package","text":"Main Workflow Functions: compute_sqi: Calculate SQI CSV files compute_sqi_df: Calculate SQI data frames compute_sqi_properties: Calculate SQI property selection Data Handling: read_soil_csv: Read soil data CSV files standardize_numeric: Standardize numeric columns PCA MDS Selection: pca_select_mds: Perform PCA select minimum data set AHP Weighting: create_ahp_matrix: Interactive AHP matrix creation ahp_weights: Calculate weights pairwise comparisons Scoring Functions: higher_better: Constructor properties higher better lower_better: Constructor properties lower better optimum_range: Constructor properties optimal ranges threshold_scoring: Constructor custom threshold-based scoring standard_scoring_rules: Get standard scoring rules common properties Property Sets: soil_property_sets: Pre-defined collections soil properties Visualization: plot.sqi_result: Plot SQI results (S3 method) plot_sqi_report: Generate comprehensive multi-panel report Interactive Tools: run_sqi_app: Launch interactive Shiny application","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/soilquality-package.html","id":"getting-started","dir":"Reference","previous_headings":"","what":"Getting Started","title":"soilquality: Soil Quality Index Calculation with PCA and AHP — soilquality-package","text":"typical workflow calculating SQI involves: 1. Load data: Use read_soil_csv() provide data frame 2. Select properties: Choose relevant soil properties analysis 3. Define scoring rules: Specify property scored 4. Calculate SQI: Use compute_sqi_properties() related functions 5. Visualize results: Use plot() plot_sqi_report()","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/soilquality-package.html","id":"example-workflow","dir":"Reference","previous_headings":"","what":"Example Workflow","title":"soilquality: Soil Quality Index Calculation with PCA and AHP — soilquality-package","text":"","code":"# Load example data data(soil_ucayali)  # Calculate SQI with standard properties result <- compute_sqi_properties(   data = soil_ucayali,   properties = c(\"pH\", \"OM\", \"N\", \"P\", \"K\", \"CEC\"),   id_column = \"SampleID\" )  # View results print(result)  # Create visualizations plot(result, type = \"distribution\") plot(result, type = \"weights\")  # Generate comprehensive report plot_sqi_report(result)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/soilquality-package.html","id":"custom-scoring-rules","dir":"Reference","previous_headings":"","what":"Custom Scoring Rules","title":"soilquality: Soil Quality Index Calculation with PCA and AHP — soilquality-package","text":"can define custom scoring rules property:","code":"# Define scoring rules rules <- list(   pH = optimum_range(optimal = 6.5, tolerance = 1),   OM = higher_better(),   BD = lower_better(),   P = higher_better() )  # Calculate SQI with custom rules result <- compute_sqi_properties(   data = soil_ucayali,   properties = names(rules),   scoring_rules = rules,   id_column = \"SampleID\" )"},{"path":"https://ccarbajal16.github.io/soilquality/reference/soilquality-package.html","id":"interactive-mode","dir":"Reference","previous_headings":"","what":"Interactive Mode","title":"soilquality: Soil Quality Index Calculation with PCA and AHP — soilquality-package","text":"users prefer graphical interface:","code":"# Launch Shiny application run_sqi_app()"},{"path":"https://ccarbajal16.github.io/soilquality/reference/soilquality-package.html","id":"package-options","dir":"Reference","previous_headings":"","what":"Package Options","title":"soilquality: Soil Quality Index Calculation with PCA and AHP — soilquality-package","text":"package uses following options: None currently defined","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/soilquality-package.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"soilquality: Soil Quality Index Calculation with PCA and AHP — soilquality-package","text":"Andrews, S. S., Karlen, D. L., & Cambardella, C. . (2004).     soil management assessment framework: quantitative soil quality     evaluation method. Soil Science Society America Journal, 68(6), 1945-1962. Saaty, T. L. (1980). Analytic Hierarchy Process.     McGraw-Hill, New York.","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/soilquality-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"soilquality: Soil Quality Index Calculation with PCA and AHP — soilquality-package","text":"Maintainer: Soil Science Team soilquality@example.com","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/standard_scoring_rules.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate standard scoring rules for soil properties — standard_scoring_rules","title":"Generate standard scoring rules for soil properties — standard_scoring_rules","text":"Automatically assigns appropriate scoring rules soil properties based pattern matching property names. function provides sensible defaults common soil properties, reducing need manually specify scoring rules property.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/standard_scoring_rules.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate standard scoring rules for soil properties — standard_scoring_rules","text":"","code":"standard_scoring_rules(properties)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/standard_scoring_rules.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate standard scoring rules for soil properties — standard_scoring_rules","text":"properties Character vector property names, single string naming pre-defined property set soil_property_sets. property set name provided (e.g., \"basic\", \"standard\"), corresponding properties soil_property_sets used.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/standard_scoring_rules.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate standard scoring rules for soil properties — standard_scoring_rules","text":"named list scoring_rule objects, one   property. names list correspond property names.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/standard_scoring_rules.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate standard scoring rules for soil properties — standard_scoring_rules","text":"function applies following pattern matching rules (case-insensitive): Properties containing \"ph\": optimum_range(7, 1) Properties containing \"ec\" \"electrical\": lower_better() Properties containing \"bd\" \"bulk\": lower_better() Properties containing \"om\", \"soc\", \"organic\": higher_better() Properties containing \"n\", \"nitrogen\", \"p\", \"phosph\", \"k\", \"potass\":     higher_better() Properties containing \"cec\", \"ca\", \"mg\": higher_better() properties: higher_better() (default)","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/standard_scoring_rules.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate standard scoring rules for soil properties — standard_scoring_rules","text":"","code":"# Generate rules for basic property set rules <- standard_scoring_rules(\"basic\") names(rules) #> [1] \"pH\" \"OM\" \"P\"  \"K\"   # Generate rules for custom properties custom_props <- c(\"pH\", \"BD\", \"OM\", \"Sand\") rules <- standard_scoring_rules(custom_props)  # View a specific rule rules$pH #> Scoring Rule: optimum_range  #>   Type: Optimum range #>   Optimal value: 7  #>   Tolerance: 1  #>   Penalty: linear   # Use with standard property sets rules <- standard_scoring_rules(soil_property_sets$standard)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/standardize_numeric.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize Numeric Columns — standardize_numeric","title":"Standardize Numeric Columns — standardize_numeric","text":"Applies z-score standardization numeric columns data frame. Non-numeric columns preserved unchanged. function useful preparing soil property data multivariate analysis PCA.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/standardize_numeric.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize Numeric Columns — standardize_numeric","text":"","code":"standardize_numeric(df, exclude = NULL)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/standardize_numeric.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standardize Numeric Columns — standardize_numeric","text":"df data frame containing soil property data. exclude Optional character vector column names exclude standardization. columns preserved original form. Default NULL (exclusions).","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/standardize_numeric.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standardize Numeric Columns — standardize_numeric","text":"data frame structure input, numeric   columns (except excluded) standardized mean = 0   standard deviation = 1. Non-numeric columns excluded columns   returned unchanged.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/standardize_numeric.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Standardize Numeric Columns — standardize_numeric","text":"Z-score standardization calculated : (x - mean(x)) / sd(x) Columns zero variance (sd = 0) left unchanged avoid division zero. NA values preserved positions.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/standardize_numeric.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Standardize Numeric Columns — standardize_numeric","text":"","code":"# Create example soil data soil_data <- data.frame(   SampleID = c(\"S1\", \"S2\", \"S3\", \"S4\"),   pH = c(6.5, 7.0, 6.8, 7.2),   OM = c(3.2, 2.8, 3.5, 3.0),   Sand = c(45, 50, 42, 48) )  # Standardize all numeric columns, preserve SampleID standardized <- standardize_numeric(soil_data, exclude = \"SampleID\")  # Verify standardization colMeans(standardized[, c(\"pH\", \"OM\", \"Sand\")], na.rm = TRUE) #>            pH            OM          Sand  #> -1.387779e-17  1.387779e-17  1.387779e-17  apply(standardized[, c(\"pH\", \"OM\", \"Sand\")], 2, sd, na.rm = TRUE) #>   pH   OM Sand  #>    1    1    1"},{"path":"https://ccarbajal16.github.io/soilquality/reference/threshold_scoring.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a threshold-based scoring rule — threshold_scoring","title":"Create a threshold-based scoring rule — threshold_scoring","text":"Creates scoring rule object indicators custom piecewise linear scoring based threshold-score pairs. Values scored using linear interpolation specified thresholds.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/threshold_scoring.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a threshold-based scoring rule — threshold_scoring","text":"","code":"threshold_scoring(thresholds, scores)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/threshold_scoring.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a threshold-based scoring rule — threshold_scoring","text":"thresholds Numeric vector threshold values (sorted ascending order) scores Numeric vector scores corresponding threshold. Must length thresholds.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/threshold_scoring.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a threshold-based scoring rule — threshold_scoring","text":"scoring_rule object class c(\"scoring_rule\",   \"threshold_scoring\")","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/reference/threshold_scoring.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a threshold-based scoring rule — threshold_scoring","text":"","code":"# Create a rule for phosphorus with custom thresholds p_rule <- threshold_scoring(   thresholds = c(0, 10, 20, 30),   scores = c(0, 0.5, 1.0, 1.0) )  # Create a rule with non-linear scoring pattern custom_rule <- threshold_scoring(   thresholds = c(0, 5, 15, 25, 40),   scores = c(0, 0.3, 0.8, 1.0, 0.9) )"},{"path":"https://ccarbajal16.github.io/soilquality/reference/to_numeric.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Values to Numeric — to_numeric","title":"Convert Values to Numeric — to_numeric","text":"Safely converts vector numeric type, returning NA values converted. helper function used internally data preprocessing.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/to_numeric.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Values to Numeric — to_numeric","text":"","code":"to_numeric(x)"},{"path":"https://ccarbajal16.github.io/soilquality/reference/to_numeric.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Values to Numeric — to_numeric","text":"x vector type converted numeric.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/to_numeric.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Values to Numeric — to_numeric","text":"numeric vector length input. Values   converted numeric returned NA.","code":""},{"path":"https://ccarbajal16.github.io/soilquality/reference/to_numeric.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Values to Numeric — to_numeric","text":"","code":"# Convert character numbers to numeric to_numeric(c(\"1.5\", \"2.3\", \"3.7\")) #> [1] 1.5 2.3 3.7  # Non-numeric values become NA to_numeric(c(\"1.5\", \"text\", \"3.7\")) #> [1] 1.5  NA 3.7  # Already numeric values pass through to_numeric(c(1.5, 2.3, 3.7)) #> [1] 1.5 2.3 3.7"},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"soilquality-100","dir":"Changelog","previous_headings":"","what":"soilquality 1.0.0","title":"soilquality 1.0.0","text":"Release Date: 2025-12-07","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"initial-release-1-0-0","dir":"Changelog","previous_headings":"","what":"Initial Release","title":"soilquality 1.0.0","text":"first public release soilquality package, providing comprehensive tools calculating Soil Quality Index (SQI) using scientifically validated methods combining Principal Component Analysis (PCA) Analytic Hierarchy Process (AHP).","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"core-functionality-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Major Features","what":"Core Functionality","title":"soilquality 1.0.0","text":"PCA-based MDS Selection: Automated selection Minimum Data Set indicators using Principal Component Analysis configurable variance loading thresholds AHP Weighting System: Expert-based indicator weighting consistency ratio validation following Saaty’s methodology Flexible Scoring Framework: Multiple normalization methods handle different soil property characteristics Property Selection: Pre-defined property sets (basic, standard, comprehensive, physical, chemical, fertility) custom property selection Standard Scoring Rules: Automatic rule assignment based property name patterns common soil properties Comprehensive Visualization: Five plot types (distribution, indicators, weights, scree, biplot) plus multi-panel reports Interactive Application: Shiny-based GUI non-programmers file upload, configuration, results download","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"workflow-options-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Major Features","what":"Workflow Options","title":"soilquality 1.0.0","text":"File-based workflow: compute_sqi() CSV input/output -memory workflow: compute_sqi_df() data frame processing Enhanced workflow: compute_sqi_properties() property selection constructor-based scoring","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"data-handling-functions-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Complete Function Reference","what":"Data Handling Functions","title":"soilquality 1.0.0","text":"read_soil_csv() - Import soil data CSV files encoding handling standardize_numeric() - Z-score standardization numeric columns to_numeric() - Safe type conversion NA failures","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"pca-and-mds-selection-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Complete Function Reference","what":"PCA and MDS Selection","title":"soilquality 1.0.0","text":"pca_select_mds() - Perform PCA select minimum data set based variance loading thresholds","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"ahp-weighting-functions-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Complete Function Reference","what":"AHP Weighting Functions","title":"soilquality 1.0.0","text":"ahp_weights() - Calculate indicator weights pairwise comparison matrix using eigenvalue decomposition create_ahp_matrix() - Interactive programmatic AHP matrix creation validation ratio_to_saaty() - Convert importance ratios Saaty scale (1-9) print.ahp_matrix() - S3 print method AHP matrix objects","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"scoring-functions-low-level-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Complete Function Reference","what":"Scoring Functions (Low-level)","title":"soilquality 1.0.0","text":"score_higher_better() - Normalize properties higher values indicate better quality score_lower_better() - Normalize properties lower values indicate better quality score_optimum() - Normalize properties optimal range using linear quadratic penalty score_threshold() - Custom piecewise linear scoring based threshold-score pairs score_indicators() - Apply scoring functions multiple indicators","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"scoring-constructors-user-facing-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Complete Function Reference","what":"Scoring Constructors (User-facing)","title":"soilquality 1.0.0","text":"higher_better() - Constructor higher--better scoring rules lower_better() - Constructor lower--better scoring rules optimum_range() - Constructor optimal range scoring tolerance threshold_scoring() - Constructor custom threshold-based scoring print.scoring_rule() - S3 print method scoring rule objects","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"property-sets-and-standard-rules-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Complete Function Reference","what":"Property Sets and Standard Rules","title":"soilquality 1.0.0","text":"soil_property_sets - Pre-defined collections: basic (pH, OM, P, K), standard (9 properties), comprehensive (14 properties), physical, chemical, fertility standard_scoring_rules() - Automatic scoring rule assignment based property name patterns","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"sqi-computation-functions-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Complete Function Reference","what":"SQI Computation Functions","title":"soilquality 1.0.0","text":"compute_sqi() - File-based SQI computation CSV input/output compute_sqi_df() - -memory SQI computation data frame input compute_sqi_properties() - Enhanced SQI computation property selection constructor-based scoring","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"visualization-functions-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Complete Function Reference","what":"Visualization Functions","title":"soilquality 1.0.0","text":"“distribution”: Histogram SQI values mean line “indicators”: Boxplots indicator scores “weights”: Bar chart AHP weights CR annotation “scree”: Variance explained principal components “biplot”: PCA biplot observations variables plot_sqi_report() - Generate comprehensive 2x2 multi-panel visualization report","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"interactive-tools-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Complete Function Reference","what":"Interactive Tools","title":"soilquality 1.0.0","text":"run_sqi_app() - Launch interactive Shiny application file upload, property selection, scoring configuration, AHP input, results display, CSV download","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"example-datasets-1-0-0","dir":"Changelog","previous_headings":"Initial Release","what":"Example Datasets","title":"soilquality 1.0.0","text":"Physical properties: Sand, Silt, Clay, BD (bulk density) Chemical properties: pH, OM (organic matter), SOC (soil organic carbon) Nutrients: N, P, K, CEC, Ca, Mg : EC (electrical conductivity)","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"vignettes-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Documentation","what":"Vignettes","title":"soilquality 1.0.0","text":"Introduction soilquality: Basic workflow, installation, quick start examples, result interpretation Advanced Usage: Property selection strategies, custom scoring rules, AHP matrix creation, visualization options AHP Matrices Guide: AHP methodology explanation, creating pairwise comparisons, consistency ratio interpretation, tips improving inconsistent matrices","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"function-documentation-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Documentation","what":"Function Documentation","title":"soilquality 1.0.0","text":"Complete roxygen2 documentation 28 exported functions Parameter descriptions types defaults Return value specifications structure details Working examples function Cross-references related functions","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"package-documentation-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Documentation","what":"Package Documentation","title":"soilquality 1.0.0","text":"Comprehensive README installation instructions, quick start, main functions, citation information Package-level documentation workflow overview examples NEWS file version history","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"test-coverage-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Testing and Quality","what":"Test Coverage","title":"soilquality 1.0.0","text":"Unit tests core modules (data handling, PCA/MDS, AHP, scoring, SQI computation, visualization) Integration tests complete workflows Test coverage >= 80% core functions tests pass testthat framework","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"package-quality-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Testing and Quality","what":"Package Quality","title":"soilquality 1.0.0","text":"Passes R CMD check 0 errors, 0 warnings examples run without errors Valid DESCRIPTION NAMESPACE files MIT License included UTF-8 encoding properly declared dependencies declared DESCRIPTION","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"required-imports-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Dependencies","what":"Required (Imports)","title":"soilquality 1.0.0","text":"stats - PCA (prcomp), eigenvalue calculations utils - CSV reading, data manipulation","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"optional-suggests-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Dependencies","what":"Optional (Suggests)","title":"soilquality 1.0.0","text":"shiny - Interactive application DT - Data tables Shiny app testthat (>= 3.0.0) - Unit testing knitr - Vignette building rmarkdown - Vignette building covr - Test coverage analysis","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"r-version-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Dependencies","what":"R Version","title":"soilquality 1.0.0","text":"Requires R >= 3.5.0","code":""},{"path":[]},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"technical-constraints-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Known Limitations","what":"Technical Constraints","title":"soilquality 1.0.0","text":"PCA requires least 3 numeric variables meaningful dimensionality reduction Sufficient observations recommended (n >= p) stable PCA results AHP consistency ratio < 0.1 reliable weights (warning issued exceeded) Interactive AHP matrix creation requires interactive R session (available batch mode)","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"scope-limitations-1-0-0","dir":"Changelog","previous_headings":"Initial Release > Known Limitations","what":"Scope Limitations","title":"soilquality 1.0.0","text":"Package focuses PCA-based MDS selection; selection methods included AHP weighting method implemented; MCDA methods included Visualization uses base R graphics (ggplot2 integration) Shiny app requires manual launch; deployed web version included","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"future-development-1-0-0","dir":"Changelog","previous_headings":"Initial Release","what":"Future Development","title":"soilquality 1.0.0","text":"Potential enhancements future versions: - Additional MDS selection methods (correlation-based, expert selection) - Alternative weighting methods (equal weights, data-driven weights) - ggplot2-based visualization option - Additional scoring functions (membership functions, fuzzy logic) - Spatial analysis integration - Time series support monitoring - Export additional formats (PDF reports, GIS layers)","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"acknowledgments-1-0-0","dir":"Changelog","previous_headings":"Initial Release","what":"Acknowledgments","title":"soilquality 1.0.0","text":"package implements methodologies soil quality assessment literature: - Andrews et al. (2004) - Soil Management Assessment Framework - Saaty (1980) - Analytic Hierarchy Process - PCA-based MDS selection approaches widely used soil science research","code":""},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"citation-1-0-0","dir":"Changelog","previous_headings":"Initial Release","what":"Citation","title":"soilquality 1.0.0","text":"cite package publications:","code":"Carbajal, Carlos (2025). soilquality: Soil Quality Index Calculation with PCA and AHP. R package version 1.0.0. https://github.com/ccarbajal16/soilquality"},{"path":"https://ccarbajal16.github.io/soilquality/news/index.html","id":"getting-help-1-0-0","dir":"Changelog","previous_headings":"Initial Release","what":"Getting Help","title":"soilquality 1.0.0","text":"Function documentation: ?function_name help(function_name) Vignettes: browseVignettes(\"soilquality\") Issues: https://github.com/ccarbajal16/soilquality/issues","code":""}]
